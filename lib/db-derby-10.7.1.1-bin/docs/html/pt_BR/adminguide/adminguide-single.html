<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><META http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Guia do Servidor e Administra&ccedil;&atilde;o do Derby</title><META content="text/css" http-equiv="Content-Style-Type"><style type="text/css">
        a { color: black; border: none; text-decoration: none; }
        img { border: none; }
      </style></head><body topmargin="6" leftmargin="6" marginheight="6" marginwidth="6" bgcolor="white"><br><div valign="top"><div style="padding: 6pt; border-width: thin; border-color: black; font-family: Helvetica; margin-top: 2pc;"><div style="text-align: right; margin-bottom: 12pc; margin-top: 12pc; line-height: 100%; font-size: 12pt;"><img src="../images/logowithtext.jpg"></div></div><a name="cover"></a><div style="font-family: Helvetica; text-align: left;"><div style="line-height: 140%; font-weight: bold; font-size: 22pt;">Guia do Servidor e Administra&ccedil;&atilde;o do Derby</div><div style="font-style: italic; margin-bottom: 1in; line-height: 140%; font-size: 8pt;">
          Version 10</div></div><div style="line-height: normal; font-size: 8pt; text-align: right; margin-top: 3pc;">
          Derby Document build: <div>November 29, 2010, 7:07:11 AM (PST)</div></div></div><br><br><div valign="top"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; text-align: center; color: purple;"></div></div><br><br><div valign="top"><div style="font-style: italic; margin-bottom: 1in; line-height: 140%; font-size: 8pt;">
          Version 10
         &nbsp;
	Guia do Servidor e Administra&ccedil;&atilde;o do Derby</div></div><div valign="top"><a name="page1-1"></a><div style="font-family: Helvetica; font-size: 10pt; line-height: 12pt;"><div style="font-family: Helvetica; text-align: left;"><div> &nbsp;&nbsp;&nbsp; </div><a name="contents"></a><div style="line-height: 140%; font-weight: bold; font-size: 20pt;">
              Contents </div><div style="margin-left: 4.9pc; margin-top: 6pt;"><a href="#radmincopyright"><span style="font-weight: bold;">Direitos autorais reservados</span> &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 4.9pc; margin-top: 6pt;"><a href="#radminlicense"><span style="font-weight: bold;">Licen&ccedil;a</span> &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 4.9pc; margin-top: 6pt;"><a href="#cadminpreface30074"><span style="font-weight: bold;">Sobre este guia</span> &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 7.5pc;"><a href="#cadminpreface11181"><span style="font-weight: bold;">Finalidade deste guia</span> &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 7.5pc;"><a href="#cadminpreface22460"><span style="font-weight: bold;">Audi&ecirc;ncia</span> &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 7.5pc;"><a href="#cadminpreface23947"><span style="font-weight: bold;">Como este guia est&aacute; organizado</span> &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 4.9pc; margin-top: 6pt;"><a href="#cadminpartone"><span style="font-weight: bold;">Parte 1: Guia do servidor Derby</span> &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 7.5pc;"><a href="#cadminov11108"><span style="font-weight: bold;">O Derby em um ambiente multiusu&aacute;rio</span> &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#cadminov17524">O Derby em uma estrutura servidora &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#cadminov38650">Sobre este guia e a documenta&ccedil;&atilde;o do Network Server &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 7.5pc;"><a href="#cadminapps59125"><span style="font-weight: bold;">Utiliza&ccedil;&atilde;o do Network Server com aplicativos Derby pr&eacute;-existentes</span> &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#cadminappsthenetworkserverandjvms">O Network Server e as JVMs &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#tadminappschangingyourclasspath">Instala&ccedil;&atilde;o dos arquivos jar requeridos e adi&ccedil;&otilde;es ao caminho de classes &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#tadmincbdjhhfd">Inicializa&ccedil;&atilde;o do Network Server &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#tadminconfigshuttingdownthenetworkserver">Parar o Network Server &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#tadminconfigsysteminformation">Obten&ccedil;&atilde;o de informa&ccedil;&otilde;es do sistema &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#cadminappsclient">Acesso ao Network Server utilizando o driver cliente da rede &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#cadminnsdatasources">Acesso ao Network Server utilizando DataSource &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#cadminapps811478">XA e o Network Server &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#cadminappsusingthederbytoolswiththene">Utiliza&ccedil;&atilde;o das ferramentas do Derby com o Network Server &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#cadminapps">Diferen&ccedil;as entre executar o Derby no modo incorporado e utilizando o Network Server &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#tadminappssettingportnumbers">Defini&ccedil;&atilde;o do n&uacute;mero da porta &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 7.5pc;"><a href="#cadminconfig86869"><span style="font-weight: bold;">Gerenciamento do Network Server do Derby</span> &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#cadminconfigoverview">Vis&atilde;o geral &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#tadminconfigsettingnetwrokserverproperties">Defini&ccedil;&atilde;o das propriedades do Network Server &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#tadminconfigverifyingstartup">Verifica&ccedil;&atilde;o da inicializa&ccedil;&atilde;o &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 7.5pc;"><a href="#cadminservlet98430"><span style="font-weight: bold;">Gerenciamento remoto do Network Server do Derby utilizando a interface servlet</span> &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#radminservlet810694">P&aacute;gina de inicializa&ccedil;&atilde;o &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#radminservlet810717">P&aacute;gina de execu&ccedil;&atilde;o &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#radminservlet810796">P&aacute;gina de rastreamento da sess&atilde;o &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#radminservlet810822">P&aacute;gina do diret&oacute;rio de rastreamento &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#radminservlet810910">Defini&ccedil;&atilde;o de par&acirc;metros do Network Server &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 7.5pc;"><a href="#cadminadvtops"><span style="font-weight: bold;">T&oacute;picos avan&ccedil;ados do Network Server do Derby</span> &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#cadminnetservsecurity">Seguran&ccedil;a do Network Server &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#tadminnetservrun">Execu&ccedil;&atilde;o do Network Server sob o gerenciador de seguran&ccedil;a &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#tadminconfiguringthenetworkserver">Configura&ccedil;&atilde;o do Network Server para tratar as conex&otilde;es &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#tadminlogfile">Controle do registro pela utiliza&ccedil;&atilde;o do arquivo de log &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#tadmintracefacility">Controle do rastreamento pela utiliza&ccedil;&atilde;o da facilidade de rastreamento &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 7.5pc;"><a href="#radminsampleprograms"><span style="font-weight: bold;">Programas exemplo para o Network Server do Derby</span> &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#radminovnssample">O programa exemplo NsSample &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#cadminovntsrvsample">Programas exemplo do Network Server para conex&otilde;es incorporada e cliente &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 4.9pc; margin-top: 6pt;"><a href="#cadminparttwo"><span style="font-weight: bold;">Parte 2: Guia de administra&ccedil;&atilde;o do Derby</span> &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 7.5pc;"><a href="#cadminconsist01"><span style="font-weight: bold;">Verifica&ccedil;&atilde;o da consist&ecirc;ncia do banco de dados</span> &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#radminconsist30301">A fun&ccedil;&atilde;o SYSCS_CHECK_TABLE &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#radminconsist38781">Exemplos de mensagem de erro de SYSCS_CHECK_TABLE &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#radminconsist24642">Exemplos de comandos SYSCS_CHECK_TABLE &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 7.5pc;"><a href="#cadminhubbkup98797"><span style="font-weight: bold;">C&oacute;pia de seguran&ccedil;a e restaura&ccedil;&atilde;o do banco de dados</span> &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#cadminbckupdb">C&oacute;pia de seguran&ccedil;a do banco de dados &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#tadminhubbkup44">Restaura&ccedil;&atilde;o do banco de dados a partir da c&oacute;pia de seguran&ccedil;a &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#tadmincrtdbbkup">Cria&ccedil;&atilde;o de um banco de dados a partir de uma c&oacute;pia de seguran&ccedil;a &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#cadminrollforward">Recupera&ccedil;&atilde;o com rolagem para frente &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 7.5pc;"><a href="#cadminlog98"><span style="font-weight: bold;">Arquivo de log em uma unidade separada</span> &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#tadminlog800206">Utiliza&ccedil;&atilde;o do atributo logDevice &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#radminlog800241">Exemplo de cria&ccedil;&atilde;o do log em um local diferente do padr&atilde;o &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#radminlog800279">Exemplo de mover o log manualmente &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#cadminlog800315">Quest&otilde;es relativas ao log em um local diferente do padr&atilde;o &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 7.5pc;"><a href="#cadminlockvti42553"><span style="font-weight: bold;">Obten&ccedil;&atilde;o de informa&ccedil;&otilde;es sobre bloqueios</span> &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 9pc;"><a href="#cadminlockvti83889">Monitoramento dos impasses &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 7.5pc;"><a href="#cadminspace21579"><span style="font-weight: bold;">Recupera&ccedil;&atilde;o do espa&ccedil;o n&atilde;o utilizado</span> &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div><div style="margin-left: 4.9pc; margin-top: 6pt;"><a href="#radmintrademderby"><span style="font-weight: bold;">Marcas Registradas</span> &nbsp;&nbsp;&nbsp; <span>&bull;</span></a></div></div></div></div><div valign="top"><div style="font-family: Helvetica; font-weight: bold; font-size: 10pt; text-align: center;"><span>&bull;</span></div></div><br><br><div valign="top"><div style="line-height: 8pt; font-size: 8pt;">Guia do Servidor e Administra&ccedil;&atilde;o do Derby</div></div><div valign="top"><div style="font-family: Helvetica; font-size: 10pt; text-align: left;">Apache Software FoundationGuia do Servidor e Administra&ccedil;&atilde;o do DerbyApache Derby<div><a name="N1003C"></a><div style="margin-top: 0pc; margin-bottom: 1.4pc; font-size: 16pt; font-weight: bold; padding-top: 1.4pc;"><div style="border-right-width: 0pt; border-left-width: 0pt; line-height: 100%; border-top-width: 3pt; border-top-color: black;"><a name="radmincopyright"></a><div></div>Direitos autorais reservados</div></div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N10045"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Copyright 2004, 2006 The Apache Software Foundation</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">Licenciado sob a Licen&ccedil;a Apache, Vers&atilde;o 2.0 (doravante chamada apenas de
"Licen&ccedil;a"); este arquivo n&atilde;o pode ser utilizado a n&atilde;o ser em conformidade com a
Licen&ccedil;a. Pode ser obtida uma c&oacute;pia da Licen&ccedil;a em
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><span style="color: blue;"><a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></span></div></pre></div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N10060"></a><span></span><div style="font-weight: bold;">Informa&ccedil;&otilde;es relacionadas</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><span style="color: blue;"><a href="#radminlicense">Licen&ccedil;a</a></span></div></div></div></div><div><a name="N1007F"></a><div style="margin-top: 0pc; margin-bottom: 1.4pc; font-size: 16pt; font-weight: bold; padding-top: 1.4pc;"><div style="border-right-width: 0pt; border-left-width: 0pt; line-height: 100%; border-top-width: 3pt; border-top-color: black;"><a name="radminlicense"></a><div></div>Licen&ccedil;a</div></div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; margin-left: 72pt;"></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N100A2"></a><span></span><div style="font-weight: bold;">Licen&ccedil;a Apache, Vers&atilde;o 2.0</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">
                               Apache License
                           Version 2.0, January 2004
                        http://www.apache.org/licenses/

   TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION

   1. Definitions.

      "License" shall mean the terms and conditions for use,
      reproduction, and distribution as defined by Sections 1 through
      9 of this document.

      "Licensor" shall mean the copyright owner or entity authorized
      by the copyright owner that is granting the License.

      "Legal Entity" shall mean the union of the acting entity and all
      other entities that control, are controlled by, or are under
      common control with that entity. For the purposes of this
      definition, "control" means (i) the power, direct or indirect,
      to cause the direction or management of such entity, whether by
      contract or otherwise, or (ii) ownership of fifty percent (50%)
      or more of the outstanding shares, or (iii) beneficial ownership
      of such entity.

      "You" (or "Your") shall mean an individual or Legal Entity
      exercising permissions granted by this License.

      "Source" form shall mean the preferred form for making
      modifications, including but not limited to software source code,
      documentation source, and configuration files.

      "Object" form shall mean any form resulting from mechanical
      transformation or translation of a Source form, including but
      not limited to compiled object code, generated documentation,
      and conversions to other media types.

      "Work" shall mean the work of authorship, whether in Source or
      Object form, made available under the License, as indicated by a
      copyright notice that is included in or attached to the work
      (an example is provided in the Appendix below).

      "Derivative Works" shall mean any work, whether in Source or
      Object form, that is based on (or derived from) the Work and
      for which the editorial revisions, annotations, elaborations,
      or other modifications represent, as a whole, an original work
      of authorship.  For the purposes of this License, Derivative
      Works shall not include works that remain separable from, or
      merely link (or bind by name) to the interfaces of, the Work
      and Derivative Works thereof.

      "Contribution" shall mean any work of authorship, including
      the original version of the Work and any modifications or
      additions to that Work or Derivative Works thereof, that is
      intentionally submitted to Licensor for inclusion in the Work
      by the copyright owner or by an individual or Legal Entity
      authorized to submit on behalf of the copyright owner. For the
      purposes of this definition,
      "submitted" means any form of electronic, verbal, or written
      communication sent to the Licensor or its representatives,
      including but not limited to communication on electronic mailing
      lists, source code control systems, and issue tracking systems
      that are managed by, or on behalf of, the Licensor for the
      purpose of discussing and improving the Work, but excluding
      communication that is conspicuously marked or otherwise
      designated in writing by the copyright owner as "Not a
      Contribution."

      "Contributor" shall mean Licensor and any individual or Legal
      Entity on behalf of whom a Contribution has been received by
      Licensor and subsequently incorporated within the Work.

   2. Grant of Copyright License. Subject to the terms and conditions
      of this License, each Contributor hereby grants to You a
      perpetual, worldwide, non-exclusive, no-charge, royalty-free,
      irrevocable copyright license to reproduce, prepare Derivative
      Works of, publicly display, publicly perform, sublicense, and
      distribute the Work and such Derivative Works in Source or
      Object form.

   3. Grant of Patent License. Subject to the terms and conditions of
      this License, each Contributor hereby grants to You a perpetual,
      worldwide, non-exclusive, no-charge, royalty-free, irrevocable
      (except as stated in this section) patent license to make, have
      made, use, offer to sell, sell, import, and otherwise transfer
      the Work, where such license applies only to those patent claims
      licensable by such Contributor that are necessarily infringed by
      their Contribution(s) alone or by combination of their
      Contribution(s) with the Work to which such Contribution(s) was
      submitted. If You institute patent litigation against any entity
      (including a cross-claim or counterclaim in a lawsuit) alleging
      that the Work or a Contribution incorporated within the Work
      constitutes direct or contributory patent infringement, then any
      patent licenses granted to You under this License for that Work
      shall terminate as of the date such litigation is filed.

   4. Redistribution. You may reproduce and distribute copies of the
      Work or Derivative Works thereof in any medium, with or without
      modifications, and in Source or Object form, provided that You
      meet the following conditions:

      (a) You must give any other recipients of the Work or
          Derivative Works a copy of this License; and

      (b) You must cause any modified files to carry prominent notices
          stating that You changed the files; and

      (c) You must retain, in the Source form of any Derivative Works
          that You distribute, all copyright, patent, trademark, and
          attribution notices from the Source form of the Work,
          excluding those notices that do not pertain to any part of
          the Derivative Works; and

      (d) If the Work includes a "NOTICE" text file as part of its
          distribution, then any Derivative Works that You distribute
          must include a readable copy of the attribution notices
          contained within such NOTICE file, excluding those notices
          that do not pertain to any part of the Derivative Works, in
          at least one of the following places: within a NOTICE text
          file distributed as part of the Derivative Works; within the
          Source form or documentation, if provided along with the
          Derivative Works; or, within a display generated by the
          Derivative Works, if and wherever such third-party notices
          normally appear. The contents of the NOTICE file are for
          informational purposes only and do not modify the License.
          You may add Your own attribution notices within Derivative
          Works that You distribute, alongside or as an addendum to
          the NOTICE text from the Work, provided that such additional
          attribution notices cannot be construed as modifying the
          License.

      You may add Your own copyright statement to Your modifications
      and may provide additional or different license terms and
      conditions for use, reproduction, or distribution of Your
      modifications, or for any such Derivative Works as a whole,
      provided Your use, reproduction, and distribution of the Work
      otherwise complies with the conditions stated in this License.

   5. Submission of Contributions. Unless You explicitly state
      otherwise, any Contribution intentionally submitted for
      inclusion in the Work by You to the Licensor shall be under the
      terms and conditions of this License, without any additional
      terms or conditions.  Notwithstanding the above, nothing herein
      shall supersede or modify the terms of any separate license
      agreement you may have executed with Licensor regarding such
      Contributions.

   6. Trademarks. This License does not grant permission to use the
      trade names, trademarks, service marks, or product names of the
      Licensor, except as required for reasonable and customary use
      in describing the origin of the Work and reproducing the content
      of the NOTICE file.

   7. Disclaimer of Warranty. Unless required by applicable law or
      agreed to in writing, Licensor provides the Work (and each
      Contributor provides its Contributions) on an "AS IS" BASIS,
      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
      implied, including, without limitation, any warranties or
      conditions of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or
      FITNESS FOR A PARTICULAR PURPOSE. You are solely responsible for
      determining the appropriateness of using or redistributing the
      Work and assume any risks associated with Your exercise of
      permissions under this License.

   8. Limitation of Liability. In no event and under no legal theory,
      whether in tort (including negligence), contract, or otherwise,
      unless required by applicable law (such as deliberate and
      grossly negligent acts) or agreed to in writing, shall any
      Contributor be liable to You for damages, including any direct,
      indirect, special, incidental, or consequential damages of any
      character arising as a result of this License or out of the use
      or inability to use the Work (including but not limited to
      damages for loss of goodwill, work stoppage, computer failure or
      malfunction, or any and all other commercial damages or losses),
      even if such Contributor has been advised of the possibility of
      such damages.

   9. Accepting Warranty or Additional Liability. While redistributing
      the Work or Derivative Works thereof, You may choose to offer,
      and charge a fee for, acceptance of support, warranty, indemnity,
      or other liability obligations and/or rights consistent with this
      License. However, in accepting such obligations, You may act only
      on Your own behalf and on Your sole responsibility, not on behalf
      of any other Contributor, and only if You agree to indemnify,
      defend, and hold each Contributor harmless for any liability
      incurred by, or claims asserted against, such Contributor by
      reason of your accepting any such warranty or additional
      liability.

   END OF TERMS AND CONDITIONS

   APPENDIX: How to apply the Apache License to your work.

      To apply the Apache License to your work, attach the following
      boilerplate notice, with the fields enclosed by brackets "[]"
      replaced with your own identifying information. (Don't include
      the brackets!)  The text should be enclosed in the appropriate
      comment syntax for the file format. We also recommend that a
      file or class name and description of purpose be included on the
      same "printed page" as the copyright notice for easier
      identification within third-party archives.

   Copyright [yyyy] [name of copyright owner]

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
   implied.  See the License for the specific language governing
   permissions and limitations under the License.
</div></pre></div></div></div><div><a name="N100C5"></a><div style="margin-top: 0pc; margin-bottom: 1.4pc; font-size: 16pt; font-weight: bold; padding-top: 1.4pc;"><div style="border-right-width: 0pt; border-left-width: 0pt; line-height: 100%; border-top-width: 3pt; border-top-color: black;"><a name="cadminpreface30074"></a><div></div>Sobre este guia</div></div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Esta se&ccedil;&atilde;o descreve a quem este guia se destina, assim como a forma de us&aacute;-lo.</div></div><div><a name="N10116"></a><div style="padding-top: 1pc; margin-bottom: 5pt; font-size: 14pt; font-weight: bold;"><div style="border-right-width: 0pt; border-left-width: 0pt; border-top-width: 1pt; border-top-color: black;"><a name="cadminpreface11181"></a><div></div>Finalidade deste guia</div></div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Este guia explica como utilizar o
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
em um ambiente com v&aacute;rios clientes.
Tamb&eacute;m fornece informa&ccedil;&otilde;es que o administrador do servidor pode necessitar para
manter o
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
funcionando com alto n&iacute;vel de desempenho e confiabilidade em uma estrutura
servidora, ou em um ambiente servidor de aplicativos com v&aacute;rios clientes
(Quando est&atilde;o executando no modo incorporado, os bancos de dados do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
normalmente n&atilde;o necessitam de qualquer administra&ccedil;&atilde;o).</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Para conectar v&aacute;rios clientes ao
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>, o
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
pode ser incorporado &agrave; estrutura servidora escolhida,
ou pode ser utilizado o <span style="font-style: italic;">Network Server</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>.
Este guia descreve estas op&ccedil;&otilde;es.</div></div></div><div><a name="N10191"></a><div style="padding-top: 1pc; margin-bottom: 5pt; font-size: 14pt; font-weight: bold;"><div style="border-right-width: 0pt; border-left-width: 0pt; border-top-width: 1pt; border-top-color: black;"><a name="cadminpreface22460"></a><div></div>Audi&ecirc;ncia</div></div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">A primeira parte deste guia destina-se aos desenvolvedores de aplicativos
cliente/servidor e de v&aacute;rios clientes.
A segunda parte deste guia destina-se aos administradores.</div></div></div><div><a name="N101DD"></a><div style="padding-top: 1pc; margin-bottom: 5pt; font-size: 14pt; font-weight: bold;"><div style="border-right-width: 0pt; border-left-width: 0pt; border-top-width: 1pt; border-top-color: black;"><a name="cadminpreface23947"></a><div></div>Como este guia est&aacute; organizado</div></div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Este guia inclui as seguintes partes:</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Parte 1: Guia do Servidor <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span></div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="font-style: italic;"><span style="color: blue;"><a href="#cadminov11108">O Derby em um ambiente multiusu&aacute;rio</a></span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Descreve as diferentes op&ccedil;&otilde;es para incorporar o
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
a uma estrutura servidora, e explica a op&ccedil;&atilde;o <span style="font-style: italic;">Network Server</span>.</div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="font-style: italic;"><span style="color: blue;"><a href="#cadminapps59125">Utiliza&ccedil;&atilde;o do Network Server com aplicativos Derby pr&eacute;-existentes</a></span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Descreve como alterar os aplicativos
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
existentes para trabalhar com o <span style="font-style: italic;">Network Server</span>.</div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="font-style: italic;"><span style="color: blue;"><a href="#cadminconfig86869">Gerenciamento do Network Server do Derby</a></span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Descreve como utilizar scripts do interpretador de comandos (<span style="font-style: italic;">shell</span>),
a linha de comando, e a API do <span style="font-style: italic;">Network Server</span>, para gerenciar o
<span style="font-style: italic;">Network Server</span>.</div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="font-style: italic;"><span style="color: blue;"><a href="#cadminservlet98430">Gerenciamento remoto do Network Server do Derby utilizando a interface servlet</a></span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Descreve como utilizar a interface <span style="font-style: italic;">servlet</span> para gerenciar o
<span style="font-style: italic;">Network Server</span>.</div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="font-style: italic;"><span style="color: blue;"><a href="#cadminadvtops">T&oacute;picos avan&ccedil;ados do Network Server do Derby</a></span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Descreve t&oacute;picos avan&ccedil;ados para os usu&aacute;rios do <span style="font-style: italic;">Network Server</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>.</div></div></td></tr></table></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Parte 2: Guia de administra&ccedil;&atilde;o do <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span></div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="font-style: italic;"><span style="color: blue;"><a href="#cadminconsist01">Verifica&ccedil;&atilde;o da consist&ecirc;ncia do banco de dados</a></span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Descreve como verificar a consist&ecirc;ncia dos bancos de dados do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>.</div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="font-style: italic;"><span style="color: blue;"><a href="#cadminhubbkup98797">C&oacute;pia de seguran&ccedil;a e restaura&ccedil;&atilde;o do banco de dados</a></span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Descreve como fazer c&oacute;pias de seguran&ccedil;a dos bancos de dados enquanto estes
est&atilde;o em linha.</div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="font-style: italic;"><span style="color: blue;"><a href="#cadminlog98">Arquivo de log em uma unidade separada</a></span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Descreve como colocar o <span style="font-style: italic;">log</span> do banco de dados em uma unidade separada,
o que pode melhorar o desempenho de bancos de dados grandes.</div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="font-style: italic;"><span style="color: blue;"><a href="#cadminlockvti42553">Obten&ccedil;&atilde;o de informa&ccedil;&otilde;es sobre bloqueios</a></span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Descreve como obter informa&ccedil;&otilde;es detalhadas sobre status de bloqueios.</div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="font-style: italic;"><span style="color: blue;"><a href="#cadminspace21579">Recupera&ccedil;&atilde;o do espa&ccedil;o n&atilde;o utilizado</a></span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Descreve como identificar e recuperar o espa&ccedil;o n&atilde;o utilizado nas tabelas e
seus &iacute;ndices relacionados.</div></div></td></tr></table></div></div></div></div><div><a name="N1035B"></a><div style="margin-top: 0pc; margin-bottom: 1.4pc; font-size: 16pt; font-weight: bold; padding-top: 1.4pc;"><div style="border-right-width: 0pt; border-left-width: 0pt; line-height: 100%; border-top-width: 3pt; border-top-color: black;"><a name="cadminpartone"></a><div></div>Parte 1: Guia do servidor Derby</div></div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Esta parte do guia explica o <span style="font-style: italic;">Network Server</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>,
e outras estruturas servidoras.
</div></div><div><a name="N103E0"></a><div style="padding-top: 1pc; margin-bottom: 5pt; font-size: 14pt; font-weight: bold;"><div style="border-right-width: 0pt; border-left-width: 0pt; border-top-width: 1pt; border-top-color: black;"><a name="cadminov11108"></a><div></div>O Derby em um ambiente multiusu&aacute;rio</div></div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Esta se&ccedil;&atilde;o descreve o
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
em um ambiente multiusu&aacute;rio (ou "servidor")</div></div><div><a name="N1047B"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="cadminov17524"></a><div></div>O Derby em uma estrutura servidora</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Em certo sentido, o
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
est&aacute; sempre incorporado a algum produto.
Pode estar incorporado a aplicativos onde os usu&aacute;rios acessam o banco de dados
a partir de uma &uacute;nica JVM, ou pode estar incorporado a uma estrutura servidora
(um aplicativo que permite usu&aacute;rios em JVMs diferentes se conectarem ao
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span> simultaneamente).
Quando o <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span> est&aacute;
incorporado a um aplicativo, o <span style="font-style: italic;">driver</span> de JDBC local chama o banco de
dados <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span> local.
Quando o <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span> est&aacute;
incorporado a uma estrutura servidora, o software de conectividade da
estrutura servidora fornece dados para v&aacute;rios aplicativos JDBC cliente
atrav&eacute;s da rede ou da Internet.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Para a conectividade multiusu&aacute;ria local ou remota (v&aacute;rios usu&aacute;rios acessando
o <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span> a partir de JVMs
diferentes), &eacute; utilizado o <span style="font-style: italic;">Network Server</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>.
Havendo necessidade de funcionalidades n&atilde;o inclu&iacute;das no <span style="font-style: italic;">Network Server</span>,
o produto
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
b&aacute;sico poder&aacute; ser incorporado a outra estrutura servidora.</div></div><div><a name="N10559"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="cadminov825125"></a><div></div>Configura&ccedil;&otilde;es de conectividade</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Existem diversas maneiras de incorporar o
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
a uma estrutura servidora:</div><div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;">Utilizando o <span style="font-style: italic;">Network Server</span></div><div style="margin-left: 72pt + 16pt;">Esta &eacute; a forma mais f&aacute;cil de fornecer conectividade a v&aacute;rios usu&aacute;rios
acessando os bancos de dados do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
a partir de JVMs diferentes.
O <span style="font-style: italic;">Network Server</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
fornece este tipo de conectividade para os bancos de dados do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
dentro de um &uacute;nico sistema, ou atrav&eacute;s da rede.</div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">Adquirir outra estrutura servidora</span></div><div style="margin-left: 72pt + 16pt;">O <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
pode ser utilizado dentro de v&aacute;rias estruturas servidoras,
como o <span style="font-style: italic;">IBM WebSphere Application Server</span>.</div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">Desenvolver sua pr&oacute;pria estrutura</span></div><div style="margin-left: 72pt + 16pt;">A flexibilidade do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
permite outras configura&ccedil;&otilde;es tamb&eacute;m.
Por exemplo, em vez de incorporar o
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
a um servidor que se comunica com cliente que utiliza o JDBC,
o <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
pode ser incorporado a uma <span style="font-style: italic;">servlet</span> em servidor Web que se comunica com o
navegador utilizando HTTP.</div></div></div></div></div><div><a name="N10644"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="cadminov33597"></a><div></div>Funcionalidades dispon&iacute;veis no Derby para atender v&aacute;rios clientes</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span> cont&eacute;m algumas
funcionalidades &uacute;teis para desenvolver aplicativos multiusu&aacute;rios.</div></div><div><a name="N106FD"></a><div style="font-size: 11pt; font-weight: bold; margin-left: 72pt;"><a name="cadminov28261"></a><div></div>Bloqueio no n&iacute;vel de linha: </div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Para dar suporte a acesso multiusu&aacute;rio, o
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
utiliza bloqueio no n&iacute;vel de linha.
Entretanto, o
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
pode ser configurado para utilizar bloqueio no n&iacute;vel de tabela em ambientes
com poucas transa&ccedil;&otilde;es simult&acirc;neas (por exemplo, banco de dados apenas para
leitura).
O bloqueio no n&iacute;vel de tabela &eacute; prefer&iacute;vel quando existem poucas ou nenhuma
escrita no servidor, enquanto o bloqueio no n&iacute;vel de linha &eacute; essencial para
obter bom desempenho quando v&aacute;rios clientes escrevem no servidor
simultaneamente.
O otimizador do <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
ajusta a escolha automaticamente para os comandos.</div></div></div><div><a name="N1078F"></a><div style="font-size: 11pt; font-weight: bold; margin-left: 72pt;"><a name="cadminov16172"></a><div></div>V&aacute;rios n&iacute;veis de simultaneidade: </div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span> d&aacute; suporte
aos n&iacute;veis de isolamento SERIALIZABLE (RR), REPEATABLE (RS),
READ COMMITTED (CS) e READ UNCOMMITTED (UR).</div><div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">CS</span></div><div style="margin-left: 72pt + 16pt;">CS (o n&iacute;vel de isolamento padr&atilde;o) fornece o melhor equil&iacute;brio entre
simultaneidade e consist&ecirc;ncia em ambientes com v&aacute;rios clientes.</div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">RS</span></div><div style="margin-left: 72pt + 16pt;">RS fornece menor consist&ecirc;ncia que RR, mas permite maior simultaneidade.</div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">RR</span></div><div style="margin-left: 72pt + 16pt;">RR fornece a maior consist&ecirc;ncia.</div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">UR</span></div><div style="margin-left: 72pt + 16pt;">UR fornece a m&aacute;xima simultaneidade, quando s&atilde;o permitidos valores n&atilde;o
efetivados nos comandos. Normalmente &eacute; utilizado quando se aceita resultados
aproximados.</div></div></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Para obter mais informa&ccedil;&otilde;es deve ser consultado
"Tipos e finalidades dos bloqueios nos sistemas
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>"
no <span style="font-style: italic;"><span style="border-right-width: 0pt; border-left-width: 0pt;"><span style="font-style: italic;">Guia do Desenvolvedor do Derby</span></span></span>.</div></div></div><div><a name="N10852"></a><div style="font-size: 11pt; font-weight: bold; margin-left: 72pt;"><a name="cadminov65220"></a><div></div>V&aacute;rias conex&otilde;es e v&aacute;rios fluxos de execu&ccedil;&atilde;o: </div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span> permite v&aacute;rias
conex&otilde;es simult&acirc;neas com o banco de dados, mesmo no modo incorporado.
O <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span> tamb&eacute;m &eacute;
inteiramente <span style="font-style: italic;">multi-thread</span>, podendo haver v&aacute;rios fluxos de execu&ccedil;&atilde;o
ativos ao mesmo tempo.
Entretanto, a sem&acirc;ntica do JDBC imp&otilde;e algumas limita&ccedil;&otilde;es ao <span style="font-style: italic;">multi-thread</span>.
Para obter mais informa&ccedil;&otilde;es deve ser consultado o
<span style="font-style: italic;"><span style="border-right-width: 0pt; border-left-width: 0pt;"><span style="font-style: italic;">Guia do Desenvolvedor do Derby</span></span></span>.</div></div></div><div><a name="N108EF"></a><div style="font-size: 11pt; font-weight: bold; margin-left: 72pt;"><a name="cadminov83312"></a><div></div>Ferramentas administrativas: </div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
fornece algumas ferramentas e funcionalidades para auxiliar os administradores
de bancos de dados, incluindo:</div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Verificador de consist&ecirc;ncia</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>C&oacute;pia de seguran&ccedil;a em linha</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>A capacidade de colocar o <span style="font-style: italic;">log</span> do banco de dados em uma unidade separada</div></td></tr></table></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Estas ferramentas e funcionalidades s&atilde;o discutidas na segunda parte deste guia.
Para obter mais informa&ccedil;&otilde;es devem ser vistas as se&ccedil;&otilde;es desta parte.</div></div></div></div><div><a name="N1096D"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="cadminov825266"></a><div></div>O Network Server do Derby</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O <span style="font-style: italic;">Network Server</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
fornece conectividade multiusu&aacute;rio para os bancos de dados do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>,
dentro do mesmo sistema ou atrav&eacute;s da rede.
O <span style="font-style: italic;">Network Server</span> utiliza o protocolo padr&atilde;o
Arquitetura de Banco de Dados Relacional Distribu&iacute;do
(Distributed Relational Database Architecture/DRDA),
para receber e responder os comandos dos clientes.
Os bancos de dados s&atilde;o acessados atrav&eacute;s do <span style="font-style: italic;">Network Server</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
utilizando o <span style="font-style: italic;">driver</span> cliente da rede do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O <span style="font-style: italic;">Network Server</span> &eacute; uma solu&ccedil;&atilde;o para v&aacute;rias JVMs fazendo conex&atilde;o com o
banco de dados, diferentemente do cen&aacute;rio incorporado, onde somente uma JVM
executa como parte do sistema.
Quando o <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
est&aacute; incorporado a um aplicativo de JVM-&uacute;nica, o <span style="font-style: italic;">driver</span> de JDBC
incorporado chama o banco de dados
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span> local.
Quando o <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
est&aacute; incorporado a uma estrutura servidora, o software de conectividade da
estrutura servidora fornece dados para v&aacute;rios aplicativos JDBC clientes,
atrav&eacute;s da rede ou da Internet.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">Para executar o <span style="font-style: italic;">Network Server</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>,
&eacute; necess&aacute;rio instalar os seguintes arquivos:
<div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>No lado servidor, instalar <span style="font-family: Courier;">derby.jar</span> e <span style="font-family: Courier;">derbynet.jar</span>.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>No lado cliente, instalar <span style="font-family: Courier;">derbyclient.jar</span>.</div></td></tr></table></div></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Existem v&aacute;rias maneiras de gerenciar o <span style="font-style: italic;">Network Server</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>, incluindo:</div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Atrav&eacute;s da linha de comando</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Utilizando os scripts .bat e .ksh</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Atrav&eacute;s da interface <span style="font-style: italic;">servlet</span></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Com seu pr&oacute;prio programa Java (escrito utilizando a API do <span style="font-style: italic;">Network Server</span>)</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Definindo as propriedades do <span style="font-style: italic;">Network Server</span></div></td></tr></table></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><span style="color: blue;"><a href="#cadminapps59125">Utiliza&ccedil;&atilde;o do Network Server com aplicativos Derby pr&eacute;-existentes</a></span>
explica como alterar os aplicativos Java existentes, que atualmente executam
utilizando o
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
no modo incorporado, para utilizar o <span style="font-style: italic;">Network Server</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><span style="color: blue;"><a href="#cadminconfig86869">Gerenciamento do Network Server do Derby</a></span>
explica como gerenciar o <span style="font-style: italic;">Network Server</span> utilizando a linha de comando,
inclusive para inicializar e parar.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><span style="color: blue;"><a href="#cadminservlet98430">Gerenciamento remoto do Network Server do Derby utilizando a interface servlet</a></span>
explica como utilizar a interface <span style="font-style: italic;">servlet</span> para gerenciar o
<span style="font-style: italic;">Network Server</span>.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><span style="color: blue;"><a href="#cadminadvtops">T&oacute;picos avan&ccedil;ados do Network Server do Derby</a></span>
cont&eacute;m t&oacute;picos avan&ccedil;ados para os usu&aacute;rios do <span style="font-style: italic;">Network Server</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Devido &agrave;s diferen&ccedil;as entre os <span style="font-style: italic;">drivers</span> de JDBC utilizados,
podem ser encontradas diferen&ccedil;as de funcionalidades ao executar o
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
na estrutura de <span style="font-style: italic;">Network Server</span>, se comparado com sua execu&ccedil;&atilde;o
incorporado a um aplicativo usu&aacute;rio.
Para obter uma lista completa das diferen&ccedil;as entre as configura&ccedil;&otilde;es
<span style="font-style: italic;">Network Server</span> e incorporado, deve ser consultado
<span style="color: blue;"><a href="#cadminapps59125">Utiliza&ccedil;&atilde;o do Network Server com aplicativos Derby pr&eacute;-existentes</a></span>.</div></div></div><div><a name="N10B2A"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="cadminov825149"></a><div></div>Servidores incorporados</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Como o <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
&eacute; escrito em Java, existe grande flexibilidade na escolha da configura&ccedil;&atilde;o
da implementa&ccedil;&atilde;o.
Por exemplo, pode ser executado o
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>,
a estrutura servidora JDBC, e outro aplicativo, na mesma JVM como um &uacute;nico
processo.</div></div></div><div><a name="N10BAC"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="cadminembeddedserver"></a><div></div>Como inicializar o servidor incorporado a partir de um aplicativo</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Em uma <span style="font-style: italic;">thread</span>, o aplicativo que faz a incorpora&ccedil;&atilde;o inicializa o
<span style="font-style: italic;">driver</span> de JDBC local para seu pr&oacute;prio acesso.</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">/* a carga do driver cliente inicializa apenas o driver cliente */
Class.forName("org.apache.derby.jdbc.EmbeddedDriver").newInstance();
Connection conn = DriverManager.getConnection(
    "jdbc:derby:amostra");

</div></pre><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Em outra <span style="font-style: italic;">thread</span>, o mesmo aplicativo inicializa a estrutura servidora
para permitir o acesso remoto.
A inicializa&ccedil;&atilde;o da estrutura servidora de dentro do aplicativo permite que
o servidor e o aplicativo executem na mesma JVM.</div></div></div><div><a name="N10C3F"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="radminembeddedserverex"></a><div></div>Exemplo de servidor incorporado</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N10C59"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O <span style="font-style: italic;">Network Server</span> pode ser inicializado automaticamente em outra
<span style="font-style: italic;">thread</span> quando o
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
&eacute; inicializado, definindo a propriedade <span style="font-style: italic;">derby.drda.startNetworkServer</span>
(consulte <span style="color: blue;"><a href="#tadminconfigsettingnetwrokserverproperties">Defini&ccedil;&atilde;o das propriedades do Network Server</a></span>),
ou pode ser inicializado utilizando um programa.
O exemplo a seguir mostra como inicializar o <span style="font-style: italic;">Network Server</span> utilizando um
programa:</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N10C88"></a><span></span><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">import org.apache.derby.drda.NetworkServerControl;
import java.net.InetAddress;
NetworkServerControl servidor = new NetworkServerControl
        (InetAddress.getByName("localhost"),1527);
servidor.start(null);</div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N10C92"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O programa que inicializa o <span style="font-style: italic;">Network Server</span> pode acessar o banco de
dados usando tanto o <span style="font-style: italic;">driver</span> incorporado quanto o <span style="font-style: italic;">driver</span> cliente
da rede.
A tentativa da estrutura servidora de inicializar o <span style="font-style: italic;">driver</span> de JDBC local
&eacute; ignorada, porque o mesmo j&aacute; foi inicializado dentro da JVM do aplicativo.
A estrutura servidora simplesmente acessa a inst&acirc;ncia do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
que j&aacute; est&aacute; inicializada.
N&atilde;o h&aacute; conflito entre o aplicativo e a estrutura servidora.</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N10CB9"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O cliente remoto pode ent&atilde;o conectar atrav&eacute;s do <span style="font-style: italic;">driver</span> cliente do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>:</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N10CCE"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">String nsURL="jdbc:derby://localhost:1527/amostra";
java.util.Properties props = new java.util.Properties();
props.put("user","usr");
props.put("password","pwd");

Class.forName("org.apache.derby.jdbc.ClientDriver").newInstance();
Connection conn = DriverManager.getConnection(nsURL, props);

/*interagir com o <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>*/
Statement s = conn.createStatement();

ResultSet rs = s.executeQuery(
"SELECT * FROM RESERVAS_HOTEL");</div></pre></div></div></div></div></div><div><a name="N10D46"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="cadminov38650"></a><div></div>Sobre este guia e a documenta&ccedil;&atilde;o do Network Server</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Este guia assume que o leitor est&aacute; familiarizado com as funcionalidades e
ajustes do <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>.
Antes de ler este guia, primeiro deve-se aprender as funcionalidades b&aacute;sicas do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span> lendo o
<span style="font-style: italic;"><span style="border-right-width: 0pt; border-left-width: 0pt;"><span style="font-style: italic;">Guia do Desenvolvedor do Derby</span></span></span>.
Tamb&eacute;m, uma vez que normalmente os ambientes multiusu&aacute;rio envolvem quest&otilde;es de
desempenho e ajuste, deve ser lido o guia
<span style="font-style: italic;"><span style="border-right-width: 0pt; border-left-width: 0pt;"><span style="font-style: italic;">Ajuste do Derby</span></span></span>.</div></div></div></div><div><a name="N10DAE"></a><div style="padding-top: 1pc; margin-bottom: 5pt; font-size: 14pt; font-weight: bold;"><div style="border-right-width: 0pt; border-left-width: 0pt; border-top-width: 1pt; border-top-color: black;"><a name="cadminapps59125"></a><div></div>Utiliza&ccedil;&atilde;o do Network Server com aplicativos Derby pr&eacute;-existentes</div></div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Os aplicativos Java, que atualmente executam usando o
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span> no modo incorporado,
precisam ser modificados para trabalhar com o <span style="font-style: italic;">Network Server</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>.
Os t&oacute;picos desta se&ccedil;&atilde;o discutem estas modifica&ccedil;&otilde;es.</div></div><div><a name="N10ED1"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="cadminappsthenetworkserverandjvms"></a><div></div>O Network Server e as JVMs</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O <span style="font-style: italic;">Network Server</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
&eacute; compat&iacute;vel com a
<span style="border-right-width: 0pt; border-left-width: 0pt;"><span style="border-right-width: 0pt; border-left-width: 0pt;">Java<span style="font-size: 75%;">(TM)</span></span> 2 Platform, Standard Edition, v 1.3.1
(J2SE)</span>, ou mais recente.</div></div></div><div><a name="N10FA6"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="tadminappschangingyourclasspath"></a><div></div>Instala&ccedil;&atilde;o dos arquivos jar requeridos e adi&ccedil;&otilde;es ao caminho de classes</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N10FCA"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Para utilizar o <span style="font-style: italic;">Network Server</span> e o <span style="font-style: italic;">driver</span> cliente da rede,
devem ser adicionados os seguintes arquivos <span style="font-style: italic;">jar</span> ao caminho de classes do
servidor:</div></div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">derbynet.jar</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Este arquivo <span style="font-style: italic;">jar</span> cont&eacute;m o c&oacute;digo do <span style="font-style: italic;">Network Server</span>.
&Eacute; necess&aacute;rio apenas para o processo que inicializa o <span style="font-style: italic;">Network Server</span>,
em adi&ccedil;&atilde;o aos arquivos <span style="font-style: italic;">.jar</span> padr&atilde;o do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>.</div></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">derby.jar</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Este arquivo dever&aacute; estar no caminho de classes, para que se possa utilizar
qualquer fun&ccedil;&atilde;o do <span style="font-style: italic;">Network Server</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>.</div></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">derbyclient.jar</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Este arquivo <span style="font-style: italic;">jar</span> dever&aacute; estar no caminho de classes, para que se possa
utilizar o <span style="font-style: italic;">driver</span> cliente da rede.
Este arquivo <span style="font-style: italic;">jar</span> &eacute; necess&aacute;rio para a comunica&ccedil;&atilde;o pelo lado cliente com o
<span style="font-style: italic;">Network Server</span> utilizando o <span style="font-style: italic;">driver</span> cliente da rede do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>.
&Eacute; necess&aacute;rio estar no caminho de classes do lado cliente para que se possa
utilizar o <span style="font-style: italic;">driver</span> cliente da rede para acessar o
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>.</div></div></div></td></tr></table></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N11079"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span> fornece
arquivos de script para definir o caminho de classes para trabalhar com o
<span style="font-style: italic;">Network Server</span>.
Os scripts est&atilde;o localizados no diret&oacute;rio
$<span style="border-right-width: 0pt; border-left-width: 0pt;">DERBY_HOME</span>\frameworks\NetworkServer\bin.</div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>setNetworkClientCP.bat (Windows)</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>setNetworkClientCP.ksh (UNIX)</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>setNetworkServerCP.bat (Windows)</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>setNetworkServerCP.ksh (UNIX)</div></td></tr></table></div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N110AC"></a><span></span>Para obter informa&ccedil;&otilde;es sobre como definir o caminho de classes deve ser
consultado
<span style="color: blue;"><a href="#cadminconfig86869">Gerenciamento do Network Server do Derby</a></span>
e
<span style="font-style: italic;"><span style="border-right-width: 0pt; border-left-width: 0pt;"><span style="font-style: italic;">Introdu&ccedil;&atilde;o ao Derby</span></span></span>.</div></div></div><div><a name="N11170"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="tadmincbdjhhfd"></a><div></div>Inicializa&ccedil;&atilde;o do Network Server</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N11199"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Deve ser observado que o <span style="font-style: italic;">Network Server</span> deve ser sempre parado de
forma adequada ap&oacute;s ser utilizado, porque n&atilde;o proceder desta maneira poder&aacute;
ocasionar efeitos colaterais imprevis&iacute;veis, como portas bloqueadas no servidor.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Deve ser utilizado o script <span style="font-style: italic;">startNetworkServer.bat</span> para inicializar o
<span style="font-style: italic;">Network Server</span> nas m&aacute;quinas com Windows, e o script
<span style="font-style: italic;">startNetworkServer.ksh</span> para inicializar o <span style="font-style: italic;">Network Server</span> nos
sistemas UNIX.
Estes scripts est&atilde;o localizados no diret&oacute;rio
$<span style="border-right-width: 0pt; border-left-width: 0pt;">DERBY_HOME</span>/frameworks/NetworkServer/bin,
onde $<span style="border-right-width: 0pt; border-left-width: 0pt;">DERBY_HOME</span>
&eacute; o diret&oacute;rio onde o
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
foi instalado.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Os comandos de <span style="font-style: italic;">NetworkServerControl</span> somente podem ser executados a
partir do hospedeiro que inicializou o <span style="font-style: italic;">Network Server</span>.</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N111E8"></a><span></span>Para inicializar o <span style="font-style: italic;">Network Server</span>, dever&aacute; ser executado o script
apropriado a partir da linha de comando.
Por exemplo, no sistema Windows, se o
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
foi instalado no diret&oacute;rio padr&atilde;o na unidade C, e o caminho de classes
foi definido corretamente, dever&aacute; ser digitado o seguinte comando:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">$<span style="border-right-width: 0pt; border-left-width: 0pt;">DERBY_HOME</span>\frameworks\NetworkServer\bin\startNetworkserver.bat</div></pre>
O diret&oacute;rio de sistema padr&atilde;o &eacute; o diret&oacute;rio onde o
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
foi inicializado (Para obter mais informa&ccedil;&otilde;es sobre o diret&oacute;rio de sistema
padr&atilde;o, deve ser consultado o
<span style="font-style: italic;"><span style="border-right-width: 0pt; border-left-width: 0pt;"><span style="font-style: italic;">Guia do Desenvolvedor do Derby</span></span></span>).
<div><span style="font-weight: bold; border-right-width: 0pt; border-left-width: 0pt;">Dica: </span>  Pode ser definido
$<span style="border-right-width: 0pt; border-left-width: 0pt;">DERBY_HOME</span>\frameworks\NetworkServer\bin
no caminho (PATH) para encurtar o comando.</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N11227"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Por padr&atilde;o, o <span style="font-style: italic;">Network Server</span> escuta as requisi&ccedil;&otilde;es somente no
endere&ccedil;o de retorno (<span style="font-style: italic;">loopback</span>), significando que somente aceita
conex&otilde;es do hospedeiro local.</div></div></div><div><a name="N11321"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="tadminconfigalteringthestartnetworkserverscr"></a><div></div>Altera&ccedil;&atilde;o do script startNetworkServer</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N1132A"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O script <span style="font-style: italic;">startNetworkServer</span> pode ser modificado de uma das
seguintes maneiras:</div></div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Especificando um n&uacute;mero de porta diferente do padr&atilde;o (1527),
utilizando a op&ccedil;&atilde;o <span style="font-family: Courier;">-p &lt;<span style="font-style: italic;">n&uacute;mero-da-porta</span>&gt;</span>,
conforme mostrado no exemplo a seguir:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">java org.apache.derby.drda.NetworkServerControl start -p 1368</div></pre>
onde 1368 &eacute; o novo n&uacute;mero da porta.
</div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Especificando uma determinada interface (nome de hospedeiro ou endere&ccedil;o de
IP) para escutar em outra interface que n&atilde;o a padr&atilde;o (<span style="font-family: Courier;">localhost</span>),
utilizando a op&ccedil;&atilde;o <span style="font-family: Courier;">-h</span>, conforme mostrado no exemplo a seguir:
</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><div><span style="font-weight: bold; border-right-width: 0pt; border-left-width: 0pt;">Lembre-se: </span>  Antes de utilizar esta op&ccedil;&atilde;o deve-se executar sob o
gerenciador de seguran&ccedil;a do Java e habilitar a autentica&ccedil;&atilde;o de usu&aacute;rio.</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">java org.apache.derby.drda.NetworkServerControl start -h <span style="font-style: italic;">meuhospedeiro</span> -p 1368</div></pre>
onde <span style="font-style: italic;">meuhospedeiro</span> &eacute; o nome do hospedeiro, ou o endere&ccedil;o de IP.
</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Em todas as interfaces, pode ser especificado um nome de hospedeiro,
o endere&ccedil;o de IP, ou 0.0.0.0 para escutar.</div></div></div></td></tr></table></div></div></div><div><a name="N113E0"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="tadminconfig814934"></a><div></div>Inicializa&ccedil;&atilde;o do Network Server sem usar o script</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N113FF"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Se n&atilde;o for desejado utilizar o script <span style="font-style: italic;">StartNetworkServer</span>,
o <span style="font-style: italic;">Network Server</span> poder&aacute; ser inicializado usando a linha de comando.
A sintaxe para o comando &eacute; semelhante a:</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">java org.apache.derby.drda.NetworkServerControl start
   [-h &lt;<span style="font-style: italic;">nome-do-hospedeiro</span>&gt;] [-p &lt;<span style="font-style: italic;">n&uacute;mero-da-porta</span>&gt;]</div></pre></div></div></div><div><a name="N1146E"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="tadminconfig814963"></a><div></div>Inicializa&ccedil;&atilde;o do Network Server a partir de um aplicativo Java</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N1148D"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Deve ser observado que o <span style="font-style: italic;">Network Server</span> deve ser sempre parado de
forma adequada ap&oacute;s ser utilizado, porque n&atilde;o proceder desta maneira poder&aacute;
ocasionar efeitos colaterais imprevis&iacute;veis, como portas bloqueadas no servidor.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Existem duas maneiras de inicializar o <span style="font-style: italic;">Network Server</span> a partir de um
aplicativo Java.</div></div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Pode ser inclu&iacute;da a seguinte linha no arquivo
<span style="font-family: Courier;">derby.properties</span>:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">derby.drda.startNetworkServer=true</div></pre>
Esta linha inicializa o servidor na porta padr&atilde;o, 1527, escutando em
<span style="font-family: Courier;">localhost</span> (todas as interfaces).
</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Para especificar uma porta diferente e uma determinada interface no
arquivo <span style="font-family: Courier;">derby.properties</span>, devem ser inclu&iacute;das as seguintes
linhas, respectivamente:</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">derby.drda.portNumber=1110
derby.drda.host=<span style="font-style: italic;">meuhospedeiro</span></div></pre></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">As propriedades <span style="font-family: Courier;">startNetworkServer</span> e
<span style="font-family: Courier;">portNumber</span> tamb&eacute;m podem ser especificadas utilizando o
comando Java:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">java -Dderby.drda.startNetworkServer=true
-Dderby.drda.portNumber=1110
-Dderby.drda.host=<span style="font-style: italic;">meuhospedeiro seuAplicativo</span></div></pre></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Pode ser utilizada a API do <span style="font-style: italic;">NetworkServerControl</span> para inicializar o
<span style="font-style: italic;">Network Server</span> a partir de uma <span style="font-style: italic;">thread</span> separada no aplicativo Java:
</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">NetworkServerControl servidor = new NetworkServerControl();
servidor.start (null);</div></pre></div></div></td></tr></table></div></div></div><div><a name="N1156F"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="tadminconfigipx"></a><div></div>Inicializa&ccedil;&atilde;o do Network Server em m&aacute;quinas Windows com pilha dupla IPv6/Ipv4</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N1158E"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">&Eacute; necess&aacute;rio adicionar as seguintes propriedades da JVM ao comando quando
o servidor &eacute; inicializado em m&aacute;quinas Windows com pilha dupla IPv6/Ipv4:</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">-Djava.net.preferIPv4Stack=false
-Djava.net.preferIPv6Addresses=true</div></pre></div></div></div></div><div><a name="N115E5"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="tadminconfigshuttingdownthenetworkserver"></a><div></div>Parar o Network Server</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; margin-left: 72pt;">Se a autentica&ccedil;&atilde;o de usu&aacute;rio estiver desabilitada,
o banco de dados <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
ir&aacute; parar normalmente quando o <span style="font-style: italic;">Network Server</span> for parado.
Se a autentica&ccedil;&atilde;o de usu&aacute;rio estiver habilitada, o banco de dados dever&aacute; ser
parado explicitamente <span style="font-style: italic;">antes</span> de parar o <span style="font-style: italic;">Network Server</span>,
especificando um nome e senha de usu&aacute;rio do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
v&aacute;lidos.</div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N11631"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O banco de dados pode ser parado diretamente, ou pelo servidor
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>.</div></div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Para parar o <span style="font-style: italic;">Network Server</span> utilizando os scripts fornecidos no
sistema Windows, &eacute; utilizado:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">stopNetworkServer.bat [-h <span style="font-style: italic;">&lt;nome-do-hospedeiro&gt;</span>] [-p <span style="font-style: italic;">&lt;n&uacute;mero-da-porta&gt;</span>] </div></pre></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Para parar o <span style="font-style: italic;">Network Server</span> utilizando os scripts fornecidos no
sistema UNIX, &eacute; utilizado:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">stopNetworkServer.ksh [-h <span style="font-style: italic;">&lt;nome-do-hospedeiro&gt;</span>] [-p <span style="font-style: italic;">&lt;n&uacute;mero-da-porta&gt;</span>] </div></pre></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Estes scripts est&atilde;o localizados no diret&oacute;rio
$<span style="border-right-width: 0pt; border-left-width: 0pt;">DERBY_HOME</span>/frameworks/NetworkServer/bin
.</div></div></td></tr></table></div></div><div><a name="N11763"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="tadminconfig815333"></a><div></div>Parar utilizando a linha de comando</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N11782"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O <span style="font-style: italic;">Network Server</span> pode ser parado atrav&eacute;s da linha de comando
utilizando o seguinte comando:</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">java org.apache.derby.drda.NetworkServerControl
        shutdown [-h <span style="font-style: italic;">&lt;nome-do-hospedeiro&gt;</span>][-p <span style="font-style: italic;">&lt;n&uacute;mero-da-porta&gt;</span>] </div></pre></div></div></div><div><a name="N117CE"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="tadminconfig815357"></a><div></div>Parar utilizando a API</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N117ED"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Pode ser utilizada a API do <span style="font-style: italic;">NetworkServerControl</span> para parar o
<span style="font-style: italic;">Network Server</span> a partir de um aplicativo Java.
Por exemplo:</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">shutdown();</div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N11808"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Por exemplo, o comando a seguir p&aacute;ra o <span style="font-style: italic;">Network Server</span> que est&aacute;
executando na m&aacute;quina corrente utilizando a porta 1527.</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">NetworkServerControl servidor = new NetworkServerControl();
servidor.shutdown();</div></pre></div></div></div></div><div><a name="N11848"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="tadminconfigsysteminformation"></a><div></div>Obten&ccedil;&atilde;o de informa&ccedil;&otilde;es do sistema</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N11851"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Podem ser obtidas informa&ccedil;&otilde;es sobre o <span style="font-style: italic;">Network Server</span>, como a vers&atilde;o
e valores das propriedades correntes, informa&ccedil;&otilde;es sobre o Java, e
informa&ccedil;&otilde;es sobre o servidor de banco de dados
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>,
usando o utilit&aacute;rio <span style="font-weight: bold;">sysinfo</span>.
O utilit&aacute;rio <span style="font-weight: bold;">sysinfo</span> est&aacute; dispon&iacute;vel a partir de scripts, da linha de
comando, da API do <span style="font-style: italic;">NetworkServerControl</span>, e atrav&eacute;s da interface
<span style="font-style: italic;">servlet</span>.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Os scripts que se seguem est&atilde;o localizados no diret&oacute;rio
$<span style="border-right-width: 0pt; border-left-width: 0pt;">DERBY_HOME</span>/frameworks/NetworkServer/bin.
Antes de executar estes scripts, &eacute; necess&aacute;rio ter certeza que o
<span style="font-style: italic;">Network Server</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
foi inicializado.</div></div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Deve ser executado o seguinte script <span style="font-weight: bold;">sysinfo</span> para obter informa&ccedil;&otilde;es
sobre o <span style="font-style: italic;">Network Server</span> nos sistemas Windows:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">sysinfo.bat [-h &lt;<span style="font-style: italic;">nome-do-hospedeiro</span>&gt;][-p &lt;<span style="font-style: italic;">n&uacute;mero-da-porta</span>&gt;] </div></pre></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Deve ser executado o seguinte script <span style="font-weight: bold;">sysinfo</span> para obter informa&ccedil;&otilde;es
sobre o <span style="font-style: italic;">Network Server</span> nos sistemas UNIX:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">sysinfo.ksh [-h &lt;<span style="font-style: italic;">nome-do-hospedeiro</span>&gt;] [&lt;-p <span style="font-style: italic;">n&uacute;mero-da-porta</span>&gt;] </div></pre></div></div></td></tr></table></div></div><div><a name="N119B8"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="tadminconfig815768"></a><div></div>Obten&ccedil;&atilde;o de informa&ccedil;&otilde;es do sistema utilizando a linha de comando</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N119C1"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Para executar o <span style="font-weight: bold;">sysinfo</span> a partir da linha de comando, deve ser
executado o seguinte comando enquanto o <span style="font-style: italic;">Network Server</span> estiver
executando:</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">java org.apache.derby.drda.NetworkServerControl
sysinfo [-h &lt;<span style="font-style: italic;">nome-do-hospedeiro</span>&gt;][-p &lt;<span style="font-style: italic;">n&uacute;mero-da-porta</span>&gt;] </div></pre><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Os comandos administrativos, como
<span style="font-family: Courier;">org.apache.derby.drda.NetworkServerControl sysinfo</span>,
somente podem ser executados no hospedeiro onde o servidor foi inicializado,
mesmo que o servidor tenha sido inicializado com a op&ccedil;&atilde;o <span style="font-family: Courier;">-h</span>.</div></div></div></div><div><a name="N11A25"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="tadminconfig815853"></a><div></div>Obten&ccedil;&atilde;o de informa&ccedil;&otilde;es do sistema utilizando a API</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N11A2E"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O m&eacute;todo <span style="font-weight: bold;">sysinfo</span> produz as mesmas informa&ccedil;&otilde;es que o comando
<span style="font-weight: bold;">sysinfo</span>.
A assinatura deste m&eacute;todo &eacute;</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">String getSysinfo();</div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N11A49"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Por exemplo:</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">NetworkServerControl serverControl = new NetworkServerControl();
String myinfo = serverControl.getSysinfo();</div></pre><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Este m&eacute;todo retorna informa&ccedil;&otilde;es sobre o <span style="font-style: italic;">Network Server</span> executando na
m&aacute;quina corrente no n&uacute;mero de porta padr&atilde;o (1527).</div></div></div><div><a name="N11AB0"></a><div style="font-size: 11pt; font-weight: bold; margin-left: 72pt;"><a name="tadminappsruntimeinfo"></a><div></div>Obten&ccedil;&atilde;o de informa&ccedil;&otilde;es sobre o Network Server em tempo de execu&ccedil;&atilde;o: </div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N11AB9"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">&Eacute; utilizado o comando <span style="font-weight: bold;">runtimeinfo</span>, ou o m&eacute;todo <span style="font-weight: bold;">getRuntimeInfo</span>,
para obter informa&ccedil;&otilde;es do <span style="font-style: italic;">Network Server</span> sobre utiliza&ccedil;&atilde;o de mem&oacute;ria e
sess&atilde;o corrente, incluindo informa&ccedil;&otilde;es sobre usu&aacute;rio, banco de dados e
declara&ccedil;&atilde;o preparada.</div></div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Para executar <span style="font-weight: bold;">runtimeinfo</span> a partir da linha de comando:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">java org.apache.derby.drda.NetworkServerControl runtimeinfo
   [-h &lt;<span style="font-style: italic;">nome-do-hospedeiro</span>&gt;][&lt;-p <span style="font-style: italic;">n&uacute;mero-da-porta</span>&gt;] </div></pre></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">O m&eacute;todo <span style="font-weight: bold;">getRuntimeInfo</span> retorna as mesmas informa&ccedil;&otilde;es que o comando
<span style="font-weight: bold;">runtimeinfo</span>.
A assinatura do m&eacute;todo <span style="font-style: italic;">getRuntimeInfo</span> &eacute; String getRuntimeInfo().
Por exemplo:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">NetworkServerControl serverControl = new NetworkServerControl();
String <span style="font-style: italic;">myinfo</span> = serverControl.getRuntimeInfo(); </div></pre></div></div></td></tr></table></div></div></div><div><a name="N11B54"></a><div style="font-size: 11pt; font-weight: bold; margin-left: 72pt;"><a name="tadminconfig815822"></a><div></div>Obten&ccedil;&atilde;o das propriedades do Network Server utilizando o m&eacute;todo getCurrentProperties: </div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N11B5D"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O m&eacute;todo <span style="font-style: italic;">getCurrentProperties</span> &eacute; um m&eacute;todo Java que pode ser
utilizado para obter informa&ccedil;&otilde;es sobre o <span style="font-style: italic;">Network Server</span>.
Este m&eacute;todo retorna um objeto <span style="font-style: italic;">Properties</span>, com valores de todas as
propriedades <span style="font-style: italic;">NetServer</span> na forma como est&atilde;o atualmente definidas.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">A assinatura deste m&eacute;todo &eacute;:</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">Properties getCurrentProperties();</div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N11B89"></a><span></span>
Por exemplo:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">NetworkServerControl servidor = new NetworkServerControl();
Properties p = servidor.getCurrentProperties();
p.list(System.out);
System.out.println(p.getProperty("derby.drda.host"));</div></pre><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Conforme mostrado no exemplo anterior, pode ser feita procura nas
propriedades correntes e trabalhar com as propriedades individuais
se for necess&aacute;rio, utilizando as v&aacute;rias APIs da classe <span style="font-style: italic;">Properties</span>.
Tamb&eacute;m podem ser listadas todas as propriedades utilizando o m&eacute;todo
<span style="font-style: italic;">Properties.list()</span>.</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N11BA5"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Para obter informa&ccedil;&otilde;es sobre a obten&ccedil;&atilde;o de informa&ccedil;&otilde;es do sistema utilizando
a interface <span style="font-style: italic;">servlet</span>, deve ser consultado
<span style="color: blue;"><a href="#cadminservlet98430">Gerenciamento remoto do Network Server do Derby utilizando a interface servlet</a></span>.</div></div></div></div></div></div><div><a name="N11BE8"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="cadminappsclient"></a><div></div>Acesso ao Network Server utilizando o driver cliente da rede</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; margin-left: 72pt;">Para se conectar ao <span style="font-style: italic;">Network Server</span>, o aplicativo precisa
carregar o <span style="font-style: italic;">driver</span> e a URL de conex&atilde;o espec&iacute;fica para o
<span style="font-style: italic;">Network Server</span>.
Al&eacute;m disso, caso esteja sendo utilizado autentica&ccedil;&atilde;o, dever&aacute; ser especificado
nome de usu&aacute;rio e senha.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">O <span style="font-style: italic;">driver</span> necess&aacute;rio para acessar o <span style="font-style: italic;">Network Server</span> &eacute;:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">org.apache.derby.jdbc.ClientDriver</div></pre></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">A sintaxe da URL requerida para acessar o <span style="font-style: italic;">Network Server</span> &eacute;:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">jdbc:derby://&lt;servidor&gt;[:&lt;porta&gt;]/
&lt;nome-do-banco-de-dados&gt;[;&lt;atributo-da-URL&gt;=&lt;valor&gt; [;...]]</div></pre>
onde <span style="font-family: Courier;">&lt;atributo-da-UR&gt;</span> &eacute; um atributo de cliente
incorporado ou da rede do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>.</div><div><div style="font-weight: bold;"><span style="color: red;">Tabela 1. </span>Propriedades de DataSource de JDBC padr&atilde;o</div><table style="margin-top: 12pt; margin-bottom: 10pt; background-color: white; border-style: solid; border-width: 1pt; border-color: black;" valign="top"><thead><tr><td style="border-style: solid; border-width: 1pt; border-color: black; font-weight: bold; text-align: center; padding: 2pt; background-color: silver; margin-left: 2pt;" valign="top"><div>Propriedade</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; font-weight: bold; text-align: center; padding: 2pt; background-color: silver; margin-left: 2pt;" valign="top"><div>Tipo</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; font-weight: bold; text-align: center; padding: 2pt; background-color: silver; margin-left: 2pt;" valign="top"><div>Descri&ccedil;&atilde;o</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; font-weight: bold; text-align: center; padding: 2pt; background-color: silver; margin-left: 2pt;" valign="top"><div>Atributo da URL</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; font-weight: bold; text-align: center; padding: 2pt; background-color: silver; margin-left: 2pt;" valign="top"><div>Notas</div></td></tr></thead><tbody><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>databaseName</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>String</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>O nome do banco de dados. Esta propriedade &eacute; requerida.</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div><span>&nbsp;'</span></div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>Esta propriedade tamb&eacute;m est&aacute; dispon&iacute;vel quando se usa EmbeddedDataSource.</div></td></tr><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>dataSourceName</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>String</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>O nome da fonte de dados.</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div><span>&nbsp;'</span></div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>Esta propriedade tamb&eacute;m est&aacute; dispon&iacute;vel quando se usa EmbeddedDataSource.</div></td></tr><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>description</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>String</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>A descri&ccedil;&atilde;o da fonte de dados.</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div><span>&nbsp;'</span></div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>Esta propriedade tamb&eacute;m est&aacute; dispon&iacute;vel quando se usa EmbeddedDataSource.</div></td></tr><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>user</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>String</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>O nome da conta do usu&aacute;rio.</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>user</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>O valor padr&atilde;o &eacute; APP. Esta propriedade tamb&eacute;m est&aacute; dispon&iacute;vel quando se usa EmbeddedDataSource.</div></td></tr><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>password</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>String</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>A senha de banco de dados do usu&aacute;rio.</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>password</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>Esta propriedade tamb&eacute;m est&aacute; dispon&iacute;vel quando se usa EmbeddedDataSource.</div></td></tr><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>serverName</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>String</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>O nome do hospedeiro, ou o endere&ccedil;o de TCP/IP, onde o
servidor est&aacute; escutando as requisi&ccedil;&otilde;es.</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div><span>&nbsp;'</span></div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>O valor padr&atilde;o &eacute; "localhost".</div></td></tr><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>portNumber</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>Integer</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>O n&uacute;mero da porta onde o servidor est&aacute; escutando as requisi&ccedil;&otilde;es.</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div><span>&nbsp;'</span></div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>O valor padr&atilde;o &eacute; "1527".</div></td></tr></tbody></table></div><div><div style="font-weight: bold;"><span style="color: red;">Tabela 2. </span>Propriedades de DataSource espec&iacute;ficas do cliente</div><table style="margin-top: 12pt; margin-bottom: 10pt; background-color: white; border-style: solid; border-width: 1pt; border-color: black;" valign="top"><thead><tr><td style="border-style: solid; border-width: 1pt; border-color: black; font-weight: bold; text-align: center; padding: 2pt; background-color: silver; margin-left: 2pt;" valign="top"><div>Propriedade</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; font-weight: bold; text-align: center; padding: 2pt; background-color: silver; margin-left: 2pt;" valign="top"><div>Tipo</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; font-weight: bold; text-align: center; padding: 2pt; background-color: silver; margin-left: 2pt;" valign="top"><div>Descri&ccedil;&atilde;o</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; font-weight: bold; text-align: center; padding: 2pt; background-color: silver; margin-left: 2pt;" valign="top"><div>Atributo da URL</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; font-weight: bold; text-align: center; padding: 2pt; background-color: silver; margin-left: 2pt;" valign="top"><div>Notas</div></td></tr></thead><tbody><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>traceFile</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>String</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>O nome do arquivo para sa&iacute;da do rastreamento.
Definir esta propriedade ativa o rastreamento.
Consulte <span style="color: blue;"><a href="#cadminappsclienttracing">Rastreamento do cliente da rede</a></span>.</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div><span style="font-style: italic;">traceFile</span></div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div><span>&nbsp;'</span></div></td></tr><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>traceDirectory</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>String</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>O diret&oacute;rio para sa&iacute;da do rastreamento.
Cada conex&atilde;o envia a sa&iacute;da para um arquivo separado.
Definir esta propriedade ativa o rastreamento.
Consulte <span style="color: blue;"><a href="#cadminappsclienttracing">Rastreamento do cliente da rede</a></span>.</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div><span style="font-style: italic;">traceDirectory</span></div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div><span>&nbsp;'</span></div></td></tr><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>traceLevel</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>Integer</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>O n&iacute;vel de rastreamento do cliente, se
<span style="font-style: italic;">traceFile</span> ou <span style="font-style: italic;">traceDirectory</span> estiver definido.</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div><span style="font-style: italic;">traceLevel</span></div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>O valor padr&atilde;o &eacute; TRACE_ALL.</div></td></tr><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>traceFileAppend</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>Boolean</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>Verdade se a sa&iacute;da do rastreamento dever&aacute; ser
anexada ao arquivo de rastreamento existente.</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div><span style="font-style: italic;">traceFileAppend</span></div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>O valor padr&atilde;o &eacute; falso.</div></td></tr><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>securityMechanism</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>Integer</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>O mecanismo de seguran&ccedil;a. Consulte <span style="color: blue;"><a href="#cadminappsclientsecurity">Seguran&ccedil;a do cliente da rede</a></span>.</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div><span style="font-style: italic;">securityMechanism</span></div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>O valor padr&atilde;o &eacute; USER_ONLY _SECURITY.</div></td></tr><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>retrieveMessageText</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>Boolean</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>Buscar o texto da mensagem no servidor.
&Eacute; chamado um procedimento armazenado para buscar o texto da mensagem a cada
<span style="font-style: italic;">SQLException</span>, devendo iniciar uma nova unidade de trabalho.
Esta propriedade dever&aacute; ser definida como falsa se n&atilde;o for desejado impacto no
desempenho, ou quando iniciando novas unidades de trabalho.</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div><span style="font-style: italic;">retrieveMessageText</span></div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>O valor padr&atilde;o &eacute; verdade.</div></td></tr></tbody></table></div><div><div style="font-weight: bold;"><span style="color: red;">Tabela 3. </span>Propriedades de DataSource espec&iacute;ficas do servidor</div><table style="margin-top: 12pt; margin-bottom: 10pt; background-color: white; border-style: solid; border-width: 1pt; border-color: black;" valign="top"><thead><tr><td style="border-style: solid; border-width: 1pt; border-color: black; font-weight: bold; text-align: center; padding: 2pt; background-color: silver; margin-left: 2pt;" valign="top"><div>Propriedade</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; font-weight: bold; text-align: center; padding: 2pt; background-color: silver; margin-left: 2pt;" valign="top"><div>Tipo</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; font-weight: bold; text-align: center; padding: 2pt; background-color: silver; margin-left: 2pt;" valign="top"><div>Descri&ccedil;&atilde;o</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; font-weight: bold; text-align: center; padding: 2pt; background-color: silver; margin-left: 2pt;" valign="top"><div>Atributos da URL</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; font-weight: bold; text-align: center; padding: 2pt; background-color: silver; margin-left: 2pt;" valign="top"><div>Notas</div></td></tr></thead><tbody><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>connectionAttributes</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>String</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>Definido pela lista de atributos da conex&atilde;o
incorporada do <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>,
separados por ponto-e-v&iacute;rgula.</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>V&aacute;rios</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>Esta propriedade tamb&eacute;m est&aacute; dispon&iacute;vel quando se usa EmbeddedDataSource.
Para obter mais informa&ccedil;&otilde;es sobre os v&aacute;rios atributos de conex&atilde;o, deve ser
consultado o <span style="border-right-width: 0pt; border-left-width: 0pt;"><span style="font-style: italic;">Manual de Refer&ecirc;ncia do Derby</span></span>.</div></td></tr></tbody></table></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Deve ser observado que <span style="font-family: Courier;">setAttributesAsPassword</span>, dispon&iacute;vel
para o <span style="font-family: Courier;">DataSource</span> incorporado, n&atilde;o est&aacute; dispon&iacute;vel para o
<span style="font-family: Courier;">DataSource</span> cliente.</div></div><div><a name="N12076"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="cadminappsclientsecurity"></a><div></div>Seguran&ccedil;a do cliente da rede</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; margin-left: 72pt;">O cliente da rede do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
permite selecionar o mecanismo de seguran&ccedil;a, especificando o valor da
propriedade <span style="font-family: Courier;">securityMechanism</span>.</div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N120A1"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">A propriedade <span style="font-family: Courier;">securityMechanism</span> pode ser definida de
uma das seguintes maneiras:
<div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Quando est&aacute; sendo utilizada a interface <span style="font-family: Courier;">DriverManager</span>,
definindo <span style="font-family: Courier;">securityMechanism</span> no objeto
<span style="font-family: Courier;">java.util.Properties</span>, antes de chamar a forma do m&eacute;todo
<span style="font-family: Courier;">getConnection</span> que inclui o par&acirc;metro
<span style="font-family: Courier;">java.util.Properties</span>.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Quando est&aacute; sendo utilizada a interface <span style="font-family: Courier;">DataSource</span> para
criar e instalar seus pr&oacute;prios objetos <span style="font-family: Courier;">DataSource</span>,
chamando o m&eacute;todo <span style="font-family: Courier;">DataSource.setSecurityMechanism</span> ap&oacute;s criar
o objeto <span style="font-family: Courier;">DataSource</span>.</div></td></tr></table></div>
A tabela
<span style="color: blue;"><a href="#radminappsclientsecuritytable">Mecanismos de seguran&ccedil;a suportados pelo cliente da rede do Derby</a></span>
lista os mecanismos de seguran&ccedil;a que o cliente da rede do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
suporta, e o valor da propriedade correspondente a ser especificado para obter
o mecanismo de seguran&ccedil;a.
O mecanismo de seguran&ccedil;a padr&atilde;o &eacute; apenas a identifica&ccedil;&atilde;o do usu&aacute;rio, se n&atilde;o
for definida a senha. Se for definida a senha, o mecanismo de seguran&ccedil;a padr&atilde;o
&eacute; tanto a identifica&ccedil;&atilde;o do usu&aacute;rio quanto a senha.
O usu&aacute;rio padr&atilde;o &eacute; APP, se n&atilde;o for especificado nenhum outro usu&aacute;rio.
<div><div style="font-weight: bold;"><span style="color: red;">Tabela 4. </span>Mecanismos de seguran&ccedil;a suportados pelo cliente da rede do Derby</div><table style="margin-top: 12pt; margin-bottom: 10pt; background-color: white; border-style: solid; border-width: 1pt; border-color: black;" valign="top"><thead><tr><td style="border-style: solid; border-width: 1pt; border-color: black; font-weight: bold; text-align: center; padding: 2pt; background-color: silver; margin-left: 2pt;" valign="top"><div>Mecanismo de seguran&ccedil;a</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; font-weight: bold; text-align: center; padding: 2pt; background-color: silver; margin-left: 2pt;" valign="top"><div>Valor da propriedade <span style="font-family: Courier;">securityMechanism</span></div></td><td style="border-style: solid; border-width: 1pt; border-color: black; font-weight: bold; text-align: center; padding: 2pt; background-color: silver; margin-left: 2pt;" valign="top"><div>Coment&aacute;rios</div></td></tr></thead><tbody><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>Identifica&ccedil;&atilde;o e senha do usu&aacute;rio</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>ClientDataSource. CLEAR_TEXT_PASSWORD_SECURITY (0x03)</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>Padr&atilde;o se a senha estiver definida</div></td></tr><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>Somente a identifica&ccedil;&atilde;o do usu&aacute;rio</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>ClientDataSource. USER_ONLY_SECURITY (0x04)</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>Padr&atilde;o se a senha n&atilde;o estiver definida</div></td></tr><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>Identifica&ccedil;&atilde;o do usu&aacute;rio e senha criptografados</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>ClientDataSource. ENCRYPTED_USER_AND_ PASSWORD_SECURITY
(0x09)</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>A criptografia requer a implementa&ccedil;&atilde;o da JCE que suporta
o algoritmo de Diffie-Helman com n&uacute;mero primo de 32 bytes.</div></td></tr></tbody></table></div></div></div></div></div><div><a name="N121D0"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="cadminappsclienttracing"></a><div></div>Rastreamento do cliente da rede</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; margin-left: 72pt;">O cliente da rede do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
fornece facilidade de rastreamento, para coletar informa&ccedil;&otilde;es de
rastreamento do JDBC e ver os fluxos do protocolo.</div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N121F5"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">Existem v&aacute;rias maneiras de obter sa&iacute;da de rastreamento.
Entretanto, a maneira mais f&aacute;cil de obter sa&iacute;da de rastreamento &eacute; utilizando o
atributo <span style="font-family: Courier;">traceFile</span> na URL no <span style="font-family: Courier;">ij</span>.
O exemplo a seguir mostra o envio de todo o rastreamento para o arquivo
<span style="font-family: Courier;">trace.out</span>, a partir de uma sess&atilde;o <span style="font-family: Courier;">ij</span>.
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">ij&gt;connect 'jdbc:derby://localhost:1527/meubanco;
create=true;traceFile=trace.out;user=user1;password=secret4me';</div></pre></div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N1221C"></a><span></span><div style="font-weight: bold;">Implementa&ccedil;&atilde;o do rastreamento do ClientDataSource</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">Para coletar dados de rastreamento ao obter conex&otilde;es usando
ClientDataSource, pode ser empregado um dos tr&ecirc;s m&eacute;todos a seguir:
<div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Utilizar o m&eacute;todo <span style="font-family: Courier;">setLogWriter(java.io.PrintWriter)</span> de
ClientDataSource, e definir <span style="font-family: Courier;">PrintWriter</span> com um valor n&atilde;o nulo.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Utilizar o m&eacute;todo <span style="font-family: Courier;">setTraceFile(String filename)</span> de ClientDataSource.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Utilizar o m&eacute;todo <span style="font-family: Courier;">setTraceDirectory(String dirname)</span> de
ClientDataSource para rastrear cada fluxo de conex&atilde;o em seu pr&oacute;prio arquivo,
em programas que possuem v&aacute;rias conex&otilde;es.</div></td></tr></table></div></div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N12255"></a><span></span><div style="font-weight: bold;">Implementa&ccedil;&atilde;o do rastreamento do DriverManager</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">Quando se obt&eacute;m conex&otilde;es utilizando o <span style="font-family: Courier;">DriverManager</span>, pode
ser empregada uma das duas op&ccedil;&otilde;es a seguir para habilitar a coleta de
informa&ccedil;&otilde;es de rastreamento:
<div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Utilizar o m&eacute;todo <span style="font-family: Courier;">setLogWriter(java.io.PrintWriter)</span> de
<span style="font-family: Courier;">DriverManager</span>, e definir <span style="font-family: Courier;">PrintWriter</span> como um
valor n&atilde;o nulo.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Utilizar o atributo da URL <span style="font-family: Courier;">traceFile</span> ou
<span style="font-family: Courier;">traceDirectory</span> para definir uma destas propriedades, antes de
criar a conex&atilde;o com o m&eacute;todo <span style="font-family: Courier;">DriverManager.getConnection()</span>.</div></td></tr></table></div></div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N1229B"></a><span></span><div style="font-weight: bold;">Altera&ccedil;&atilde;o do n&iacute;vel de rastreamento padr&atilde;o</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">O n&iacute;vel de rastreamento padr&atilde;o &eacute; <span style="font-family: Courier;">ClientDataSource.TRACE_ALL</span>.
O n&iacute;vel de rastreamento pode ser escolhido chamando o m&eacute;todo
<span style="font-family: Courier;">setTraceLevel(int level)</span>, ou definindo o atributo da URL
<span style="font-family: Courier;">traceLevel</span>:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">String url = "jdbc:derby://meuhospedeiro.meudominio.com:1528/meubanco" +
 ";traceFile=/u/user1/trace.out" +
 ";traceLevel=" +
 org.apache.derby.jdbc.ClientDataSource.TRACE_PROTOCOL_FLOWS;
DriverManager.getConnection(url,"user1","secret4me");</div></pre><div><div style="font-weight: bold;"><span style="color: red;">Tabela 5. </span>N&iacute;veis de rastreamento dispon&iacute;veis e seus valores</div><table style="margin-top: 12pt; margin-bottom: 10pt; background-color: white; border-style: solid; border-width: 1pt; border-color: black;" valign="top"><thead><tr><td style="border-style: solid; border-width: 1pt; border-color: black; font-weight: bold; text-align: center; padding: 2pt; background-color: silver; margin-left: 2pt;" valign="top"><div>N&iacute;vel de rastreamento</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; font-weight: bold; text-align: center; padding: 2pt; background-color: silver; margin-left: 2pt;" valign="top"><div>Valor</div></td></tr></thead><tbody><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>org.apache.derby.jdbc.ClientDataSource.TRACE_NONE</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>0x0</div></td></tr><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>org.apache.derby.jdbc.ClientDataSource.TRACE_CONNECTION_CALLS</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>0x1</div></td></tr><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>org.apache.derby.jdbc.ClientDataSource.TRACE_STATEMENT_CALLS</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>0x2</div></td></tr><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>org.apache.derby.jdbc.ClientDataSource.TRACE_RESULT_SET_CALLS</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>0x4</div></td></tr><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>org.apache.derby.jdbc.ClientDataSource.TRACE _DRIVER_CONFIGURATION</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>0x10</div></td></tr><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>org.apache.derby.jdbc.ClientDataSource.TRACE_CONNECTS</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>0x20</div></td></tr><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>org.apache.derby.jdbc.ClientDataSource.TRACE_PROTOCOL_FLOWS</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>0x40</div></td></tr><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>org.apache.derby.jdbc.ClientDataSource.TRACE _RESULT_SET_META_DATA</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>0x80</div></td></tr><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>org.apache.derby.jdbc.ClientDataSource.TRACE _PARAMETER_META_DATA</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>0x100</div></td></tr><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>org.apache.derby.jdbc.ClientDataSource.TRACE_DIAGNOSTICS</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>0x200</div></td></tr><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>org.apache.derby.jdbc.ClientDataSource.TRACE_XA_CALLS</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>0x800</div></td></tr><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>org.apache.derby.jdbc.ClientDataSource.TRACE_ALL</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>0xFFFFFFFF;</div></td></tr></tbody></table></div>
Para especificar mais de um n&iacute;vel de rastreamento, deve ser utilizada uma das
seguintes t&eacute;cnicas:<div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Utilizar operadores OR bit-a-bit ( | ) entre dois ou mais valores de
rastreamento.
Por exemplo, para rastrear os fluxos do protocolo e chamadas de conex&atilde;o deve
ser especificado o seguinte valor para traceLevel:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">TRACE_PROTOCOL_FLOWS | TRACE_CONNECTION_CALLS</div></pre></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Utilizar o operador de complemento bit-a-bit ( ~ ) com o valor de
rastreamento para especificar todos, exceto um determinado rastreamento.
Por exemplo, para rastrear tudo, exceto os fluxos do protocolo, deve ser
especificado o seguinte valor para traceLevel:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">~TRACE_PROTOCOL_FLOWS</div></pre></div></td></tr></table></div></div></div></div></div><div><a name="N12415"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="radminappsclientxmp"></a><div></div>Exemplos de driver cliente da rede</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N1241E"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">Os exemplos a seguir especificam os atributos usu&aacute;rio e senha da URL.
Para habilitar a autentica&ccedil;&atilde;o de usu&aacute;rio, a propriedade
<span style="font-style: italic;">derby.connection.requireAuthentication</span> deve ser definida como verdade,
sen&atilde;o o <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span> n&atilde;o requer
o nome de usu&aacute;rio e a senha.
Em produtos multiusu&aacute;rio, esta propriedade normalmente &eacute; definida no arquivo do
sistema <span style="font-style: italic;">derby.properties</span> no servidor, uma vez que este est&aacute; em um
ambiente confi&aacute;vel.
Abaixo est&aacute; mostrado um arquivo <span style="font-style: italic;">derby.properties</span> de amostra em
conformidade com estes exemplos:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">derby.connection.requireAuthentication=true
derby.authentication.provider=BUILTIN
derby.user.judy=no12see</div></pre></div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N12445"></a><span></span><div style="font-weight: bold;">Exemplo 1</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Neste exemplo a conex&atilde;o &eacute; feita usando o nome de servidor padr&atilde;o,
<span style="font-style: italic;">localhost</span>, a porta padr&atilde;o, <span style="font-style: italic;">1527</span>, e o banco de dados
<span style="font-style: italic;">amostra</span>.</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">jdbc:derby://localhost:1527/amostra;user=judy;password=no12see</div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N1246B"></a><span></span><div style="font-weight: bold;">Exemplo 2</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">Neste exemplo s&atilde;o especificados tanto atributos do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
quanto atributos do <span style="font-style: italic;">driver</span> cliente da rede:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">jdbc:derby://localhost:1527/sample;create=true;user=judy;
password=no12see</div></pre></div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N1248B"></a><span></span><div style="font-weight: bold;">Exemplo 3</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Neste exemplo a conex&atilde;o &eacute; feita usando o nome de servidor padr&atilde;o,
<span style="font-style: italic;">localhost</span>, a porta padr&atilde;o, <span style="font-style: italic;">1527</span>, e incluindo o caminho na parte
do nome do banco de dados da URL.</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">jdbc:derby://localhost:1527/c:/meudiretorio/meubanco;user=judy;
password=no12see</div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N124AB"></a><span></span><div style="font-weight: bold;">Exemplo 4</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Neste exemplo &eacute; mostrado como utilizar o <span style="font-style: italic;">driver</span> cliente da rede
para conectar o cliente da rede ao <span style="font-style: italic;">Network Server</span>:</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">String databaseURL = "jdbc:derby://localhost:1527/amostra";
<span style="font-weight: bold;">// Carregar a classe do driver cliente da rede do Derby</span>
Class.forName("org.apache.derby.jdbc.ClientDriver");
<span style="font-weight: bold;">// Definir as propriedades usu&aacute;rio e senha</span>
Properties properties = new Properties();
properties.put("user", "judy");
properties.put("password", "no12see");
<span style="font-weight: bold;">// Obter a conex&atilde;o</span>
Connection conn = DriverManager.getConnection(databaseURL, properties); </div></pre></div></div></div><div><a name="N12522"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="cadminapps810777"></a><div></div>Acesso ao Network Server utilizando o Universal Driver do DB2</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">Pode ser utilizado o <span style="font-style: italic;">Universal Driver</span> do DB2, em vez do
<span style="font-style: italic;">driver</span> cliente da rede do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>,
para conectar ao <span style="font-style: italic;">Network Server</span>.
O aplicativo necessita carregar o <span style="font-style: italic;">driver</span>, e a URL de conex&atilde;o espec&iacute;fica
para o <span style="font-style: italic;">Network Server</span>.
Al&eacute;m disso, &eacute; especificado o nome do usu&aacute;rio e a senha.
Se a autentica&ccedil;&atilde;o n&atilde;o estiver configurada, poder&aacute; ser utilizado qualquer valor
para o nome do usu&aacute;rio e a senha.
O <span style="font-style: italic;">driver</span> utilizado para acessar o <span style="font-style: italic;">Network Server</span> &eacute;:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">com.ibm.db2.jcc.DB2Driver</div></pre>
Para o <span style="font-style: italic;">Universal Driver</span> do DB2 poder ser utilizado, devem estar presentes
no caminho de classes os seguintes arquivos:
<div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="font-family: Courier;">db2jcc.jar</span></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="font-family: Courier;">db2jcc_license_c.jar</span></div></td></tr></table></div></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">A sintaxe da URL requerida para acessar o <span style="font-style: italic;">Network Server</span> &eacute;:</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">jdbc:derby:net://&lt;servidor&gt;[:&lt;porta&gt;]/
&lt;nome-do-banco-de-dados&gt;[;&lt;atributo-da-URL-do-<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>&gt;=&lt;valor&gt; [;...]]
[:&lt;atributo do Universal Driver&gt;=&lt;valor&gt;; [...;]]</div></pre><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Ap&oacute;s especificar o nome do banco de dados e os atributos, podem ser
inclu&iacute;dos atributos para o <span style="font-style: italic;">driver</span> de JDBC do DB2.
Deve ser inclu&iacute;do um ponto-e-v&iacute;rgula ap&oacute;s o &uacute;ltimo atributo do
<span style="font-style: italic;">Universal Driver</span>.</div><div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">servidor</span></div><div style="margin-left: 72pt + 16pt;">O nome da m&aacute;quina onde o servidor est&aacute; executando.
Pode ser o nome da m&aacute;quina (por exemplo, <span style="font-style: italic;">buffy</span>) ou o endere&ccedil;o de IP,
por exemplo, <span style="font-style: italic;">158.58.62.225</span>.
<div><span style="font-weight: bold; border-right-width: 0pt; border-left-width: 0pt;">Note: </span>  A menos que o <span style="font-style: italic;">Network Server</span> tenha sido inicializado com a op&ccedil;&atilde;o
<span style="font-family: Courier;">-h</span> ou com a propriedade <span style="font-style: italic;">derby.drda.host</span> definida,
este valor dever&aacute; ser <span style="font-family: Courier;">localhost</span>.</div></div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">porta</span></div><div style="margin-left: 72pt + 16pt;">O n&uacute;mero da porta onde o servidor est&aacute; escutando. O valor padr&atilde;o &eacute; 1527.</div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">nome do banco de dados</span></div><div style="margin-left: 72pt + 16pt;">O nome do banco de dados para a conex&atilde;o.
O nome do banco de dados pode ter no m&aacute;ximo 18 caracteres.
Para incluir informa&ccedil;&otilde;es de caminho no nome do banco de dados, devem ser usadas
aspas (").
Como alternativa, a informa&ccedil;&atilde;o sobre o caminho pode ser especificada definindo
a propriedade <span style="font-style: italic;">derby.system.home</span> no arquivo
<span style="font-family: Courier;">derby.properties</span>
ou no ambiente Java ao inicializar o <span style="font-style: italic;">Network Server</span>.
Para obter informa&ccedil;&otilde;es sobre como definir a pasta base do sistema (<span style="font-style: italic;">home</span>),
deve ser consultado o
<span style="font-style: italic;"><span style="border-right-width: 0pt; border-left-width: 0pt;"><span style="font-style: italic;">Guia do Desenvolvedor do Derby</span></span></span>.
</div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-style: italic;">atributo da URL do <span style="border-right-width: 0pt; border-left-width: 0pt;">derby</span>=valor</span></div><div style="margin-left: 72pt + 16pt;">Atributos opcionais da URL de conex&atilde;o com o banco de dados suportados pelo
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>.
Para obter mais informa&ccedil;&otilde;es deve ser consultado o
<span style="font-style: italic;"><span style="border-right-width: 0pt; border-left-width: 0pt;"><span style="font-style: italic;">Guia do Desenvolvedor do Derby</span></span></span>.</div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-style: italic;">atributo do Universal Driver=valor</span></div><div style="margin-left: 72pt + 16pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Atributos opcionais da URL de conex&atilde;o com o banco de dados suportados
pelo <span style="font-style: italic;">DB2 Universal JDBC Driver</span>.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O <span style="font-style: italic;">DB2 JDBC Universal Driver</span> requer que sejam definidos os atributos
usu&aacute;rio e senha do <span style="font-style: italic;">Universal Driver</span> como valores n&atilde;o nulos.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Est&atilde;o dispon&iacute;veis os seguintes atributos do <span style="font-style: italic;">DB2 Universal JDBC Driver</span>
ao executar o <span style="font-style: italic;">Network Server</span>:</div><div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">user</span></div><div style="margin-left: 72pt + 32pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O nome do usu&aacute;rio (requerido pelo <span style="font-style: italic;">Universal JDBC Driver</span>).</div></div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">password</span></div><div style="margin-left: 72pt + 32pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Senha do usu&aacute;rio (requerido pelo <span style="font-style: italic;">Universal JDBC Driver</span>).</div></div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">portNumber</span></div><div style="margin-left: 72pt + 32pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O n&uacute;mero da porta TCP/IP onde o <span style="font-style: italic;">Network Server</span> escuta as
requisi&ccedil;&otilde;es de conex&atilde;o para esta fonte de dados.
O valor padr&atilde;o &eacute; 1527.</div></div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">retrieveMessagesFromServerOnGetMessage</span></div><div style="margin-left: 72pt + 32pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Mostra as mensagens de erro do servidor.</div></div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">readOnly</span></div><div style="margin-left: 72pt + 32pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Cria uma conex&atilde;o de leitura apenas. O valor padr&atilde;o &eacute; falso.</div></div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">logWriter</span></div><div style="margin-left: 72pt + 32pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Um fluxo de sa&iacute;da caractere.
Todas as mensagens de <span style="font-style: italic;">log</span> e de rastreamento imprimem para a
propriedade <span style="font-family: Courier;">logWriter</span>.</div></div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">traceLevel</span></div><div style="margin-left: 72pt + 32pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Especifica a granularidade das mensagens de rastreamento na propriedade
<span style="font-family: Courier;">logWriter</span>.</div></div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">traceFile</span></div><div style="margin-left: 72pt + 32pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Fornece uma localiza&ccedil;&atilde;o de arquivo expl&iacute;cita para a sa&iacute;da de
rastreamento.</div></div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">securityMechanism</span></div><div style="margin-left: 72pt + 32pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Indica o tipo de mecanismo de seguran&ccedil;a utilizado.</div></div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">deferPrepares</span></div><div style="margin-left: 72pt + 32pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Controla o momento em que as declara&ccedil;&otilde;es preparadas s&atilde;o preparadas
fisicamente no servidor de banco de dados. O valor padr&atilde;o &eacute; verdade.</div></div></div></div></div></div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N12774"></a><span></span><div style="font-weight: bold;">Informa&ccedil;&otilde;es sobre o Universal Driver System</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O <span style="font-style: italic;">Network Server</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
&eacute; compat&iacute;vel com o <span style="font-style: italic;">DB2 JDBC Universal Driver</span> vers&atilde;o 2.4, ou maior.</div></div></div><div><a name="N127EC"></a><div style="font-size: 11pt; font-weight: bold; margin-left: 72pt;"><a name="radminapps810699"></a><div></div>Exemplos do Universal Driver do DB2: </div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N127F5"></a><span></span><div style="font-weight: bold;">Exemplo 1</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Neste exemplo a conex&atilde;o &eacute; feita usando o nome de servidor padr&atilde;o,
<span style="font-style: italic;">localhost</span>, a porta padr&atilde;o, <span style="font-style: italic;">1527</span>, e o banco de dados <span style="font-style: italic;">amostra</span>.
S&atilde;o especificados os atributos <span style="font-style: italic;">user</span>, <span style="font-style: italic;">password</span> e
<span style="font-style: italic;">retrieveMessagesFromServerOnGetMessage</span> da URL.
&Eacute; necess&aacute;rio definir os atributos <span style="font-style: italic;">user</span> e <span style="font-style: italic;">password</span> do
<span style="font-style: italic;">Universal Driver</span>.</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">jdbc:derby:net://localhost:1527/amostra:user=judy;password=no12see;
retrieveMessagesFromServerOnGetMessage=true;</div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N1283F"></a><span></span><div style="font-weight: bold;">Exemplo 2</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">Neste exemplo s&atilde;o especificados tanto atributos do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
quanto atributos do <span style="font-style: italic;">Universal Driver</span>:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">jdbc:derby:net://localhost:1527/sample;create=true:user=judy;
password=no12see;retrieveMessagesFromServerOnGetMessage=true;</div></pre></div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N1285F"></a><span></span><div style="font-weight: bold;">Exemplo 3</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Neste exemplo a conex&atilde;o &eacute; feita usando o nome de servidor padr&atilde;o,
<span style="font-style: italic;">localhost</span>, a porta padr&atilde;o, <span style="font-style: italic;">1527</span>, e incluindo o caminho na parte
do nome do banco de dados da URL.
O nome do banco de dados deve ser delimitado por aspas, e n&atilde;o podem ser
especificados atributos do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span> na URL.</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">jdbc:derby:net://localhost:1527/"c:/meudiretorio/meubanco":user=judy;
password=no12see;retrieveMessagesFromServerOnGetMessage=true;</div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N12885"></a><span></span><div style="font-weight: bold;">Exemplo 4</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Este exemplo &eacute; um fragmento de um programa exemplo que conecta ao
<span style="font-style: italic;">Network Server</span> utilizando o <span style="font-style: italic;">Universal Driver</span>:</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">String databaseURL = "jdbc:derby:net://localhost:1527/sample";
<span style="font-weight: bold;">// Carga da classe do IBM JDBC Universal Driver</span>
Class.forName("com.ibm.db2.jcc.DB2Driver");
<span style="font-weight: bold;">// Definir as propriedades nome do usu&aacute;rio e senha</span>
Properties properties = new Properties();
properties.put("user", "APP");
properties.put("password", "APP");
properties.put("retreiveMessagesFromServerOnGetMessage", "true");
<span style="font-weight: bold;">// Obter a conex&atilde;o</span>
Connection conn = DriverManager.getConnection(databaseURL, properties); </div></pre></div></div></div></div></div><div><a name="N128D5"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="cadminnsdatasources"></a><div></div>Acesso ao Network Server utilizando DataSource</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">As fontes de dados do <span style="font-style: italic;">driver</span> cliente da rede do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span><span style="font-family: Courier;">org.apache.derby.jdbc.ClientDataSource</span> e
<span style="font-family: Courier;">org.apache.derby.jdbc.ClientConnectionPoolDataSource</span>
s&atilde;o suportadas pelo <span style="font-style: italic;">Network Server</span>.</div></div><div><a name="N129BF"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="radminnsdatasourcexmp"></a><div></div>Exemplo de acesso utilizando DataSource</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N129CC"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O exemplo a seguir utiliza
<span style="font-family: Courier;">org.apache.derby.jdbc.ClientDataSource</span>
para acessar o <span style="font-style: italic;">Network Server</span>:</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N129E1"></a><span></span><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">public static javax.sql.DataSource getDS(String database, String user, String
password) throws SQLException
{
org.apache.derby.jdbc.ClientDataSource ds =
   new org.apache.derby.jdbc.ClientDataSource();

// O nome do banco de dados pode incluir atributos da URL do <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
ds.setDatabaseName(<span style="font-style: italic;">database</span>);

if (user != null)
   ds.setUser(<span style="font-style: italic;">user</span>);
if (password != null)
   ds.setPassword(<span style="font-style: italic;">password</span>);

// O hospedeiro onde o Network Server est&aacute; executando
ds.setServerName("localhost");

// Porta onde o Network Server est&aacute; escutando
ds.setPortNumber(1527);

return ds;
}
</div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N12A03"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">O programa pode ent&atilde;o estabelecer a conex&atilde;o:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">javax.sql.DataSource ds = getDS("meubanco;create=true", null, null);
// Nota: o usu&aacute;rio e a senha s&atilde;o requeridos na conex&atilde;o
Connection conn = ds.getConnection("usr2", "pass2");</div></pre></div></div></div></div></div><div><a name="N12A30"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="cadminapps811478"></a><div></div>XA e o Network Server</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Tanto o <span style="font-style: italic;">driver</span> incorporado quanto o <span style="font-style: italic;">Network Server</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
fornecem suporte a XA.
O <span style="font-style: italic;">Network Server</span> fornece suporte a DRDA no n&iacute;vel 7.
Os clientes da DRDA que suportam XAMGR, como o cliente de rede do Derby,
podem enviar requisi&ccedil;&otilde;es XA para o <span style="font-style: italic;">Network Server</span>.</div></div><div><a name="N12B2D"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="cadminappsxawthdriver"></a><div></div>Utiliza&ccedil;&atilde;o de XA com o driver cliente da rede</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N12B4C"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O suporte a XA para o <span style="font-style: italic;">Network Server</span> pode ser acessado utilizando
a interface DataSource XA do <span style="font-style: italic;">driver</span> cliente da rede
(<span style="font-family: Courier;">org.apache.derby.jdbc.ClientXADataSource</span>).</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N12B67"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O exemplo a seguir mostra como obter uma conex&atilde;o XA com o <span style="font-style: italic;">driver</span>
cliente da rede:</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">import org.apache.derby.jdbc.ClientXADataSource;
import javax.sql.XAConnection;
...

XAConnection xaConnection = null;
Connection conn = null;

String driver = "org.apache.derby.jdbc.ClientDataSource";
ClientXADataSource ds = new ClientXADataSource();

ds.setDatabaseName ("amostra;create=true");

ds.setServerName("localhost");

ds.setPortNumber(1527);

Class.forName(driver);

xaConnection = ds.getXAConnection("auser", "shhhh");

conn = xaConnection.getConnection();</div></pre></div></div></div></div><div><a name="N12B9A"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="cadminappsusingthederbytoolswiththene"></a><div></div>Utiliza&ccedil;&atilde;o das ferramentas do Derby com o Network Server</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">As ferramentas
<span style="font-family: Courier;">ij</span> e <span style="font-family: Courier;">dblook</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
trabalham no modo incorporado e no modo cliente/servidor.</div></div><div><a name="N12C87"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="tadminapps811302"></a><div></div>Utiliza&ccedil;&atilde;o da ferramenta ij do Derby com o Network Server</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N12CB0"></a><span></span>Para utilizar a ferramenta <span style="font-style: italic;">ij</span> com o <span style="font-style: italic;">driver</span> cliente da
rede:</div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div>1. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Inicialize o <span style="font-style: italic;">ij</span> de uma das seguintes maneiras:</span><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div>a.</div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Utilizando um script.</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Execute o script <span style="font-style: italic;">ij.bat</span> nos sistemas Windows, ou o script
<span style="font-style: italic;">ij.ksh</span> nos sistemas UNIX.
Estes scripts est&atilde;o localizados no diret&oacute;rio
$<span style="border-right-width: 0pt; border-left-width: 0pt;">DERBY_HOME</span>.</div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>b.</div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Executando a ferramenta <span style="font-style: italic;">ij</span> a partir da linha de comando.</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">java org.apache.derby.tools.ij</div></pre></div></div></td></tr></table></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>2. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Conecte especificando o URL:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">ij&gt; CONNECT 'jdbc:derby://localhost:1527/sample'
    USER 'judy' PASSWORD 'no12see';</div></pre>
Para obter exemplos adicionais de URLs deve ser consultado
<span style="color: blue;"><a href="#radminappsclientxmp">Exemplos de driver cliente da rede</a></span>.
</div></div></td></tr></table></div></div></div><div><a name="N12D59"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="tadminapps811345"></a><div></div>Utiliza&ccedil;&atilde;o da ferramenta dblook do Derby com o Network Server</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N12D82"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Para utilizar a ferramenta <span style="font-style: italic;">dblook</span> com o <span style="font-style: italic;">driver</span> cliente da rede
&eacute; necess&aacute;rio ter certeza que o <span style="font-style: italic;">Network Server</span> est&aacute; executando
(consulte <span style="color: blue;"><a href="#tadmincbdjhhfd">Inicializa&ccedil;&atilde;o do Network Server</a></span>),
e depois incluir os atributos de conex&atilde;o do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
e do <span style="font-style: italic;">driver</span> cliente da rede como parte da URL do banco de dados.</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N12DB1"></a><span></span><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">java org.apache.derby.tools.dblook -d 'jdbc:derby://localhost:1527/amostra;
user=user1;password=secret4me;'</div></pre></div></div></div></div><div><a name="N12DE7"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="cadminapps"></a><div></div>Diferen&ccedil;as entre executar o Derby no modo incorporado e utilizando o Network Server</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Esta se&ccedil;&atilde;o descreve as diferen&ccedil;as entre a execu&ccedil;&atilde;o do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
no modo incorporado e utilizando o <span style="font-style: italic;">Network Server</span>.
Deve ser observado que podem existir diferen&ccedil;as n&atilde;o documentadas, ainda
n&atilde;o identificadas.</div></div><div><a name="N12EFC"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="cadminappsclientdiffs"></a><div></div>Diferen&ccedil;as entre os drivers cliente incorporado e cliente da rede</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">A seguir est&atilde;o as diferen&ccedil;as conhecidas existentes entre o <span style="font-style: italic;">driver</span>
incorporado e o <span style="font-style: italic;">driver</span> cliente da rede do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>.
Deve ser observado que podem existir diferen&ccedil;as n&atilde;o documentadas, ainda n&atilde;o
identificadas.
Algumas diferen&ccedil;as presentes no cliente da rede poder&atilde;o ser modificadas em vers&otilde;es
futuras, para corresponder &agrave;s funcionalidades do <span style="font-style: italic;">driver</span> incorporado.<div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>As mensagens de erro e <span style="font-style: italic;">SQLStates</span> podem diferir entre os
<span style="font-style: italic;">drivers</span> cliente da rede e incorporado.
Alguns <span style="font-style: italic;">SQLStates</span> podem ser nulos ao utilizar o cliente da rede, em
particular nos erros de convers&atilde;o de dados.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>As exce&ccedil;&otilde;es e advert&ecirc;ncias SQL m&uacute;ltiplas somente retornam o <span style="font-style: italic;">SQLState</span>
da primeira exce&ccedil;&atilde;o, quando se utiliza o cliente da rede.
Os textos das exce&ccedil;&otilde;es adicionais s&atilde;o anexados ao texto da primeira exce&ccedil;&atilde;o.
Consulte <span style="color: blue;"><a href="#radminapps811974">Diferen&ccedil;as nas mensagens de erro</a></span>.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Para utilizar identifica&ccedil;&atilde;o do usu&aacute;rio e senha criptografados,
&eacute; necess&aacute;rio possuir a Extens&atilde;o de Criptografia do Java da IBM
(Java Cryptography Extension/JCE) vers&atilde;o 1.2.1, ou mais recente.</div></td></tr></table></div></div></div></div><div><a name="N12FB3"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="radminappsresultsetdiffs"></a><div></div>Conjuntos de resultados atualiz&aacute;veis</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">No <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>,
as funcionalidades dos conjuntos de resultados atualiz&aacute;veis em um ambiente
servidor s&atilde;o semelhantes &agrave;s do ambiente incorporado, exceto pelas seguintes
diferen&ccedil;as:
<div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>O cliente da rede requer a exist&ecirc;ncia de pelo menos uma coluna da tabela de
destino na lista de sele&ccedil;&atilde;o.
Por exemplo, a seguinte declara&ccedil;&atilde;o falha em um ambiente servidor:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">select 1, 2 from t1 for update of c11</div></pre>
O <span style="font-style: italic;">driver</span> cliente da rede olha as duas colunas da lista de sele&ccedil;&atilde;o,
e n&atilde;o consegue determinar a tabela de destino para atualizar/excluir
olhando no metadado da coluna.
Esta exig&ecirc;ncia n&atilde;o &eacute; necess&aacute;ria no ambiente incorporado.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>O <span style="font-style: italic;">driver</span> incorporado permite mudan&ccedil;as no nome da declara&ccedil;&atilde;o
quando existe um conjunto de resultados aberto no objeto da declara&ccedil;&atilde;o.
Isto n&atilde;o &eacute; suportado no ambiente servidor.</div></td></tr></table></div>Outras diferen&ccedil;as entre os conjuntos de resultados atualiz&aacute;veis em
ambiente servidor e incorporado podem ser encontradas na tabela a seguir.
<div><div style="font-weight: bold;"><span style="color: red;">Tabela 6. </span>Compara&ccedil;&atilde;o entre as funcionalidades dos conjuntos de resultados
atualiz&aacute;veis nos ambientes servidor e incorporado</div><table style="margin-top: 12pt; margin-bottom: 10pt; background-color: white; border-style: solid; border-width: 1pt; border-color: black;" valign="top"><thead><tr><td style="border-style: solid; border-width: 1pt; border-color: black; font-weight: bold; text-align: center; padding: 2pt; background-color: silver; margin-left: 2pt;" valign="top"><div>Ambiente incorporado</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; font-weight: bold; text-align: center; padding: 2pt; background-color: silver; margin-left: 2pt;" valign="top"><div>Ambiente servidor</div></td></tr></thead><tbody><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>Suportado <span style="font-style: italic;">updateString</span> nos tipos de dado SMALLINT, INTEGER, BIGINT, DECIMAL.</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>N&atilde;o suportado</div></td></tr><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>Suportado <span style="font-style: italic;">updateBytes</span> nos tipos de dado CHAR, VARCHAR, LONG VARCHAR.</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>N&atilde;o suportado</div></td></tr><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>Suportado <span style="font-style: italic;">updateTime</span> no tipo de dado TIMESTAMP.</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>N&atilde;o suportado</div></td></tr><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>Suportado <span style="font-style: italic;">updateObject</span> com valores nulos.</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>N&atilde;o suportado</div></td></tr><tr><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>Suportado <span style="font-style: italic;">updateClob</span> e <span style="font-style: italic;">updateBlob</span>.</div></td><td style="border-style: solid; border-width: 1pt; border-color: black; padding: 2pt; background-color: #faf4fa; margin-left: 2pt;" valign="top"><div>N&atilde;o suportado</div></td></tr></tbody></table></div></div></div></div><div><a name="N130D6"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="radminapps811974"></a><div></div>Diferen&ccedil;as nas mensagens de erro</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N130FF"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">O <span style="font-style: italic;">Network Server</span> relata apenas a primeira mensagem de erro ou de
advert&ecirc;ncia, se ocorrerem v&aacute;rios erros ou advert&ecirc;ncias para uma determinada
declara&ccedil;&atilde;o.
Por exemplo:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">ij&gt; create table ai (x int, y int generated always as identity
        (increment by 200000000));
ij&gt; insert into ai (x) values (1),(2),(3),(4),(5),(6),(7),
(8),(9),(10),(11),(12),(13),(14),(15),(16),(17),(18),(19);</div></pre></div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N13114"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">O <span style="font-style: italic;">Network Server</span> gera a seguinte mensagem de erro, com a mensagem
de exce&ccedil;&atilde;o anexada &agrave; mensagem de erro:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">ERROR 42Z24: Overflow occurred in identity for column 'Y' in table 'AI':
SQLSTATE: 22003: The resulting value is outside the range
for the data type INTEGER.</div></pre></div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N13129"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">Entretanto, o <span style="font-style: italic;">driver</span> incorporado do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
gera duas exce&ccedil;&otilde;es SQL:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">ERROR 42Z24: Overflow occurred in identity for column 'Y' in table 'AI'.</div></pre><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">ERROR 22003: The resulting value is outside the range for the data type INTEGER.</div></pre></div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N1314A"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Isto se deve ao fato do <span style="font-style: italic;">driver</span> cliente da rede somente relatar
uma <span style="font-style: italic;">SQLException</span> ou <span style="font-style: italic;">SQLWarning</span> por declara&ccedil;&atilde;o.</div></div></div></div><div><a name="N131AD"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="cadminapps49914"></a><div></div>Diferen&ccedil;as na autentica&ccedil;&atilde;o do usu&aacute;rio</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Quando se executa o
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
no modo incorporado, ou quando se utiliza o <span style="font-style: italic;">Network Server</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>,
pode-se habilitar ou desabilitar a autentica&ccedil;&atilde;o do usu&aacute;rio no lado servidor.
Entretanto, quando se utiliza o <span style="font-style: italic;">Network Server</span> o mecanismo de seguran&ccedil;a
padr&atilde;o (<span style="font-family: Courier;">CLEAR_TEXT_PASSWORD</span>) requer o fornecimento tanto do
nome do usu&aacute;rio quanto da senha.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Al&eacute;m do mecanismo de seguran&ccedil;a padr&atilde;o que emprega nome de usu&aacute;rio e senha,
<span style="font-style: italic;">org.apache.derby.jdbc.ClientDataSource.CLEAR_TEXT_PASSWORD_SECURITY</span>,
o <span style="font-style: italic;">Network Server</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
suporta os seguintes mecanismos de seguran&ccedil;a:</div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="font-style: italic;">Identifica&ccedil;&atilde;o do usu&aacute;rio
(</span><span style="font-family: Courier;"><span style="font-style: italic;">org.apache.derby.jdbc.ClientDataSource.USER_ONLY_SECURITY)</span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Quando se utiliza este mecanismo, deve ser especificada apenas a propriedade
usu&aacute;rio.</div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="font-style: italic;">Identifica&ccedil;&atilde;o do usu&aacute;rio criptografada e senha criptografada
(org.apache.derby.jdbc.ClientDataSource.ENCRYPTED_USER_ AND_PASSWORD_SECURITY)</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Quando se utiliza este mecanismo, tanto a senha quanto a identifica&ccedil;&atilde;o do
usu&aacute;rio s&atilde;o criptografadas.</div></div></td></tr></table></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O nome de usu&aacute;rio especificado na conex&atilde;o ser&aacute; o mesmo nome do esquema padr&atilde;o
para a conex&atilde;o, caso exista um esquema com este nome.
Para obter mais informa&ccedil;&otilde;es sobre nomes de esquemas e de usu&aacute;rios, deve ser
consultado o <span style="font-style: italic;"><span style="border-right-width: 0pt; border-left-width: 0pt;"><span style="font-style: italic;">Guia do Desenvolvedor do Derby</span></span></span>.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Se for especificado qualquer outro mecanismo de seguran&ccedil;a, ser&aacute; recebida uma
exce&ccedil;&atilde;o.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Para mudar o mecanismo padr&atilde;o, pode ser especificado outro
mecanismo de seguran&ccedil;a como uma propriedade ou na URL (utilizando o atributo
<span style="font-style: italic;">securityMechanism </span>), ao estabelecer a conex&atilde;o.</div></div><div><a name="N132F7"></a><div style="font-size: 11pt; font-weight: bold; margin-left: 72pt;"><a name="cadminapps811631"></a><div></div>O Network Server e a autentica&ccedil;&atilde;o de usu&aacute;rio, quando a mesma est&aacute; habilitada no Derby: </div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Quando a autentica&ccedil;&atilde;o de usu&aacute;rio est&aacute; habilitada no
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>,
pode ser utilizado o mecanismo de seguran&ccedil;a padr&atilde;o (nome de usu&aacute;rio e senha),
ou pode ser especificado que o mecanismo de seguran&ccedil;a deve ser nome de usu&aacute;rio
e senha criptografados.</div></div></div><div><a name="N13349"></a><div style="font-size: 11pt; font-weight: bold; margin-left: 72pt;"><a name="cadminapps811656"></a><div></div>O Network Server e a autentica&ccedil;&atilde;o de usu&aacute;rio, quando a mesma est&aacute; desabilitada no Derby: </div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Quando a autentica&ccedil;&atilde;o de usu&aacute;rio est&aacute; desabilitada no
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>,
pode ser utilizada qualquer uma das op&ccedil;&otilde;es de mecanismo de seguran&ccedil;a.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Deve ser especificado o nome do usu&aacute;rio e a senha em todos os mecanismos de
seguran&ccedil;a, exceto <span style="font-style: italic;">USER_ONLY_SECURITY</span>.
Entretanto, como a autentica&ccedil;&atilde;o de usu&aacute;rio est&aacute; desabilitada no servidor
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>,
o nome de usu&aacute;rio e senha fornecidos n&atilde;o precisam ser reconhecidos como v&aacute;lidos
pelo <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>.</div></div></div><div><a name="N133B2"></a><div style="font-size: 11pt; font-weight: bold; margin-left: 72pt;"><a name="tadminapps811695"></a><div></div>Habilita&ccedil;&atilde;o do mecanismo de seguran&ccedil;a de identifica&ccedil;&atilde;o do usu&aacute;rio e senha criptografados: </div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N133EA"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Para utilizar o mecanismo de seguran&ccedil;a de identifica&ccedil;&atilde;o do usu&aacute;rio e senha
criptografados, &eacute; necess&aacute;ria a JCE (Java Cryptography Extension) da IBM,
vers&atilde;o 1.2.1 ou mais recente, que pode ser utilizada com qualquer vers&atilde;o da
<span style="border-right-width: 0pt; border-left-width: 0pt;"><span style="border-right-width: 0pt; border-left-width: 0pt;">Java<span style="font-size: 75%;">(TM)</span></span> 2 Platform, Standard Edition, Vers&atilde;o 1.2 (J2SE)</span>
da IBM ou da  Sun.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O <span style="font-style: italic;">IBM Developer Kit</span> para a <span style="font-style: italic;">Plataforma Java 1.4</span>, ou mais
recente, vem com a JCE da IBM, portanto n&atilde;o &eacute; necess&aacute;rio instalar a JCE da IBM
em separado.
Caso se tenha uma vers&atilde;o mais antiga do <span style="font-style: italic;">IBM Developer Kit</span> para a
plataforma Java, ou outra ferramenta de desenvolvimento de software, devem ser
efetuadas as seguintes etapas:</div></div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div>1. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Copiar os seguintes arquivos <span style="font-style: italic;">jar</span> da JCE da IBM para o diret&oacute;rio
<span style="font-style: italic;">jre/lib/ext</span> do local de instala&ccedil;&atilde;o do SDK da IBM:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>ibmjceprovider.jar</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>ibmjcefw.jar</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>ibmpkderby.jar</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>ibmpkcs11.jar</div></td></tr></table></div></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>2. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Modificar o arquivo <span style="font-style: italic;">java.security</span> no diret&oacute;rio <span style="font-style: italic;">jre/lib/security</span>.
Na se&ccedil;&atilde;o que lista os provedores (e ordem de prefer&ecirc;ncia), substituir o texto
por:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">security.provider.1=sun.security.provider.Sun
security.provider.2=com.ibm.crypto.provider.IBMJCE</div></pre><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;"><div><span style="font-weight: bold; border-right-width: 0pt; border-left-width: 0pt;">Note: </span>  Se a JCE da IBM estiver sendo instalada no <span style="font-style: italic;">Java Development Kit</span>
da Sun, as duas linhas devem ser especificadas na ordem mostrada.</div></div></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>3. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Para utilizar o mecanismo de identifica&ccedil;&atilde;o do usu&aacute;rio e senha
criptografados durante a conex&atilde;o utilizando o cliente da rede, deve ser
especificado <span style="font-family: Courier;">securityMechanism</span> na propriedade da conex&atilde;o.</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Se for inicializado um banco de dados criptografado no
<span style="font-style: italic;">Network Server</span>, os usu&aacute;rios poder&atilde;o se conectar ao banco de dados sem
fornecer a <span style="font-family: Courier;">bootPassword</span>.
A primeira conex&atilde;o com o banco de dados dever&aacute; fornecer a
<span style="font-family: Courier;">bootPassword</span>, mas as conex&otilde;es subseq&uuml;entes n&atilde;o precisar&atilde;o
fornecer.
Para interromper o acesso ao banco de dados criptografado, &eacute; utilizada a op&ccedil;&atilde;o
<span style="font-family: Courier;">shutdown=true</span> para parar o banco de dados.</div></div></td></tr></table></div></div></div></div></div><div><a name="N134E2"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="tadminappssettingportnumbers"></a><div></div>Defini&ccedil;&atilde;o do n&uacute;mero da porta</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N1350B"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Por padr&atilde;o, o <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
utilizando o <span style="font-style: italic;">Network Server</span> escuta na porta TCP/IP de n&uacute;mero 1527.
Se for desejado utilizar um n&uacute;mero de porta diferente, esta pode ser
especificada na linha de comando ao inicializar o <span style="font-style: italic;">Network Server</span>.
Por exemplo:</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">java org.apache.derby.drda.NetworkServerControl start -p 1088</div></pre></div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div>1. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Entretanto, &eacute; melhor especificar o n&uacute;mero da porta utilizando um dos
seguintes m&eacute;todos:</span><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Alterar os scripts <span style="font-style: italic;">startNetworkServer.bat</span> ou
<span style="font-style: italic;">startNetworkServer.ksh</span></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Utilizar a propriedade <span style="font-family: Courier;">derby.drda.portNumber</span>
em <span style="font-family: Courier;">derby.properties</span></div></td></tr></table></div></div></td></tr></table></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N1355D"></a><span></span>Para obter mais informa&ccedil;&otilde;es deve ser consultado
<span style="color: blue;"><a href="#tadmincbdjhhfd">Inicializa&ccedil;&atilde;o do Network Server</a></span>.</div></div></div></div><div><a name="N13612"></a><div style="padding-top: 1pc; margin-bottom: 5pt; font-size: 14pt; font-weight: bold;"><div style="border-right-width: 0pt; border-left-width: 0pt; border-top-width: 1pt; border-top-color: black;"><a name="cadminconfig86869"></a><div></div>Gerenciamento do Network Server do Derby</div></div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; margin-left: 72pt;">O <span style="font-style: italic;">Network Server</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
pode executar como um servidor aut&ocirc;nomo, com o
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
como uma parte incorporada do aplicativo.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O <span style="font-style: italic;">Network Server</span> pode ser gerenciado utilizando scripts do
interpretador de comandos (<span style="font-style: italic;">shell</span>), a linha de comando, ou a API do
<span style="font-style: italic;">Network Server</span>.
O <span style="font-style: italic;">Network Server</span> tamb&eacute;m pode ser gerenciado remotamente utilizando a
interface <span style="font-style: italic;">servlet</span>.
Para obter mais informa&ccedil;&otilde;es sobre como inicializar e parar o
<span style="font-style: italic;">Network Server</span> utilizando a interface <span style="font-style: italic;">servlet</span>, deve ser
consultado <span style="color: blue;"><a href="#cadminservlet98430">Gerenciamento remoto do Network Server do Derby utilizando a interface servlet</a></span>.</div></div><div><a name="N136FE"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="cadminconfigoverview"></a><div></div>Vis&atilde;o geral</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O <span style="font-style: italic;">Network Server</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
&eacute; inicializado utilizando a linha de comando, ou utilizando a API do servidor
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span> (O
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
fornece scripts para inicializar o servidor a partir da linha de comando).
Antes de inicializar o servidor, provavelmente dever&atilde;o ser definidas algumas
propriedades do <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
e do <span style="font-style: italic;">Network Server</span>.</div></div><div><a name="N1377F"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="tadminconfig813694"></a><div></div>Utiliza&ccedil;&atilde;o da API do NetworkServerControl</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N137A3"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">&Eacute; necess&aacute;rio criar uma inst&acirc;ncia da classe <span style="font-style: italic;">NetworkServerControl</span>
quando se utiliza a API. Esta classe possui dois m&eacute;todos construtores:</div><div><span style="font-weight: bold; border-right-width: 0pt; border-left-width: 0pt;">Note: </span>  Antes de habilitar a conex&atilde;o a partir de outros sistemas, deve haver
certeza de estar executando sob o gerenciador de seguran&ccedil;a.</div></div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">NetworkServerControl()</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Este m&eacute;todo construtor cria uma inst&acirc;ncia que escuta na porta padr&atilde;o (1527),
ou na porta definida pela propriedade <span style="font-family: Courier;">derby.drda.portNumber</span>.
Tamb&eacute;m escuta no hospedeiro definido pela propriedade
<span style="font-family: Courier;">derby.drda.host</span>, ou no endere&ccedil;o de retorno (<span style="font-style: italic;">loopback</span>)
se a propriedade n&atilde;o estiver definida.
Este &eacute; o construtor padr&atilde;o; n&atilde;o permite conex&atilde;o remota.
Equivale a chamar NetworkServerControl(InetAddress.getByName("localhost"),1527),
se nenhuma propriedade estiver definida.</div></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">NetworkServerControl (InetAddress address, int portNumber)</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">Este m&eacute;todo construtor cria uma inst&acirc;ncia que escuta no n&uacute;mero da porta
especificado e no endere&ccedil;o especificado.
<span style="font-family: Courier;">InetAddress</span> &eacute; passado para <span style="font-family: Courier;">ServerSocket</span>.
NULL &eacute; um valor de endere&ccedil;o inv&aacute;lido.
Os exemplos a seguir mostram como deve ser feito para permitir o
<span style="font-style: italic;">Network Server</span> aceitar conex&otilde;es de outros hospedeiros:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">// Aceitar conex&otilde;es de outros hospedeiro em um sistema IPv4
NetworkServerControl serverControl =
  new NetworkServerControl(InetAddress.getByName("0.0.0.0"),1527);</div></pre><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">// Aceitar conex&otilde;es de outros hospedeiro em um sistema IPv6
NetworkServerControl serverControl =
  new NetworkServerControl(InetAddress.getByName("::"),1527);</div></pre></div></div></div></td></tr></table></div></div></div></div><div><a name="N1382D"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="tadminconfigsettingnetwrokserverproperties"></a><div></div>Defini&ccedil;&atilde;o das propriedades do Network Server</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N13856"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">As propriedades do <span style="font-style: italic;">Network Server</span> podem ser especificadas de tr&ecirc;s
maneiras:
<div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Na linha de comando</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Nos arquivos <span style="font-family: Courier;">.bat</span> e <span style="font-family: Courier;">.ksh</span> (definindo as
propriedades executando <span style="font-family: Courier;">java -D</span>)</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>No arquivo <span style="font-family: Courier;">derby.properties</span>.</div></td></tr></table></div></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">As propriedades presentes na linha de comando, ou nos arquivos
<span style="font-family: Courier;">.bat</span> e <span style="font-family: Courier;">.ksh</span>, t&ecirc;m preced&ecirc;ncia sobre as
propriedades no arquivo <span style="font-family: Courier;">derby.properties</span>.
Os argumentos inclu&iacute;dos nos comandos emitidos na linha de comando t&ecirc;m
preced&ecirc;ncia sobre os valores das propriedades.</div></div></div><div><a name="N13970"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="radmindrdahost"></a><div></div>derby.drda.host</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N1398A"></a><span></span>Faz o <span style="font-style: italic;">Network Server</span> escutar na interface de rede especificada.
Esta propriedade permite que v&aacute;rias inst&acirc;ncias do <span style="font-style: italic;">Network Server</span>
executem em uma mesma m&aacute;quina, cada uma utilizando sua pr&oacute;pria combina&ccedil;&atilde;o &uacute;nica
de hospedeiro:porta.
&Eacute; necess&aacute;rio definir o hospedeiro com conex&otilde;es remotas habilitadas.
Por padr&atilde;o, o <span style="font-style: italic;">Network Server</span> escuta apenas no endere&ccedil;o de retorno
(<span style="font-style: italic;">loopback</span>).
Se a propriedade for definida como 0.0.0.0, o <span style="font-style: italic;">Network Server</span> escutar&aacute;
em todas as interfaces.
Deve haver certeza de estar executando sob o gerenciador de seguran&ccedil;a, e que
a autoriza&ccedil;&atilde;o de usu&aacute;rio est&aacute; habilitada, antes de habilitar as conex&otilde;es
remotas com esta propriedade.</div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N139AD"></a><span></span><div style="font-weight: bold;">Sintaxe</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">derby.drda.host=<span style="font-style: italic;">nome-do-hospedeiro</span></div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N139C1"></a><span></span><div style="font-weight: bold;">Padr&atilde;o</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Se o nome do hospedeiro n&atilde;o for especificado, o <span style="font-style: italic;">Network Server</span>
escutar&aacute; no endere&ccedil;o de retorno da m&aacute;quina corrente (localhost).</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N139D5"></a><span></span><div style="font-weight: bold;">Exemplo</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><span style="font-weight: bold;">derby.drda.host=meuhospedeiro</span></div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N139E8"></a><span></span><div style="font-weight: bold;">Est&aacute;tico ou din&acirc;mico</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Est&aacute;tico. O <span style="font-style: italic;">Network Server</span> dever&aacute; ser reinicializado para
a altera&ccedil;&atilde;o produzir efeito.</div></div></div></div><div><a name="N13A98"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="radmindrdakeepalive"></a><div></div>derby.drda.keepAlive</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N13AB2"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Indica se SO_KEEPALIVE estar&aacute; habilitado nos soquetes.
O mecanismo <span style="font-style: italic;">keepAlive</span> &eacute; utilizado para detectar clientes desconectados
inesperadamente.
&Eacute; solicitado do cliente uma prova de que est&aacute; vivo (<span style="font-style: italic;">keepalive probe</span>),
se passar um longo tempo (por padr&atilde;o, mais de duas horas) sem que nenhum dado
seja enviado ou recebido.
A propriedade <span style="font-style: italic;">drda.keepAlive</span> &eacute; utilizada para detectar e limpar
conex&otilde;es de clientes em m&aacute;quinas desligadas, ou que se desconectaram
inesperadamente.</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N13ACD"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Se a propriedade for definida como falsa, o
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
n&atilde;o tentar&aacute; limpar clientes desconectados.
O mecanismo <span style="font-style: italic;">keepAlive</span> dever&aacute; ser desabilitado se os clientes precisarem
continuar o trabalho sem reconectar, mesmo ap&oacute;s terem se desconectado da rede
por algum tempo.
Para desabilitar os testes de <span style="font-style: italic;">keepAlive</span> nas conex&otilde;es do
<span style="font-style: italic;">Network Server</span>, esta propriedade dever&aacute; ser definida como falsa.</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N13AEE"></a><span></span><div style="font-weight: bold;">Sintaxe</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">derby.drda.keepAlive=[true|false]</div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N13AFD"></a><span></span><div style="font-weight: bold;">Padr&atilde;o</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">True.</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N13B0B"></a><span></span><div style="font-weight: bold;">Exemplo</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">derby.drdra.keepAlive=false</div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N13B1A"></a><span></span><div style="font-weight: bold;">Est&aacute;tico ou din&acirc;mico</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Est&aacute;tico. O <span style="font-style: italic;">Network Server</span> dever&aacute; ser reinicializado para
a altera&ccedil;&atilde;o produzir efeito.</div></div></div></div><div><a name="N13BCA"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="radminconfigdb2jdrdalogconnections"></a><div></div>derby.drda.logConnections</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N13BE4"></a><span></span>Indica se as conex&otilde;es ser&atilde;o registradas.
Tamb&eacute;m controla o registro do n&uacute;mero da conex&atilde;o.
Se o rastreamento do n&uacute;mero da conex&atilde;o estiver habilitado, ir&aacute; tanto para
o arquivo <span style="font-family: Courier;">derby.log</span> quanto para a console do servidor de rede.
</div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N13BEF"></a><span></span><div style="font-weight: bold;">Sintaxe</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">derby.drda.logConnections=[true|false]</div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N13BFE"></a><span></span><div style="font-weight: bold;">Padr&atilde;o</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Falso.</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N13C0C"></a><span></span><div style="font-weight: bold;">Exemplo</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><span style="font-weight: bold;">derby.drda.logConnections=true</span></div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N13C1F"></a><span></span><div style="font-weight: bold;">Est&aacute;tico ou din&acirc;mico</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Din&acirc;mico. O valor no sistema pode ser alterado utilizando um comando
ou a interface <span style="font-style: italic;">servlet</span>, ap&oacute;s o <span style="font-style: italic;">Network Server</span> ter sido
inicializado.</div></div></div></div><div><a name="N13CD5"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="radmindrdamaxthreads"></a><div></div>derby.drda.maxThreads</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N13CEF"></a><span></span>A propriedade <span style="font-style: italic;">derby.drda.maxThreads</span> &eacute; utilizada para definir
o n&uacute;mero m&aacute;ximo de <span style="font-style: italic;">threads</span> de conex&atilde;o que o <span style="font-style: italic;">Network Server</span>
ir&aacute; disponibilizar.
Se todas as <span style="font-style: italic;">threads</span> de conex&atilde;o estiverem sendo usadas no momento, e o
<span style="font-style: italic;">Network Server</span> j&aacute;  tiver disponibilizado o n&uacute;mero m&aacute;ximo de
<span style="font-style: italic;">threads</span>, as <span style="font-style: italic;">threads</span> ser&atilde;o compartilhadas utilizando a propriedade
<span style="font-style: italic;">derby.drda.timeSlice</span> para determinar quando as sess&otilde;es ser&atilde;o alternadas.
</div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N13D24"></a><span></span><div style="font-weight: bold;">Sintaxe</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><span style="border-right-width: 0pt; border-left-width: 0pt;">derby.drda.maxThreads=<span style="font-style: italic;">n&uacute;mero-de-threads</span></span></div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N13D3C"></a><span></span><div style="font-weight: bold;">Padr&atilde;o</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">0</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N13D4A"></a><span></span><div style="font-weight: bold;">Exemplo</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><span style="font-weight: bold;">derby.drda.maxThreads=50</span></div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N13D5D"></a><span></span><div style="font-weight: bold;">Est&aacute;tico ou din&acirc;mico</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Est&aacute;tico. O <span style="font-style: italic;">Network Server</span> dever&aacute; ser reinicializado para
a altera&ccedil;&atilde;o produzir efeito.</div></div></div></div><div><a name="N13E0D"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="radmindrdaminthreads"></a><div></div>derby.drda.minThreads</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N13E27"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">A propriedade <span style="font-style: italic;">derby.drda.minThreads</span> &eacute; utilizada para definir
o n&uacute;mero m&iacute;nimo de <span style="font-style: italic;">threads</span> de conex&atilde;o que o <span style="font-style: italic;">Network Server</span> ir&aacute;
disponibilizar.
Por padr&atilde;o, as <span style="font-style: italic;">threads</span> de conex&atilde;o s&atilde;o disponibilizadas de acordo com a
necessidade.</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N13E48"></a><span></span><div style="font-weight: bold;">Sintaxe</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><span style="border-right-width: 0pt; border-left-width: 0pt;">derby.drda.minThreads=<span style="font-style: italic;">n&uacute;mero-de-threads</span></span></div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N13E60"></a><span></span><div style="font-weight: bold;">Padr&atilde;o</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">0</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N13E6E"></a><span></span><div style="font-weight: bold;">Exemplo</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><span style="font-weight: bold;">derby.drda.minThreads=10</span></div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N13E81"></a><span></span><div style="font-weight: bold;">Est&aacute;tico ou din&acirc;mico</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Static. You must restart the
Network Server for changes to take effect.</div></div></div></div><div><a name="N13F2B"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="radminconfigportnumber"></a><div></div>derby.drda.portNumber</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N13F45"></a><span></span>Indica o n&uacute;mero da porta a ser utilizado.</div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N13F4A"></a><span></span><div style="font-weight: bold;">Sintaxe</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">derby.drda.portNumber=<span style="font-style: italic;">n&uacute;mero-da-porta</span></div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N13F5E"></a><span></span><div style="font-weight: bold;">Padr&atilde;o</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Se n&atilde;o for especificado nenhum n&uacute;mero de porta, o valor padr&atilde;o &eacute; 1527.</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N13F6C"></a><span></span><div style="font-weight: bold;">Exemplo</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><span style="font-weight: bold;">derby.drda.portNumber=1110</span></div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N13F7F"></a><span></span><div style="font-weight: bold;">Est&aacute;tico ou din&acirc;mico</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Est&aacute;tico. O <span style="font-style: italic;">Network Server</span> dever&aacute; ser reinicializado para
a altera&ccedil;&atilde;o produzir efeito.</div></div></div></div><div><a name="N1402F"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="radminconfigstartnetworkserver"></a><div></div>derby.drda.startNetworkServer</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N14049"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">A propriedade <span style="font-style: italic;">derby.drda.startNetworkServer</span> &eacute; utilizada para
simplificar a incorpora&ccedil;&atilde;o do <span style="font-style: italic;">Network Server</span> ao aplicativo Java.
Quando a propriedade <span style="font-style: italic;">derby.drda.startNetworkServer</span> est&aacute; definida como
verdade, o <span style="font-style: italic;">Network Server</span> inicializa automaticamente quando o
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
&eacute; inicializado
(neste contexto, o <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
&eacute; inicializado quando o <span style="font-style: italic;">driver</span> incorporado &eacute; carregado).
Somente pode ser inicializado um <span style="font-style: italic;">Network Server</span> em uma mesma JVM.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">NOTA:
Se o <span style="font-style: italic;">Network Server</span> for inicializado com esta propriedade definida como
verdade, o <span style="font-style: italic;">Network Server</span> ir&aacute; parar quando o aplicativo terminar, ou
se for parado de outra maneira (por exemplo, utilizando a API do Java, a
interface de linha de comando, ou parando o sistema Derby), o que ocorrer
primeiro.</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N14093"></a><span></span><div style="font-weight: bold;">Sintaxe</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">derby.drda.startNetworkServer=[true | false]</div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N140A2"></a><span></span><div style="font-weight: bold;">Padr&atilde;o</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Falso.</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N140B0"></a><span></span><div style="font-weight: bold;">Exemplo</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><span style="font-weight: bold;">derby.drda.startNetworkServer=true</span></div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N140C3"></a><span></span><div style="font-weight: bold;">Est&aacute;tico ou din&acirc;mico</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Est&aacute;tico. O <span style="font-style: italic;">Network Server</span> dever&aacute; ser parado e o
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span> reinicializado para
a altera&ccedil;&atilde;o produzir efeito.</div></div></div></div><div><a name="N14179"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="radmindrdatimeslice"></a><div></div>derby.drda.timeSlice</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N14193"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">A propriedade <span style="font-style: italic;">derby.drda.timeSlice</span> &eacute; utilizada para definir o
n&uacute;mero de milissegundos que cada conex&atilde;o ir&aacute; utilizar antes de alternar para
outra conex&atilde;o.
Esta propriedade &eacute; relevante apenas quando a propriedade
<span style="font-style: italic;">derby.drda.maxThreads</span> est&aacute; definida com um valor maior que zero.</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N141A8"></a><span></span><div style="font-weight: bold;">Sintaxe</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><span style="border-right-width: 0pt; border-left-width: 0pt;">derby.drda.timeSlice=<span style="font-style: italic;">milissegundos</span></span></div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N141C0"></a><span></span><div style="font-weight: bold;">Padr&atilde;o</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">0</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N141CE"></a><span></span><div style="font-weight: bold;">Exemplo</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><span style="font-weight: bold;">derby.drda.timeSlice=2000</span></div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N141E1"></a><span></span><div style="font-weight: bold;">Est&aacute;tico ou din&acirc;mico</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Est&aacute;tico. O <span style="font-style: italic;">Network Server</span> dever&aacute; ser reinicializado para
a altera&ccedil;&atilde;o produzir efeito.</div></div></div></div><div><a name="N14291"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="radminconfig"></a><div></div>derby.drda.traceAll</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N142AB"></a><span></span>Habilita o rastreamento de todas as sess&otilde;es.</div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N142B0"></a><span></span><div style="font-weight: bold;">Sintaxe</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">derby.drda.traceAll=[true|false]</div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N142BF"></a><span></span><div style="font-weight: bold;">Padr&atilde;o</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Falso.</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N142CD"></a><span></span><div style="font-weight: bold;">Exemplo</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><span style="font-weight: bold;">derby.drda.traceAll=true</span></div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N142E0"></a><span></span><div style="font-weight: bold;">Est&aacute;tico ou din&acirc;mico</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Din&acirc;mico. O valor no sistema pode ser alterado utilizando um comando
ou a interface <span style="font-style: italic;">servlet</span>, ap&oacute;s o <span style="font-style: italic;">Network Server</span> ter sido
inicializado.</div></div></div></div><div><a name="N14396"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="radminconfigdb2jdrdatracedirectory"></a><div></div>derby.drda.traceDirectory</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N143B0"></a><span></span>Indica o local dos arquivos de rastreamento.</div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N143B5"></a><span></span><div style="font-weight: bold;">Sintaxe</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">derby.drda.traceDirectory=<span style="font-style: italic;">diret&oacute;rio-dos-arquivos-de-rastreamento</span></div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N143C9"></a><span></span><div style="font-weight: bold;">Padr&atilde;o</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Se a propriedade <span style="font-style: italic;">derby.system.home</span> tiver sido definida, este &eacute; o
valor padr&atilde;o.
Caso contr&aacute;rio, o padr&atilde;o &eacute; o diret&oacute;rio corrente.</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N143DD"></a><span></span><div style="font-weight: bold;">Exemplo</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><span style="font-weight: bold;">derby.drda.traceDirectory=c:/<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>/rastreamento</span></div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N143F6"></a><span></span><div style="font-weight: bold;">Est&aacute;tico ou din&acirc;mico</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Din&acirc;mico. O valor no sistema pode ser alterado utilizando um comando
ou a interface <span style="font-style: italic;">servlet</span>, ap&oacute;s o <span style="font-style: italic;">Network Server</span> ter sido
inicializado.</div></div></div></div></div><div><a name="N144AC"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="tadminconfigverifyingstartup"></a><div></div>Verifica&ccedil;&atilde;o da inicializa&ccedil;&atilde;o</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; margin-left: 72pt;">Para verificar se o <span style="font-style: italic;">Network Server</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
est&aacute; executando no momento, &eacute; utilizado o comando <span style="font-style: italic;">ping</span>.</div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N144E2"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O comando <span style="font-style: italic;">ping</span> pode ser utilizado das seguintes maneiras:</div></div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Atrav&eacute;s do script <span style="font-style: italic;">NetworkServerControl.bat</span> nos sistemas
Windows, ou do script <span style="font-style: italic;">NetworkServerControl.ksh</span> nos sistemas UNIX, com o
comando <span style="font-weight: bold;">ping</span>.
Por exemplo:
</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">NetworkServerControl ping [-h &lt;<span style="font-style: italic;">nome-do-hospedeiro</span>&gt;;] [-p &lt;<span style="font-style: italic;">n&uacute;mero-da-porta</span>&gt;]</div></pre></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Atrav&eacute;s do comando <span style="font-style: italic;">NetworkServerControl</span>:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">java org.apache.derby.drda.NetworkServerControl
   ping [-h &lt;<span style="font-style: italic;">nome-do-hospedeiro</span>&gt;] [-p &lt;<span style="font-style: italic;">n&uacute;mero-da-porta</span>&gt;]</div></pre></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Atrav&eacute;s da API do <span style="font-style: italic;">NetworkServerControl</span> para verificar a
inicializa&ccedil;&atilde;o a partir de um aplicativo Java:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">ping();</div></pre></div></div></td></tr></table></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N14564"></a><span></span>O exemplo a seguir utiliza um m&eacute;todo para verificar a inicializa&ccedil;&atilde;o.
Este m&eacute;todo tenta a verifica&ccedil;&atilde;o durante um determinado n&uacute;mero de segundos:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">private static boolean isServerStarted(NetworkServerControl server, int ntries)
    {
        for (int i = 1; i &lt;= ntries; i ++)
        {
            try {
                Thread.sleep(500);
                server.ping();
                return true;
            }
            catch (Exception e) {
                if (i == ntries)
                    return false;
            }
        }
        return false;
    }</div></pre></div></div></div></div><div><a name="N145A8"></a><div style="padding-top: 1pc; margin-bottom: 5pt; font-size: 14pt; font-weight: bold;"><div style="border-right-width: 0pt; border-left-width: 0pt; border-top-width: 1pt; border-top-color: black;"><a name="cadminservlet98430"></a><div></div>Gerenciamento remoto do Network Server do Derby utilizando a interface servlet</div></div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; margin-left: 72pt;">Pode ser utilizada a interface <span style="font-style: italic;">servlet</span> para gerenciar o
<span style="font-style: italic;">Network Server</span> remotamente.
Para utilizar a interface <span style="font-style: italic;">servlet</span>, a <span style="font-style: italic;">servlet</span> dever&aacute; estar
registrada no servidor Web, e o servidor Web dever&aacute; ter conhecimento de
<span style="font-style: italic;">derby.system.home</span>.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O arquivo <span style="font-style: italic;">Web Application Archive</span> (WAR), <span style="font-style: italic;">derby.war</span>, para o
<span style="font-style: italic;">Network Server</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>,
est&aacute; dispon&iacute;vel em
<span style="font-style: italic;">$<span style="border-right-width: 0pt; border-left-width: 0pt;">DERBY_HOME</span>/lib</span>.
Este arquivo registra a <span style="font-style: italic;">servlet</span> do <span style="font-style: italic;">Network Server</span> no caminho
relativo <span style="font-style: italic;">/derbynet</span>.
Para obter instru&ccedil;&otilde;es sobre como instalar este arquivo, deve ser consultada a
documenta&ccedil;&atilde;o do servidor de aplicativos.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Por exemplo, se <span style="font-style: italic;">derby.war</span> for instalado no <span style="font-style: italic;">WebSphere Application
Server</span> com o contexto raiz <span style="font-family: Courier;">derby</span>, a URL do servidor
ser&aacute;:</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">http://&lt;servidor&gt;[:porta]/derby/derbynet</div></pre><div><span style="font-weight: bold; border-right-width: 0pt; border-left-width: 0pt;">Note: </span>  A m&aacute;quina <span style="font-style: italic;">servlet</span> n&atilde;o faz parte do <span style="font-style: italic;">Network Server</span>.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">A <span style="font-style: italic;">servlet</span> aceita os seguintes par&acirc;metros de configura&ccedil;&atilde;o opcionais:</div><div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">portNumber</span></div><div style="margin-left: 72pt + 16pt;">Especifica o n&uacute;mero da porta a ser utilizada pelo <span style="font-style: italic;">Network Server</span>.</div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">startNetworkServerOnInit</span></div><div style="margin-left: 72pt + 16pt;">Especifica que o <span style="font-style: italic;">Network Server</span> dever&aacute; ser inicializado quando a
<span style="font-style: italic;">servlet</span> for inicializada.</div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">tracingDirectory</span></div><div style="margin-left: 72pt + 16pt;">Especifica o local dos arquivos de rastreamento.
Se o diret&oacute;rio de rastreamento n&atilde;o for especificado, os arquivos de rastreamento
ser&atilde;o colocados em <span style="font-style: italic;">derby.system.home</span>.</div></div></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Esta se&ccedil;&atilde;o descreve as p&aacute;ginas da <span style="font-style: italic;">servlet</span>.</div></div><div><a name="N14746"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="radminservlet810694"></a><div></div>P&aacute;gina de inicializa&ccedil;&atilde;o</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; margin-left: 72pt;">A p&aacute;gina de inicializa&ccedil;&atilde;o &eacute; utilizada para inicializar o servidor.</div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N1476A"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Al&eacute;m de inicializar o <span style="font-style: italic;">Network Server</span>, a p&aacute;gina de inicializa&ccedil;&atilde;o pode
ser utilizada para realizar as seguintes a&ccedil;&otilde;es:</div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Habilitar o <span style="font-style: italic;">log</span> quando o servidor for inicializado.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Habilitar o rastreamento de todas as sess&otilde;es quando o servidor for
inicializado.</div></td></tr></table></div></div></div></div><div><a name="N147E2"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="radminservlet810717"></a><div></div>P&aacute;gina de execu&ccedil;&atilde;o</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N14801"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Se o <span style="font-style: italic;">Network Server</span> estiver executando (inicializado pela
inicializa&ccedil;&atilde;o da <span style="font-style: italic;">servlet</span>, ou de alguma outra forma), &eacute; mostrada a
p&aacute;gina de execu&ccedil;&atilde;o.
A p&aacute;gina de execu&ccedil;&atilde;o indica se o <span style="font-style: italic;">log</span> est&aacute; habilitado ou desabilitado,
se o rastreamento est&aacute; habilitado ou desabilitado, e se o rastreamento estiver
habilitado indica para qual sess&atilde;o.</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N1481C"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">A p&aacute;gina de execu&ccedil;&atilde;o pode ser utilizada para parar o servidor, e habilitar
ou desabilitar o <span style="font-style: italic;">log</span> e o rastreamento.
Est&atilde;o dispon&iacute;veis as seguintes op&ccedil;&otilde;es na p&aacute;gina de execu&ccedil;&atilde;o:</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N1482B"></a><span></span><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Habilitar ou desabilitar o <span style="font-style: italic;">log</span>.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Habilitar ou desabilitar o rastreamento de todas as sess&otilde;es.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Especificar a sess&atilde;o a ser rastreada (Se esta op&ccedil;&atilde;o for escolhida, ser&aacute;
exibida a p&aacute;gina de rastreamento de sess&atilde;o).</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Mudar o diret&oacute;rio de rastreamento (Se esta op&ccedil;&atilde;o for escolhida, ser&aacute;
exibida a p&aacute;gina de diret&oacute;rio de rastreamento).</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Especificar os par&acirc;metros de <span style="font-style: italic;">thread</span> do <span style="font-style: italic;">Network Server</span>
(Se esta op&ccedil;&atilde;o for escolhida, ser&aacute; exibida a p&aacute;gina de par&acirc;metros de
<span style="font-style: italic;">thread</span>).</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Parar o <span style="font-style: italic;">Network Server</span>.</div></td></tr></table></div></div></div></div><div><a name="N148C3"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="radminservlet810796"></a><div></div>P&aacute;gina de rastreamento da sess&atilde;o</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N148D0"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Se na p&aacute;gina de execu&ccedil;&atilde;o for escolhido especificar a sess&atilde;o a ser rastreada,
esta p&aacute;gina ser&aacute; mostrada. Deve ser fornecido o identificador da sess&atilde;o.</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N148D9"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">&Eacute; dada a op&ccedil;&atilde;o de habilitar ou desabilitar o rastreamento, ou retornar para
a p&aacute;gina principal da <span style="font-style: italic;">servlet</span>.
Quando se clica no bot&atilde;o <span style="font-style: italic;">Trace On/Off</span>, &eacute; mostrada uma informa&ccedil;&atilde;o
indicando o estado corrente do rastreamento.</div></div></div></div><div><a name="N14942"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="radminservlet810822"></a><div></div>P&aacute;gina do diret&oacute;rio de rastreamento</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N1494F"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Se na p&aacute;gina de execu&ccedil;&atilde;o for escolhido mudar o diret&oacute;rio de rastreamento,
esta p&aacute;gina ser&aacute; mostrada.
Deve ser fornecido o diret&oacute;rio de rastreamento.</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N14958"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Pode-se tanto definir o diret&oacute;rio de rastreamento, quanto retornar para a
p&aacute;gina principal da <span style="font-style: italic;">servlet</span>.
S&atilde;o exibidas informa&ccedil;&otilde;es adicionais, indicando o diret&oacute;rio corrente de
rastreamento, quando se clica no bot&atilde;o <span style="font-style: italic;">Trace Directory</span>.</div></div></div></div><div><a name="N149C1"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="radminservlet810910"></a><div></div>Defini&ccedil;&atilde;o de par&acirc;metros do Network Server</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N149CE"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Se na p&aacute;gina de execu&ccedil;&atilde;o for escolhido definir par&acirc;metros do
<span style="font-style: italic;">Network Server</span>, esta p&aacute;gina ser&aacute; mostrada.
Esta p&aacute;gina &eacute; utilizada para definir os novos par&acirc;metros.
Devem ser fornecidas as seguintes informa&ccedil;&otilde;es:</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N149DD"></a><span></span><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Novo n&uacute;mero m&aacute;ximo de <span style="font-style: italic;">threads</span></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Nova fatia de tempo (<span style="font-style: italic;">time slice</span>) da <span style="font-style: italic;">thread</span></div></td></tr></table></div>
Se o par&acirc;metro n&uacute;mero m&aacute;ximo de <span style="font-style: italic;">threads</span> ou o par&acirc;metro
fatia de tempo for deixado em branco, seu valor ser&aacute; deixado inalterado na
defini&ccedil;&atilde;o corrente.
</div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N14A06"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Deve-se clicar no bot&atilde;o <span style="font-style: italic;">Set Network Server Parameters</span>, para ver
os valores atualizados dos par&acirc;metros n&uacute;mero m&aacute;ximo de <span style="font-style: italic;">threads</span> e
fatia de tempo.</div></div></div></div></div><div><a name="N14A6F"></a><div style="padding-top: 1pc; margin-bottom: 5pt; font-size: 14pt; font-weight: bold;"><div style="border-right-width: 0pt; border-left-width: 0pt; border-top-width: 1pt; border-top-color: black;"><a name="cadminadvtops"></a><div></div>T&oacute;picos avan&ccedil;ados do Network Server do Derby</div></div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Esta se&ccedil;&atilde;o discute v&aacute;rios t&oacute;picos avan&ccedil;ados para os usu&aacute;rios do
<span style="font-style: italic;">Network Server</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>.</div></div><div><a name="N14B3A"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="cadminnetservsecurity"></a><div></div>Seguran&ccedil;a do Network Server</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Por padr&atilde;o, o <span style="font-style: italic;">Network Server</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
escuta apenas no <span style="font-style: italic;">localhost</span>.
Os clientes devem utilizar o nome de hospedeiro <span style="font-style: italic;">localhost</span> para se
conectarem.
Por padr&atilde;o, os clientes n&atilde;o podem acessar o <span style="font-style: italic;">Network Server</span> a partir de
outro hospedeiro.
Para habilitar conex&otilde;es a partir de outros hospedeiros, a propriedade
<span style="font-style: italic;">derby.drda.host</span> deve ser definida, ou o <span style="font-style: italic;">Network Server</span> deve ser
inicializado com a op&ccedil;&atilde;o <span style="font-family: Courier;"><span style="font-style: italic;">-h</span></span> no comando
<span style="font-family: Courier;"><span style="font-style: italic;">java org.apache.derby.drda.NetworkServerControl start</span></span>.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">No exemplo a seguir, o servidor escuta apenas no <span style="font-style: italic;">localhost</span> e os
clientes n&atilde;o podem acessar o servidor a partir de outro hospedeiro.</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><span style="font-weight: bold;">java org.apache.derby.drda.NetworkServerControl start</span></div></pre><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">No exemplo a seguir, o servidor executa na m&aacute;quina hospedeira
<span style="font-family: Courier;"><span style="font-style: italic;">servidor-amostra.dominio-amostra.com</span></span>, e tamb&eacute;m
escuta clientes em outros hospedeiros.
Os clientes devem especificar o servidor na URL ou no
<span style="font-family: Courier;">DataSource</span> como <span style="font-style: italic;">servidor-amostra.dominio-amostra.com</span>:</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><span style="font-weight: bold;">java org.apache.derby.drda.NetworkServerControl start
   -h servidor-amostra.dominio-amostra.com</span></div></pre><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">Para inicializar o <span style="font-style: italic;">Network Server</span> de tal forma que escute em todas as
interfaces, este deve ser inicializado com o endere&ccedil;o de IP
<span style="font-family: Courier;"><span style="font-style: italic;">0.0.0.0</span></span>, conforme mostrado no exemplo a seguir:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><span style="font-weight: bold;">java org.apache.derby.drda.NetworkServerControl start -h 0.0.0.0</span></div></pre></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O servidor inicializado com a op&ccedil;&atilde;o <span style="font-family: Courier;"><span style="font-style: italic;">-h 0.0.0.0</span></span>
escutar&aacute; as requisi&ccedil;&otilde;es de clientes originadas tanto em
<span style="font-family: Courier;"><span style="font-style: italic;">localhost</span></span> quanto em qualquer outra m&aacute;quina da rede.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Por&eacute;m, os comandos administrativos (por exemplo,
<span style="font-family: Courier;"><span style="font-style: italic;">org.apache.derby.drda.NetworkServerControl shutdown</span></span>)
somente podem ser executados no hospedeiro onde o servidor foi inicializado,
mesmo que o servidor tenha sido inicializado com a op&ccedil;&atilde;o
<span style="font-family: Courier;"><span style="font-style: italic;">-h</span></span>.</div></div></div><div><a name="N14C82"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="tadminnetservrun"></a><div></div>Execu&ccedil;&atilde;o do Network Server sob o gerenciador de seguran&ccedil;a</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N14CA1"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O <span style="font-style: italic;">Network Server</span> deve ser executado sob o gerenciador de seguran&ccedil;a do
Java.
Os pr&oacute;ximos exemplos mostram a utiliza&ccedil;&atilde;o de um arquivo de pol&iacute;tica de seguran&ccedil;a
exemplo.
Deve ser feito um ajuste fino nesta pol&iacute;tica de seguran&ccedil;a para adequ&aacute;-la &agrave;s
pr&oacute;prias necessidades.</div><div><span style="font-weight: bold; border-right-width: 0pt; border-left-width: 0pt;">CUIDADO: </span>  Abrir o servidor para todos os clientes,
sem limitar o acesso utilizando uma pol&iacute;tica de seguran&ccedil;a semelhante a do
exemplo a seguir, &eacute; um s&eacute;rio risco de seguran&ccedil;a.</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">// Conjunto de permiss&otilde;es recomendadas para inicializar o Network Server,
// assumindo que o diret&oacute;rio 'd:/<span style="border-right-width: 0pt; border-left-width: 0pt;">derby</span>/lib' seja seguro.
// Deve ser feito um ajuste fino baseado no pr&oacute;prio ambiente.
grant codeBase "file:d:/<span style="border-right-width: 0pt; border-left-width: 0pt;">derby</span>/lib/-" {
permission java.io.FilePermission "${derby.system.home}${/}-",
        "read, write, delete";
permission java.io.FilePermission "${derby.system.home}","read";
permission java.io.FilePermission "${user.dir}${/}-", "read, write, delete";
permission java.util.PropertyPermission "derby.*", "read";
permission java.util.PropertyPermission "user.dir", "read";
permission java.lang.RuntimePermission "createClassLoader";
permission java.net.SocketPermission "minhamaquinacliente", "accept";
};

// Conjunto de permiss&otilde;es requerido para parar o Network Server, assumindo
// que o diret&oacute;rio 'd:/<span style="border-right-width: 0pt; border-left-width: 0pt;">derby</span>/lib' seja seguro.
// Deve ser feito um ajuste fino baseado no pr&oacute;prio ambiente.
grant codeBase "file:d:/<span style="border-right-width: 0pt; border-left-width: 0pt;">derby</span>/lib/-"  {
// O que vem a seguir &eacute; requerido quando o servidor &eacute; inicializado com
// "-h localhost", ou sem a op&ccedil;&atilde;o -h.
permission java.net.SocketPermission "localhost", "accept, connect, resolve";
permission java.net.SocketPermission "127.0.0.1", "accept, connect, resolve";
// O que vem a seguir &eacute; requerido apenas quando o servidor &eacute; inicializado com a
// op&ccedil;&atilde;o -h &lt;hospedeiro&gt; (sen&atilde;o o acesso para "shutdown" ser&aacute; negado).
permission java.net.SocketPermission "&lt;hospedeiro&gt;:*", "accept, connect, resolve";
};</div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N14CD5"></a><span></span><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>O exemplo a seguir mostra como inicializar o <span style="font-style: italic;">Network Server</span> no
gerenciador de seguran&ccedil;a padr&atilde;o (escutando apenas os clientes no
<span style="font-family: Courier;">localhost</span>, que &eacute; o comportamento padr&atilde;o quando a op&ccedil;&atilde;o
<span style="font-family: Courier;">-h</span> n&atilde;o &eacute; utilizada para inicializar o servidor).
Este exemplo assume que o arquivo de pol&iacute;tica de seguran&ccedil;a se encontra em
<span style="font-family: Courier;">d:/nwsvr.policy</span>.
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">java -Djava.security.manager -Djava.security.policy=d:/nwsvr.policy
org.apache.derby.drda.NetworkServerControl start </div></pre></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>O mesmo comportamento pode ser obtido utilizando a op&ccedil;&atilde;o <span style="font-family: Courier;">-h</span>
ao inicializar o servidor, conforme mostrado no exemplo a seguir:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">java -Djava.security.manager -Djava.security.policy=d:/nwsvr.policy
org.apache.derby.drda.NetworkServerControl start -h localhost</div></pre></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>O exemplo a seguir mostra como inicializar o <span style="font-style: italic;">Network Server</span>
(assumindo que o servidor ser&aacute; inicializado na m&aacute;quina hospedeira
<span style="font-style: italic;">meuservidor</span>) no gerenciador de seguran&ccedil;a padr&atilde;o (escutando requisi&ccedil;&otilde;es de
clientes originadas a partir de outras m&aacute;quinas apenas).
Este exemplo assume que o arquivo de pol&iacute;tica de seguran&ccedil;a se encontra em
<span style="font-family: Courier;">d:/nwsvr.policy</span>.
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">java -Djava.security.manager -Djava.security.policy=d:/nwsvr.policy
org.apache.derby.drda.NetworkServerControl start -h <span style="font-style: italic;">meuservidor</span></div></pre></div></td></tr></table></div></div></div></div><div><a name="N14D89"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="tadminconfiguringthenetworkserver"></a><div></div>Configura&ccedil;&atilde;o do Network Server para tratar as conex&otilde;es</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N14DA3"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O <span style="font-style: italic;">Network Server</span> pode ser configurado para utilizar um n&uacute;mero
espec&iacute;fico de <span style="font-style: italic;">threads</span> para tratar as conex&otilde;es.
A configura&ccedil;&atilde;o pode ser alterada na linha de comando, ou utilizando a interface
<span style="font-style: italic;">servlet</span>.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O n&uacute;mero m&iacute;nimo de <span style="font-style: italic;">threads</span> &eacute; o n&uacute;mero de <span style="font-style: italic;">threads</span> inicializadas
quando o <span style="font-style: italic;">Network Server</span> &eacute; inicializado.
Este valor &eacute; especificado como uma propriedade,
<span style="font-family: Courier;">derby.drda.minThreads = &lt;<span style="font-style: italic;">min</span>&gt;</span>.
O n&uacute;mero m&aacute;ximo de <span style="font-style: italic;">threads</span> &eacute; o n&uacute;mero m&aacute;ximo de <span style="font-style: italic;">threads</span> que
ser&atilde;o utilizadas pelas conex&otilde;es.
Se existirem mais conex&otilde;es ativas que o n&uacute;mero de <span style="font-style: italic;">threads</span> dispon&iacute;veis,
as conex&otilde;es extras dever&atilde;o aguardar at&eacute; uma <span style="font-style: italic;">thread</span> ficar dispon&iacute;vel.
As <span style="font-style: italic;">threads</span> podem se tornar dispon&iacute;veis ap&oacute;s um tempo espec&iacute;fico, que &eacute;
verificado apenas quando a <span style="font-style: italic;">thread</span> termina o processamento da comunica&ccedil;&atilde;o.</div></div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">O n&uacute;mero m&aacute;ximo de <span style="font-style: italic;">threads</span> pode ser alterado utilizando o seguinte
comando:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">java org.apache.derby.drda.NetworkServerControl maxthreads &lt;<span style="font-style: italic;">max</span>&gt; [-h &lt;<span style="font-style: italic;">nome-do-hospedeiro</span>&gt;]
[-p &lt;<span style="font-style: italic;">n&uacute;mero-da-porta</span>&gt;] </div></pre></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Tamb&eacute;m pode ser utilizada a propriedade
<span style="font-family: Courier;">derby.drda.maxThreads</span> para definir o valor m&aacute;ximo.
Um valor &lt;<span style="font-style: italic;">m&aacute;ximo</span>&gt; igual a zero significa que n&atilde;o h&aacute; valor m&aacute;ximo,
e que ser&aacute; gerada uma nova <span style="font-style: italic;">thread</span> para a conex&atilde;o se n&atilde;o houver uma
<span style="font-style: italic;">thread</span> dispon&iacute;vel no momento.
Este &eacute; o padr&atilde;o.
Os valores &lt;<span style="font-style: italic;">m&aacute;ximo</span>&gt; e &lt;<span style="font-style: italic;">m&iacute;nimo</span>&gt; s&atilde;o armazenados como
inteiros, portanto o valor m&aacute;ximo te&oacute;rico &eacute; 2147483647 (o tamanho m&aacute;ximo de um
inteiro).
Mas na pr&aacute;tica o valor m&aacute;ximo &eacute; determinado pela configura&ccedil;&atilde;o da m&aacute;quina.</div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Para alterar o tempo que uma <span style="font-style: italic;">thread</span> deve trabalhar na requisi&ccedil;&atilde;o
de uma sess&atilde;o e verificar se existem sess&otilde;es aguardando, deve ser utilizado o
seguinte comando:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">java org.apache.derby.drda.NetworkServerControl
timeslice &lt;<span style="font-style: italic;">milissegundos</span>&gt; [-h &lt;<span style="font-style: italic;">nome-do-hospedeiro</span>&gt;] [-p &lt;<span style="font-style: italic;">n&uacute;mero-da-porta</span>&gt;]</div></pre></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Tamb&eacute;m pode ser utilizada a propriedade <span style="font-style: italic;">derby.drda.timeSlice</span> para
definir esse valor.
O valor de 0 milissegundos indica que a <span style="font-style: italic;">thread</span> n&atilde;o vai parar de trabalhar
para a sess&atilde;o enquanto a sess&atilde;o n&atilde;o terminar.
O valor de -1 milissegundos indica que deve ser utilizado o valor padr&atilde;o.
O valor padr&atilde;o &eacute; 0.
O n&uacute;mero m&aacute;ximo de milissegundos que pode ser especificado &eacute; 2147483647
(o tamanho m&aacute;ximo de um inteiro).</div></div></div></td></tr></table></div></div></div><div><a name="N14EF3"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="tadminlogfile"></a><div></div>Controle do registro pela utiliza&ccedil;&atilde;o do arquivo de log</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N14F1C"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O <span style="font-style: italic;">Network Server</span> utiliza o arquivo <span style="font-family: Courier;">derby.log</span> para
registrar os problemas encontrados.
Tamb&eacute;m registra as conex&otilde;es, quando a propriedade
<span style="font-family: Courier;">derby.drda.logConnections</span> est&aacute; definida com o valor
<span style="font-family: Courier;">true</span>.
O arquivo <span style="font-family: Courier;">derby.log</span> &eacute; criado quando o servidor
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
&eacute; inicializado.
O <span style="font-style: italic;">Network Server</span> ent&atilde;o registra a hora e a vers&atilde;o.
Se o arquivo de <span style="font-style: italic;">log</span> existir, ser&aacute; sobrescrito, a menos que a propriedade
<span style="font-family: Courier;">derby.infolog.append</span> esteja definida com o valor
<span style="font-family: Courier;">true</span>.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Quando o <span style="font-style: italic;">Network Server</span> est&aacute; registrando as conex&otilde;es, tamb&eacute;m registra
o n&uacute;mero da conex&atilde;o; a mensagem de registro &eacute; escrita tanto no arquivo
<span style="font-family: Courier;">derby.log</span>, quanto na console do <span style="font-style: italic;">Network Server</span>.</div></div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Para habilitar o registro da conex&atilde;o, pode ser utilizada a interface
<span style="font-style: italic;">servlet</span>, ou emitido o seguinte comando:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">java org.apache.derby.drda.NetworkServerControl
   logconnections on [-h &lt;<span style="font-style: italic;">nome-do-hospedeiro</span>&gt;] [-p &lt;<span style="font-style: italic;">n&uacute;mero-da-porta</span>&gt;]</div></pre></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Para desabilitar o registro da conex&atilde;o, pode ser utilizada a interface
<span style="font-style: italic;">servlet</span>, ou emitido o seguinte comando:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">java org.apache.derby.drda.NetworkServerControl
   logconnections off [-h &lt;<span style="font-style: italic;">nome-do-hospedeiro</span>&gt;][-p &lt;<span style="font-style: italic;">n&uacute;mero-da-porta</span>&gt;]</div></pre></div></div></td></tr></table></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N14FC6"></a><span></span>Para obter mais informa&ccedil;&otilde;es sobre o arquivo <span style="font-family: Courier;">derby.log</span>,
deve ser consultado o
<span style="font-style: italic;"><span style="border-right-width: 0pt; border-left-width: 0pt;"><span style="font-style: italic;">Guia do Desenvolvedor do Derby</span></span></span>.
</div></div></div><div><a name="N15036"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="tadmintracefacility"></a><div></div>Controle do rastreamento pela utiliza&ccedil;&atilde;o da facilidade de rastreamento</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N1505F"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">A facilidade de rastreamento deve ser utilizada apenas se estiver trabalhando
com o suporte t&eacute;cnico, e for pedida a informa&ccedil;&atilde;o de rastreamento.</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N15068"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Para obter informa&ccedil;&otilde;es sobre o gerenciamento da facilidade de
rastreamento utilizando a interface <span style="font-style: italic;">servlet</span>, deve ser consultado
<span style="color: blue;"><a href="#cadminservlet98430">Gerenciamento remoto do Network Server do Derby utilizando a interface servlet</a></span>.</div></div></div><div><a name="N150F5"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="tadminadv804410"></a><div></div>Habilita&ccedil;&atilde;o da facilidade de rastreamento</div><div style="margin-left: 72pt; font-size: 10pt;"><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div>1. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Habilitar o rastreamento para todas as sess&otilde;es especificando a seguinte
propriedade:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">derby.drda.traceAll=true </div></pre>
Como alternativa pode ser utilizado o seguinte comando, enquanto o
<span style="font-style: italic;">Network Server</span> estiver executando, para habilitar a facilidade de
rastreamento:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">java org.apache.derby.drda.NetworkServerControl
   trace on [-s &lt;<span style="font-style: italic;">n&uacute;mero-da-conex&atilde;o</span>&gt;] [-h &lt;<span style="font-style: italic;">nome-do-hospedeiro</span>&gt;][-p &lt;<span style="font-style: italic;">n&uacute;mero-da-porta</span>&gt;]</div></pre></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Se for especificado o &lt;<span style="font-style: italic;">n&uacute;mero-da-conex&atilde;o</span>&gt;, o rastreamento
ser&aacute; habilitado apenas para esta conex&atilde;o.</div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>2. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Definir o local dos arquivos de rastreamento especificando a seguinte
propriedade:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">derby.drda.traceDirectory=&lt;<span style="font-style: italic;">diret&oacute;rio-dos-arquivos-de-rastreamento</span>&gt;</div></pre></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">&Eacute; necess&aacute;rio especificar apenas o diret&oacute;rio onde os arquivos de
rastreamento v&atilde;o residir.
Os nomes dos arquivos de rastreamento s&atilde;o determinados pelo sistema.
Se n&atilde;o for definido o diret&oacute;rio de rastreamento, os arquivos de
rastreamento ser&atilde;o colocados em <span style="font-style: italic;">derby.system.home</span>.</div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>3. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Enquanto o <span style="font-style: italic;">Network Server</span> estiver executando, pode ser utilizado o
seguinte comando para definir o diret&oacute;rio de rastreamento:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">java org.apache.derby.drda.NetworkServerControl traceDirectory
&lt;<span style="font-style: italic;">diret&oacute;rio-dos-arquivos-de-rastreamento</span> &gt;[-h &lt;<span style="font-style: italic;">nome-do-hospedeiro</span>&gt;] [-p &lt;<span style="font-style: italic;">n&uacute;mero-da-porta</span>&gt;]</div></pre></div></div></td></tr></table></div></div></div><div><a name="N151AC"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="tadminadv804451"></a><div></div>Desabilita&ccedil;&atilde;o da facilidade de rastreamento</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N151B5"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">Deve ser utilizado o seguinte comando para desabilitar o rastreamento:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">java org.apache.derby.drda.NetworkServerControl trace off [-s &lt;<span style="font-style: italic;">n&uacute;mero-da-conex&atilde;o</span>&gt;]
[-h &lt;<span style="font-style: italic;">nome-do-hospedeiro</span>&gt;] [-p &lt;<span style="font-style: italic;">n&uacute;mero-da-porta</span>&gt;]</div></pre></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Os arquivos de rastreamento recebem o nome ServerX.trace, onde X &eacute; o
n&uacute;mero da conex&atilde;o.</div></div></div></div></div></div><div><a name="N151F9"></a><div style="padding-top: 1pc; margin-bottom: 5pt; font-size: 14pt; font-weight: bold;"><div style="border-right-width: 0pt; border-left-width: 0pt; border-top-width: 1pt; border-top-color: black;"><a name="radminsampleprograms"></a><div></div>Programas exemplo para o Network Server do Derby</div></div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N15213"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Esta se&ccedil;&atilde;o descreve v&aacute;rios programas exemplo para o <span style="font-style: italic;">Network Server</span>
do <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>, para os usu&aacute;rios
do <span style="font-style: italic;">Network Server</span>.</div></div></div><div><a name="N152AF"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="radminovnssample"></a><div></div>O programa exemplo NsSample</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; margin-left: 72pt;">O programa de demonstra&ccedil;&atilde;o <span style="font-style: italic;">NsSample</span> &eacute; um aplicativo JDBC
simples que interage com o <span style="font-style: italic;">Network Server</span>.</div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N152DF"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">O programa <span style="font-style: italic;">NsSample</span> realiza as seguintes tarefas:
<div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Inicializa o <span style="font-style: italic;">Network Server</span>.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Verifica se o <span style="font-style: italic;">Network Server</span> est&aacute; executando.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Carrega o <span style="font-style: italic;">driver</span> cliente da rede.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Cria o banco de dados <span style="font-style: italic;">NsSampledb</span>, se este n&atilde;o existir.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Verifica se o esquema j&aacute; existe, e se n&atilde;o existir cria o esquema que inclui
a tabela SAMPLETBL e seus &iacute;ndices correspondentes.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Conecta ao banco de dados.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Carrega o esquema inserindo dados.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Inicializa as <span style="font-style: italic;">threads</span> cliente para realizar as opera&ccedil;&otilde;es de banco
de dados relacionadas.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Faz com que cada cliente realize opera&ccedil;&otilde;es da DML (sele&ccedil;&atilde;o, inser&ccedil;&atilde;o,
exclus&atilde;o e atualiza&ccedil;&atilde;o) utilizando chamadas JDBC.
Por exemplo, uma <span style="font-style: italic;">thread</span> cliente estabelece uma conex&atilde;o incorporada para
realizar opera&ccedil;&otilde;es de banco de dados, enquanto outra <span style="font-style: italic;">thread</span> cliente
estabelece uma conex&atilde;o cliente com o <span style="font-style: italic;">Network Server</span> para realizar
opera&ccedil;&otilde;es de banco de dados.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Aguarda as <span style="font-style: italic;">threads</span> cliente terminarem as tarefas.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Encerra o <span style="font-style: italic;">Network Server</span> e termina a demonstra&ccedil;&atilde;o.</div></td></tr></table></div></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">Devem ser instalados os seguintes arquivos no diret&oacute;rio
<span style="font-family: Courier;">%<span style="border-right-width: 0pt; border-left-width: 0pt;">DERBY_HOME</span>%\demo\nserverdemo\</span>
antes de executar o programa exemplo:
<div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="font-family: Courier;">NsSample.java</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Este &eacute; o ponto de entrada do programa exemplo.
O programa inicializa duas <span style="font-style: italic;">threads</span> cliente.
A primeira <span style="font-style: italic;">thread</span> cliente estabelece uma conex&atilde;o incorporada para
realizar as opera&ccedil;&otilde;es de banco de dados, e a segunda <span style="font-style: italic;">thread</span> cliente
estabelece uma conex&atilde;o cliente com o <span style="font-style: italic;">Network Server</span> para realizar
opera&ccedil;&otilde;es de banco de dados.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">As seguintes constantes podem ser alteradas para modificar o programa de
amostra:</div><div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">NUM_ROWS</span></div><div style="margin-left: 72pt + 32pt;">O n&uacute;mero de linhas que devem ser carregadas inicialmente no esquema.</div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">ITERATIONS</span></div><div style="margin-left: 72pt + 32pt;">O n&uacute;mero de intera&ccedil;&otilde;es nas quais cada <span style="font-style: italic;">thread</span> cliente realiza um
trabalho relacionado de banco de dados.</div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">NUM_CLIENT_THREADS</span></div><div style="margin-left: 72pt + 32pt;">O n&uacute;mero de clientes com que se deseja executar o programa.</div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">NETWORKSERVER_PORT</span></div><div style="margin-left: 72pt + 32pt;">A porta onde o <span style="font-style: italic;">Network Server</span> est&aacute; executando.</div></div></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="font-family: Courier;">NsSampleClientThread.java</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">Este arquivo cont&eacute;m duas classes Java:
<div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>A classe <span style="font-style: italic;">NsSampleClientThread</span> estende <span style="font-style: italic;">Thread</span> e cria uma
inst&acirc;ncia de <span style="font-style: italic;">NsSampleWork</span>.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>A classe <span style="font-style: italic;">NsSampleWork</span> cont&eacute;m tudo que &eacute; requerido para realizar as
opera&ccedil;&otilde;es da DML utilizando chamadas JDBC.
O m&eacute;todo <span style="font-style: italic;">doWork</span> da classe <span style="font-style: italic;">NsSampleWork</span> representa todo o trabalho
realizado como parte deste programa exemplo.</div></td></tr></table></div></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="font-family: Courier;">NetworkServerUtil.java</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Este arquivo cont&eacute;m m&eacute;todos auxiliares para inicializar o
<span style="font-style: italic;">Network Server</span>, e para parar o servidor.</div></div></td></tr></table></div>Os arquivos de classe compilados para o programa <span style="font-style: italic;">NsSample</span> s&atilde;o:
<div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="font-family: Courier;">NsSample.class</span></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="font-family: Courier;">NsSampleClientThread.class</span></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="font-family: Courier;">NsSampleWork.class</span></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="font-family: Courier;">NetworkServerUtil.class</span></div></td></tr></table></div></div></div></div><div><a name="N154AE"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="tadminovnsrundemo"></a><div></div>Execu&ccedil;&atilde;o do programa exemplo NsSample</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N154B7"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Para executar o programa NsSample:</div></div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div>1. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Abra a linha de comando e torne o diret&oacute;rio
%<span style="border-right-width: 0pt; border-left-width: 0pt;">DERBY_HOME</span>%\demo\
o diret&oacute;rio corrente, onde
%<span style="border-right-width: 0pt; border-left-width: 0pt;">DERBY_HOME</span>%
&eacute; o diret&oacute;rio onde o
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
foi instalado.</span></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>2. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Defina a vari&aacute;vel de ambiente CLASSPATH incluindo o diret&oacute;rio corrente
("."), e incluindo tamb&eacute;m os seguintes arquivos <span style="font-style: italic;">jar</span> para que se possa
utilizar o <span style="font-style: italic;">Network Server</span> e o <span style="font-style: italic;">driver</span> cliente da rede:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">derbynet.jar</span></div><div style="margin-left: 72pt + 32pt;">O arquivo <span style="font-style: italic;">jar</span> do <span style="font-style: italic;">Network Server</span>.
Dever&aacute; estar presente na vari&aacute;vel de ambiente CLASSPATH, para que se possa
utilizar qualquer uma das fun&ccedil;&otilde;es do <span style="font-style: italic;">Network Server</span>.</div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">derbyclient.jar</span></div><div style="margin-left: 72pt + 32pt;">Este arquivo <span style="font-style: italic;">jar</span> dever&aacute; estar presente na vari&aacute;vel de ambiente
CLASSPATH, para que se possa utilizar o <span style="font-style: italic;">driver</span> cliente da rede.</div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">derby.jar</span></div><div style="margin-left: 72pt + 32pt;">O arquivo <span style="font-style: italic;">jar</span> do motor de banco de dados
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>.</div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">derbytools.jar</span></div><div style="margin-left: 72pt + 32pt;">O arquivo <span style="font-style: italic;">jar</span> das ferramentas do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>.</div></div></div></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>3. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">A defini&ccedil;&atilde;o da vari&aacute;vel de ambiente CLASSPATH pode ser testada executando
o seguinte comando Java:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">java org.apache.derby.tools.sysinfo</div></pre></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Este comando mostra os arquivos <span style="font-style: italic;">jar</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
presentes no caminho de classes, assim como suas respectivas vers&otilde;es.</div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>4. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Ap&oacute;s o ambiente ter sido definido corretamente, o programa <span style="font-style: italic;">NsSample</span>
ser&aacute; executado a partir deste diret&oacute;rio:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">java nserverdemo.NsSample</div></pre></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Se a execu&ccedil;&atilde;o do programa for bem-sucedida, ser&aacute; recebida uma
sa&iacute;da semelhante &agrave; mostrada a seguir:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">Using JDBC driver: org.apache.derby.jdbc.ClientDriver
Derby Network Server created
[NsSample] Unable to obtain a connection to network server, trying again after 3000 ms.
O servidor est&aacute; pronto para aceitar conex&otilde;es na porta 1621.
N&uacute;mero da conex&atilde;o: 1.
[NsSample] Derby Network Server started.
[NsSample] Sample Derby Network Server program demo starting.
Please wait .....................
N&uacute;mero da conex&atilde;o: 2.
[NsSampleWork] Begin creating table - SAMPLETBL and necessary indexes.
[NsSampleClientThread] Thread id - 1; started.
[NsSampleWork] Thread id - 1; requests database connection, dbUrl =jdbc:derby:NSSampledb;
[NsSampleClientThread] Thread id - 2; started.
[NsSampleWork] Thread id - 2; requests database connection, dbUrl =jdbc:derby://localhost:1621/NSSampledb;create=true;
N&uacute;mero da conex&atilde;o: 3.
[NsSampleWork] Thread id - 2; deleted 1 row with t_key = 9631
[NsSampleWork] Thread id - 2; deleted 1 row with t_key = 9595
[NsSampleWork] Thread id - 2 selected 1 row [754,Derby29        ,4.0290892E7,9389]
[NsSampleWork] Thread id - 2; updated 1 row with t_key = 9389
[NsSampleWork] Thread id - 2; inserted 1 row.
[NsSampleWork] Thread id - 2; deleted 1 row with t_key = 9476
[NsSampleWork] Thread id - 2 selected 1 row [51,Derby29        ,4.0290892E7,9389]
[NsSampleWork] Thread id - 2; deleted 1 row with t_key = 9389
[NsSampleWork] Thread id - 2 selected 1 row [486,Derby25        ,6.138386E23,9383]
[NsSampleWork] Thread id - 2; inserted 1 row.
[NsSampleWork] Thread id - 2; closed connection to the database.
[NsSampleClientThread] Thread id - 2; finished all tasks.
[NsSampleWork] Thread id - 1; deleted 1 row with t_key = 9383
[NsSampleWork] Thread id - 1 selected 1 row [948,Derby33        ,7609340.0,9100]
[NsSampleWork] Thread id - 1 selected 1 row [948,Derby33        ,7609340.0,9100]
[NsSampleWork] Thread id - 1 selected 1 row [948,Derby33        ,7609340.0,9100]
[NsSampleWork] Thread id - 1; updated 1 row with t_key = 9100
[NsSampleWork] Thread id - 1 selected 1 row [54,Derby33        ,7609340.0,9100]
[NsSampleWork] Thread id - 1 selected 1 row [54,Derby33        ,7609340.0,9100]
[NsSampleWork] Thread id - 1 selected 1 row [54,Derby33        ,7609340.0,9100]
[NsSampleWork] Thread id - 1; updated 1 row with t_key = 9100
[NsSampleWork] Thread id - 1 selected 1 row [55,Derby33        ,7609340.0,9100]
[NsSampleWork] Thread id - 1; closed connection to the database.
[NsSampleClientThread] Thread id - 1; finished all tasks.
[NsSample] Shutting down network server.
N&uacute;mero da conex&atilde;o: 4.
Encerramento bem-sucedido.
[NsSample] End of Network server demo.
</div></pre></div></div></td></tr></table></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N155B8"></a><span></span>A execu&ccedil;&atilde;o do programa <span style="font-style: italic;">NsSample</span> tamb&eacute;m cria o seguinte
diret&oacute;rio e arquivo:<div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">NSSampledb</span></div><div style="margin-left: 72pt + 16pt;">Este diret&oacute;rio cont&eacute;m o banco de dados <span style="font-style: italic;">NSSampledb</span>.</div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">derby.log </span></div><div style="margin-left: 72pt + 16pt;">Este arquivo de <span style="font-style: italic;">log</span> cont&eacute;m as mensagens de progresso e erro do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>.</div></div></div></div></div></div></div><div><a name="N15612"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="cadminovntsrvsample"></a><div></div>Programas exemplo do Network Server para conex&otilde;es incorporada e cliente</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; margin-left: 72pt;">Estes programas exemplo do <span style="font-style: italic;">Network Server</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
mostram como obter uma conex&atilde;o incorporada e v&aacute;rias conex&otilde;es cliente para o
mesmo banco de dados utilizando o <span style="font-style: italic;">Network Server</span>.
Estes programas mostram, tamb&eacute;m, como utilizar tanto
<span style="font-family: Courier;">DriverManager</span> quanto <span style="font-family: Courier;">DataSource</span> para obter
conex&otilde;es cliente.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Para o banco de dados permanecer consistente, somente pode ser acessado
por uma JVM de cada vez.
O <span style="font-style: italic;">driver</span> incorporado &eacute; carregado quando o <span style="font-style: italic;">Network Server</span> &eacute;
inicializado.
A JVM que inicializa o <span style="font-style: italic;">Network Server</span> pode obter uma conex&atilde;o incorporada
para o mesmo banco de dados que o <span style="font-style: italic;">Network Server</span> est&aacute; acessando para
servir os clientes de outras JVM.
Esta solu&ccedil;&atilde;o fornece os benef&iacute;cios de desempenho do <span style="font-style: italic;">driver</span> incorporado,
e tamb&eacute;m permite que conex&otilde;es cliente de outras JVMs se conectem ao mesmo banco
de dados.</div></div><div><a name="N156DF"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="cadminovsrvsmpprgm"></a><div></div>Vis&atilde;o geral do programa SimpleNetworkServerSample</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">O programa SimpleNetworkServerSample inicializa o <span style="font-style: italic;">Network Server</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>,
assim como o <span style="font-style: italic;">driver</span> incorporado, e aguarda os clientes se conectarem.
O programa realiza as seguintes tarefas:
<div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Inicializa o <span style="font-style: italic;">Network Server</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
utilizando uma propriedade e tamb&eacute;m carrega o <span style="font-style: italic;">driver</span> incorporado.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Determina se o <span style="font-style: italic;">Network Server</span> est&aacute; executando.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Cria o banco de dados NSSimpleDB, se este n&atilde;o existir.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Obt&eacute;m uma conex&atilde;o incorporada com o banco de dados.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Testa a conex&atilde;o com o banco de dados utilizando uma consulta de exemplo.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Permite conex&otilde;es cliente se conectarem ao servidor, at&eacute; que se decida parar
o servidor e sair do programa.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Fecha a conex&atilde;o.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>P&aacute;ra o <span style="font-style: italic;">Network Server</span> antes de sair do programa.</div></td></tr></table></div></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">Para executar este programa exemplo, devem ser instalados os seguintes
arquivos no diret&oacute;rio
<span style="font-family: Courier;">%<span style="border-right-width: 0pt; border-left-width: 0pt;">DERBY_HOME</span>%\demo\nserverdemo\</span>:
<div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>O arquivo fonte: <span style="font-family: Courier;">SimpleNetworkServerSample.java</span></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>O arquivo de classe compilado: <span style="font-family: Courier;">SimpleNetworkServerSample.class</span></div></td></tr></table></div></div></div></div><div><a name="N157CA"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="tadminovrunsrvprgm"></a><div></div>Execu&ccedil;&atilde;o do programa SimpleNetworkServerSample</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N157D3"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Para executar este programa de exemplo do <span style="font-style: italic;">Network Server</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>:</div></div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div>1. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Abra a linha de comando e torne o diret&oacute;rio
%<span style="border-right-width: 0pt; border-left-width: 0pt;">DERBY_HOME</span>%\demo\nserverdemo
o diret&oacute;rio corrente, onde
%<span style="border-right-width: 0pt; border-left-width: 0pt;">DERBY_HOME</span>%
&eacute; o diret&oacute;rio onde o
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
foi instalado.</span></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>2. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Defina a vari&aacute;vel de ambiente CLASSPATH contendo o diret&oacute;rio corrente
("."), e incluindo tamb&eacute;m os seguintes arquivos <span style="font-style: italic;">jar</span>:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">derbynet.jar</span></div><div style="margin-left: 72pt + 32pt;">O arquivo <span style="font-style: italic;">jar</span> do <span style="font-style: italic;">Network Server</span>.
Dever&aacute; estar presente na vari&aacute;vel de ambiente CLASSPATH, porque o
<span style="font-style: italic;">Network Server</span> ser&aacute; inicializado por este programa.</div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">derby.jar</span></div><div style="margin-left: 72pt + 32pt;">O arquivo <span style="font-style: italic;">jar</span> do motor de banco de dados.</div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">derbytools.jar</span></div><div style="margin-left: 72pt + 32pt;">O arquivo <span style="font-style: italic;">jar</span> das ferramentas do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>.</div></div></div></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>3. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">A defini&ccedil;&atilde;o da vari&aacute;vel de ambiente CLASSPATH pode ser testada executando
o seguinte comando Java:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">java org.apache.derby.tools.sysinfo</div></pre></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Este comando mostra os arquivos <span style="font-style: italic;">jar</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
presentes no caminho de classes, assim como suas respectivas vers&otilde;es.</div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>4. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Ap&oacute;s o ambiente ter sido definido corretamente, o programa
<span style="font-style: italic;">SimpleNetworkServerSample</span> ser&aacute; executado a partir deste diret&oacute;rio:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">java SimpleNetworkServerSample</div></pre></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Se a execu&ccedil;&atilde;o do programa for bem-sucedida, ser&aacute; vista uma sa&iacute;da
semelhante &agrave; mostrada abaixo:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">Starting Network Server
Testing if Network Server is up and running!
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span> Network Server now running
Got an embedded connection.
Testing embedded connection by executing a sample query
number of rows in sys.systables = 16
While my app is busy with embedded work, ij might connect like this:

        $ java -Dij.user=me -Dij.password=pw -Dij.protocol=
                        jdbc:derby:\\localhost:1527\ org.apache.derby.tools.ij
        ij&gt; connect 'NSSimpleDB';

Clients can continue to connect:
Press [Enter] to stop Server</div></pre></div></div></td></tr></table></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N158BA"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">A execu&ccedil;&atilde;o do programa <span style="font-style: italic;">SimpleNetworkServerSample</span> tamb&eacute;m cria o
seguinte diret&oacute;rio e arquivo:
<div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">NSSimpleDB</span></div><div style="margin-left: 72pt + 16pt;">Este diret&oacute;rio cont&eacute;m o banco de dados <span style="font-style: italic;">NSSimpleDB</span>.</div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">derby.log</span></div><div style="margin-left: 72pt + 16pt;">Este arquivo de <span style="font-style: italic;">log</span> cont&eacute;m as mensagens de progresso e erro do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>.</div></div></div></div></div></div></div><div><a name="N15942"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="cadminovcliconnect"></a><div></div>Conex&atilde;o de um cliente ao Network Server com o programa SimpleNetworkClientSample</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">O programa <span style="font-style: italic;">SimpleNetworkClientSample</span> &eacute; um programa cliente que
interage com o <span style="font-style: italic;">Network Server</span> do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
a partir de outra JVM.
Este programa realiza as seguintes tarefas:
<div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Carrega o <span style="font-style: italic;">driver</span> cliente da rede.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Obt&eacute;m uma conex&atilde;o cliente utilizando <span style="font-family: Courier;">DriverManager</span>.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Obt&eacute;m uma conex&atilde;o cliente utilizando <span style="font-family: Courier;">DataSource</span>.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Testa as conex&otilde;es com o banco de dados executando uma consulta de exemplo.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Fecha as conex&otilde;es e termina o programa.</div></td></tr></table></div></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">Para executar este programa exemplo, devem ser instalados os seguintes
arquivos no diret&oacute;rio
<span style="font-family: Courier;">%<span style="border-right-width: 0pt; border-left-width: 0pt;">DERBY_HOME</span>%\demo\nserverdemo\</span>:
<div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>O arquivo fonte: <span style="font-family: Courier;">SimpleNetworkClientSample.java</span></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>O arquivo de classe compilado: <span style="font-family: Courier;">SimpleNetworkClientSample.class</span></div></td></tr></table></div></div></div></div><div><a name="N15A12"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="tadminovclirun"></a><div></div>Execu&ccedil;&atilde;o do programa SimpleNetworkClientSample</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N15A1B"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Para conectar ao <span style="font-style: italic;">Network Server</span> inicializado pelo programa
<span style="font-style: italic;">SimpleNetworkServerSample</span>:</div></div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div>1. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Abra a linha de comando e torne o diret&oacute;rio
%<span style="border-right-width: 0pt; border-left-width: 0pt;">DERBY_HOME</span>%\demo\nserverdemo
o diret&oacute;rio corrente, onde
%<span style="border-right-width: 0pt; border-left-width: 0pt;">DERBY_HOME</span>%
&eacute; o diret&oacute;rio onde o
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
foi instalado.</span></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>2. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Defina a vari&aacute;vel de ambiente CLASSPATH contendo o seguinte:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>O diret&oacute;rio corrente (".")</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>O arquivo derbyclient.jar</div></td></tr></table></div></div></div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div>3. 
          </div></td><td width="8">&nbsp;</td><td valign="top"><div><span style="border-right-width: 0pt; border-left-width: 0pt;">Ap&oacute;s o ambiente ter sido definido corretamente, o programa
<span style="font-style: italic;">SimpleNetworkClientSample</span>
ser&aacute; executado a partir deste diret&oacute;rio:</span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">java SimpleNetworkClientSample</div></pre></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Se a execu&ccedil;&atilde;o do programa for bem-sucedida, ser&aacute; vista uma sa&iacute;da
semelhante &agrave; mostrada abaixo:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">Starting Sample client program
Got a client connection via the DriverManager.
connection from datasource;
Got a client connection via a DataSource.
Testing the connection obtained via DriverManager by executing a sample query
number of rows in sys.systables = 16
Testing the connection obtained via a DataSource by executing a sample query
number of rows in sys.systables = 16
Goodbye!</div></pre></div></div></td></tr></table></div></div></div></div></div></div><div><a name="N15AD5"></a><div style="margin-top: 0pc; margin-bottom: 1.4pc; font-size: 16pt; font-weight: bold; padding-top: 1.4pc;"><div style="border-right-width: 0pt; border-left-width: 0pt; line-height: 100%; border-top-width: 3pt; border-top-color: black;"><a name="cadminparttwo"></a><div></div>Parte 2: Guia de administra&ccedil;&atilde;o do Derby</div></div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Esta se&ccedil;&atilde;o do guia est&aacute; dividida em v&aacute;rias tarefas administrativas.</div></div><div><a name="N15B3E"></a><div style="padding-top: 1pc; margin-bottom: 5pt; font-size: 14pt; font-weight: bold;"><div style="border-right-width: 0pt; border-left-width: 0pt; border-top-width: 1pt; border-top-color: black;"><a name="cadminconsist01"></a><div></div>Verifica&ccedil;&atilde;o da consist&ecirc;ncia do banco de dados</div></div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; margin-left: 72pt;">Caso ocorra uma falha do equipamento ou do sistema operacional,
pode ser utilizada a fun&ccedil;&atilde;o SYSCS_UTIL.SYSCS_CHECK_TABLE para verificar se
o banco de dados ainda permanece consistente.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">A verifica&ccedil;&atilde;o da consist&ecirc;ncia deve ser realizada apenas quando existem
indica&ccedil;&otilde;es que este tipo de verifica&ccedil;&atilde;o &eacute; necess&aacute;ria, porque a verifica&ccedil;&atilde;o da
consist&ecirc;ncia pode durar um longo tempo em um banco de dados grande.</div></div><div><a name="N15BE8"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="radminconsist30301"></a><div></div>A fun&ccedil;&atilde;o SYSCS_CHECK_TABLE</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N15C02"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">A fun&ccedil;&atilde;o SYSCS_UTIL.SYSCS_CHECK_TABLE() verifica a consist&ecirc;ncia de uma
tabela do <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>.
Em particular, a fun&ccedil;&atilde;o <span style="font-style: italic;">SYSCS_UTIL.SYSCS_CHECK_TABLE</span> verifica as
seguintes condi&ccedil;&otilde;es:<div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Se a tabela base est&aacute; consistente internamente;</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Se a tabela base e todos os seus &iacute;ndices associados cont&ecirc;m o mesmo n&uacute;mero
de linhas;</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Se o valor e localiza&ccedil;&atilde;o das linhas de cada &iacute;ndice correspondem aos
da tabela base;</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Se todos os &iacute;ndices BTREE est&atilde;o consistentes internamente.</div></td></tr></table></div>
Esta fun&ccedil;&atilde;o &eacute; executada como uma declara&ccedil;&atilde;o SQL, conforme mostrado a seguir:</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N15C30"></a><span></span><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">VALUES SYSCS_UTIL.SYSCS_CHECK_TABLE(
    <span style="font-style: italic;">nome-do-esquema</span>, <span style="font-style: italic;">nome-da-tabela</span>)</div></pre>
onde <span style="font-style: italic;">nome-do-esquema</span> e <span style="font-style: italic;">nome-da-tabela</span> s&atilde;o express&otilde;es que
resultam em um tipo de dado cadeia de caracteres.
Se o nome do esquema ou da tabela for criado como um identificador n&atilde;o
delimitado, seus nomes dever&atilde;o ser informados com todas as letras em mai&uacute;sculo.
Por exemplo:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">VALUES SYSCS_UTIL.SYSCS_CHECK_TABLE('APP', 'CIDADES')</div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N15C59"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">A fun&ccedil;&atilde;o SYSCS_UTIL.SYSCS_CHECK_TABLE retorna um SMALLINT.
Se a tabela estiver consistente (ou se for executada para uma vis&atilde;o),
a fun&ccedil;&atilde;o SYSCS_UTIL.SYSCS_CHECK_TABLE retornar&aacute; um valor diferente de zero.
Caso contr&aacute;rio, esta fun&ccedil;&atilde;o lan&ccedil;ar&aacute; uma exce&ccedil;&atilde;o na primeira inconsist&ecirc;ncia
encontrada.</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N15C62"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Para uma tabela consistente, &eacute; mostrado o seguinte resultado:</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N15C6B"></a><span></span><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">1
-----
1

1 row selected</div></pre></div></div></div><div><a name="N15CAD"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="radminconsist38781"></a><div></div>Exemplos de mensagem de erro de SYSCS_CHECK_TABLE</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; margin-left: 72pt;">Esta se&ccedil;&atilde;o fornece exemplos de mensagens de erro que a fun&ccedil;&atilde;o
SYSCS_UTIL.SYSCS_CHECK_TABLE() pode retornar.</div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N15CCC"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Se a contagem de linhas da tabela base e de um &iacute;ndice estiverem diferentes,
ser&aacute; emitida a mensagem de erro X0Y55:</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N15CD5"></a><span></span><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">ERROR X0Y55: The number of rows in the base table does not match
the number of rows in at least 1 of the indexes on the table. Index
'T1_I' on table 'APP.T1' has 4 rows, but the base table has 5 rows.
The suggested corrective action is to recreate the index.</div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N15CDF"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Se o &iacute;ndice fizer refer&ecirc;ncia a uma linha que n&atilde;o existe na tabela base,
ser&aacute; emitida a mensagem de erro X0X62:</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N15CE8"></a><span></span><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">ERROR X0X62: Inconsistency found between table 'APP.T1' and index
'T1_I'. Error when trying to retrieve row location '(1,6)' from the
table. The full index key,including the row location, is '{ 1, (1,6) }'.
The suggested corrective action is to recreate the index.</div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N15CF2"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Se o valor da coluna chave for diferente na tabela base e no &iacute;ndice,
ser&aacute; emitida a mensagem de erro X0X61:</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N15CFB"></a><span></span><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">ERROR X0X61: The values for column 'C10' in index 'T1_C10' and
table 'APP.T1' do not match for row location (1,7). The value in the
index is '2 2   ', while the value in the base table is 'NULL'. The full
index key, including the row location, is '{ 2 2       , (1,7) }'. The
suggested corrective action is to recreate the index.</div></pre></div></div></div><div><a name="N15D3E"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="radminconsist24642"></a><div></div>Exemplos de comandos SYSCS_CHECK_TABLE</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N15D5D"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Esta se&ccedil;&atilde;o fornece exemplos que mostram como utilizar a fun&ccedil;&atilde;o
SYSCS_UTIL.SYSCS_CHECK_TABLE em comandos.</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N15D66"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Para verificar a consist&ecirc;ncia de uma &uacute;nica tabela, deve ser executado um
comando semelhante ao do exemplo a seguir:</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N15D6F"></a><span></span><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">VALUES SYSCS_UTIL.SYSCS_CHECK_TABLE('APP', 'V&Ocirc;OS')</div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N15D79"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Para verificar a consist&ecirc;ncia de todas as tabelas do esquema, parando na
primeira falha, deve ser executado um comando semelhante ao do exemplo a
seguir:</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N15D82"></a><span></span><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">SELECT tablename, SYSCS_UTIL.SYSCS_CHECK_TABLE(
    'APP', tablename)
FROM sys.sysschemas s, sys.systables t
WHERE s.schemaname = 'APP' AND s.schemaid = t.schemaid</div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N15D8C"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Para verificar a consist&ecirc;ncia de todo o banco de dados, parando na primeira
falha, deve ser executado um comando semelhante ao do exemplo a seguir:</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N15D95"></a><span></span><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">SELECT schemaname, tablename,
SYSCS_UTIL.SYSCS_CHECK_TABLE(schemaname, tablename)
FROM sys.sysschemas s, sys.systables t
WHERE s.schemaid = t.schemaid</div></pre></div></div></div></div><div><a name="N15DD7"></a><div style="padding-top: 1pc; margin-bottom: 5pt; font-size: 14pt; font-weight: bold;"><div style="border-right-width: 0pt; border-left-width: 0pt; border-top-width: 1pt; border-top-color: black;"><a name="cadminhubbkup98797"></a><div></div>C&oacute;pia de seguran&ccedil;a e restaura&ccedil;&atilde;o do banco de dados</div></div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; margin-left: 72pt;">O <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
fornece maneira de efetuar c&oacute;pia de seguran&ccedil;a do banco de dados enquanto este
est&aacute; em linha.
Tamb&eacute;m pode ser restaurada uma c&oacute;pia de seguran&ccedil;a completa a partir de um local
especificado.</div></div><div><a name="N15E89"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="cadminbckupdb"></a><div></div>C&oacute;pia de seguran&ccedil;a do banco de dados</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Os t&oacute;picos desta se&ccedil;&atilde;o descrevem realizar c&oacute;pia de seguran&ccedil;a do banco de
dados.</div></div><div><a name="N15F1B"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="cadminhubbkup12677"></a><div></div>C&oacute;pias de seguran&ccedil;a fora de linha</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Para realizar uma c&oacute;pia de seguran&ccedil;a fora de linha de um banco de dados,
s&atilde;o utilizados comandos do sistema operacional para copiar o diret&oacute;rio do
banco de dados.
O banco de dados deve ser parado antes de ser feita a c&oacute;pia de seguran&ccedil;a
fora de linha.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Por exemplo, nos sistemas Windows, o seguinte comando do sistema operacional
faz a c&oacute;pia de seguran&ccedil;a do banco de dados (fechado) chamado <span style="font-style: italic;">amostra</span>,
localizado em <span style="font-family: Courier;">d:\meusbancos</span>, copiando o banco de dados
para o diret&oacute;rio <span style="font-family: Courier;">c:\minhascopias\2005-06-01</span>:</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">xcopy d:\meusbancos\amostra c:\minhascopias\2005-06-01\amostra /s /i</div></pre><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Se n&atilde;o estiver sendo utilizado o Windows, o comando <span style="font-style: italic;">xcopy</span> dever&aacute; ser
substitu&iacute;do pelo comando apropriado do sistema operacional que copia o
diret&oacute;rio, e todo o seu conte&uacute;do, para um novo local.</div><div><span style="font-weight: bold; border-right-width: 0pt; border-left-width: 0pt;">Note: </span>  Nos sistemas Windows, n&atilde;o deve-se tentar atualizar o banco de dados
enquanto est&aacute; sendo feita a c&oacute;pia de seguran&ccedil;a desta maneira.
A tentativa de atualizar o banco de dados durante uma c&oacute;pia de seguran&ccedil;a fora
de linha ir&aacute; gerar uma java.io.IOException.
A utiliza&ccedil;&atilde;o de c&oacute;pias de seguran&ccedil;a em linha evita que isto ocorra.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Em sistemas grandes, parar o banco de dados pode n&atilde;o ser conveniente.
Para fazer uma c&oacute;pia de seguran&ccedil;a do banco de dados sem ter que par&aacute;-lo,
deve ser feita a c&oacute;pia de seguran&ccedil;a em linha.</div></div></div><div><a name="N15FA6"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="cadminhubbkup63476"></a><div></div>C&oacute;pias de seguran&ccedil;a em linha</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Deve ser utilizada a c&oacute;pia de seguran&ccedil;a em linha, para fazer c&oacute;pia de
seguran&ccedil;a de um banco de dados enquanto este est&aacute; em execu&ccedil;&atilde;o.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">As c&oacute;pias de seguran&ccedil;a em linha podem ser feitas utilizando v&aacute;rios tipos
de procedimento de c&oacute;pia de seguran&ccedil;a, ou utilizando comandos do sistema
operacional junto com os procedimento de congelar e descongelar do sistema.</div></div><div><a name="N16024"></a><div style="font-size: 11pt; font-weight: bold; margin-left: 72pt;"><a name="cadminhubbkup01"></a><div></div>Utiliza&ccedil;&atilde;o do procedimento de c&oacute;pia de seguran&ccedil;a para realizar c&oacute;pia de seguran&ccedil;a em linha: </div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; margin-left: 72pt;">O procedimento SYSCS_UTIL.SYSCS_BACKUP_DATABASE &eacute; utilizado para
criar a c&oacute;pia de seguran&ccedil;a do banco de dados em um local especificado.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O procedimento SYSCS_UTIL.SYSCS_BACKUP_DATABASE recebe como argumento uma
cadeia de caracteres representando o local onde ser&aacute; armazenada a c&oacute;pia de
seguran&ccedil;a do banco de dados.
Normalmente &eacute; fornecido o caminho completo para o diret&oacute;rio de c&oacute;pia de
seguran&ccedil;a (os caminhos relativos s&atilde;o interpretados como sendo relativos ao
diret&oacute;rio corrente, e n&atilde;o ao diret&oacute;rio derby.system.home).</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Por exemplo, para especificar o local de c&oacute;pia de seguran&ccedil;a
<span style="font-family: Courier;">c:/minhascopias/2005-06-01</span> para um banco de dados que
se encontra aberto no momento, deve ser utilizada a seguinte declara&ccedil;&atilde;o
(s&atilde;o utilizadas barras inclinadas para frente como separadores do caminho
nos comandos SQL):</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><span style="font-weight: bold;">CALL SYSCS_UTIL.SYSCS_BACKUP_DATABASE('c:/minhascopias/2005-06-01')</span></div></pre><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O procedimento <span style="font-style: italic;">SYSCS_UTIL.SYSCS_BACKUP_DATABASE()</span> coloca o banco de
dados em um estado no qual este pode ser copiado com seguran&ccedil;a, depois copia
o diret&oacute;rio de banco de dados original por completo (incluindo os arquivos de
dados, arquivos de <span style="font-style: italic;">log</span> de transa&ccedil;&atilde;o em linha e os arquivos <span style="font-style: italic;">jar</span>)
para o diret&oacute;rio de c&oacute;pia de seguran&ccedil;a especificado.
Os arquivos que n&atilde;o est&atilde;o dentro do diret&oacute;rio de banco de dados original
(por exemplo, <span style="font-family: Courier;">derby.properties</span>) <span style="font-style: italic;">n&atilde;o</span> s&atilde;o copiados.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O exemplo a seguir mostra como fazer a c&oacute;pia de seguran&ccedil;a de um banco de
dados em um diret&oacute;rio cujo nome reflete a data corrente:</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">public static void backUpDatabase(Connection conn)throws SQLException
{
<span style="font-weight: bold;">// Obter a data de hoje como como uma cadeia de caracteres:</span>
java.text.SimpleDateFormat dataHoje =
   new java.text.SimpleDateFormat("yyyy-MM-dd");
String diretorioCopia = "c:/minhascopias/" +
   dataHoje.format((java.util.Calendar.getInstance()).getTime());

CallableStatement cs = conn.prepareCall("CALL SYSCS_UTIL.SYSCS_BACKUP_DATABASE(?)");
cs.setString(1, diretorioCopia);
cs.execute();
cs.close();
System.out.println("c&oacute;pia de seguran&ccedil;a colocada no diret&oacute;rio "+diretorioCopia);
}</div></pre><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Para um banco de dados cuja c&oacute;pia de seguran&ccedil;a foi realizada em 2005-06-01,
os comandos anteriores copiariam o banco de dados corrente para o diret&oacute;rio
com o mesmo nome em <span style="font-style: italic;">c:\minhascopias\2005-06-01</span>.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">As transa&ccedil;&otilde;es n&atilde;o efetivadas n&atilde;o aparecem na c&oacute;pia de seguran&ccedil;a do banco de
dados.</div><div><span style="font-weight: bold; border-right-width: 0pt; border-left-width: 0pt;">Note: </span>  N&atilde;o devem ser feitas c&oacute;pias de seguran&ccedil;a de bancos de dados diferentes,
mas com mesmo nome, no mesmo diret&oacute;rio de c&oacute;pia de seguran&ccedil;a.
Se j&aacute; existir um banco de dados com o mesmo nome no diret&oacute;rio de c&oacute;pia de
seguran&ccedil;a, &eacute; assumido como sendo uma vers&atilde;o antiga e sobrescrito.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O procedimento SYSCS_UTIL.SYSCS_BACKUP_DATABASE emitir&aacute; uma mensagem de erro
se existirem opera&ccedil;&otilde;es n&atilde;o registradas (<span style="font-style: italic;">unlogged</span>) na mesma
transa&ccedil;&atilde;o do procedimento de c&oacute;pia de seguran&ccedil;a.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Caso exista no sistema, quando a c&oacute;pia de seguran&ccedil;a iniciar, opera&ccedil;&otilde;es n&atilde;o
registradas em andamento em outras transa&ccedil;&otilde;es, este procedimento ficar&aacute;
bloqueado at&eacute; que estas transa&ccedil;&otilde;es completem, antes de realizar a c&oacute;pia de
seguran&ccedil;a.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O Derby converte, automaticamente, as opera&ccedil;&otilde;es n&atilde;o registradas para o modo
registrado, quando estas s&atilde;o iniciadas quando a c&oacute;pia de seguran&ccedil;a est&aacute; em
andamento (exceto as opera&ccedil;&otilde;es que fazem manuten&ccedil;&atilde;o de arquivos <span style="font-style: italic;">jar</span> de
aplicativos no banco de dados).
Os procedimentos que instalam, substituem e removem arquivos <span style="font-style: italic;">jar</span> no
banco de dados s&atilde;o bloqueados quando a c&oacute;pia de seguran&ccedil;a est&aacute; em andamento.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Se n&atilde;o for desejado que a c&oacute;pia de seguran&ccedil;a fique bloqueada at&eacute; que
as opera&ccedil;&otilde;es n&atilde;o registradas em outras transa&ccedil;&otilde;es completem, deve ser
utilizado o procedimento SYSCS_UTIL.SYSCS_BACKUP_DATABASE_NOWAIT.
Esse procedimento emite um erro logo no in&iacute;cio da c&oacute;pia de seguran&ccedil;a caso
existam transa&ccedil;&otilde;es em andamento com opera&ccedil;&otilde;es n&atilde;o registradas, em vez de
aguardar estas transa&ccedil;&otilde;es completarem.</div></div></div><div><a name="N160FD"></a><div style="font-size: 11pt; font-weight: bold; margin-left: 72pt;"><a name="cadminhubbkup75469"></a><div></div>Utiliza&ccedil;&atilde;o de comandos do sistema operacional com os procedimentos do
sistema de congelar e descongelar para realizar c&oacute;pias de seguran&ccedil;a em linha: </div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Normalmente, estes procedimentos s&atilde;o utilizados para acelerar a opera&ccedil;&atilde;o de
c&oacute;pia envolvida na c&oacute;pia de seguran&ccedil;a em linha.
Neste cen&aacute;rio, o <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
n&atilde;o realiza a opera&ccedil;&atilde;o de c&oacute;pia.
&Eacute; utilizado o procedimento SYSCS_UTIL.SYSCS_FREEZE_DATABASE para bloquear o
banco de dados, e depois realizada a c&oacute;pia do diret&oacute;rio do banco de dados
utilizando comandos do sistema operacional.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Por exemplo, como o comando <span style="font-style: italic;">tar</span> do UNIX utiliza rotinas de c&oacute;pia de
arquivo do sistema operacional, e o procedimento
SYSCS_UTIL.SYSCS_BACKUP_DATABASE utiliza chamada de E/S do Java, com
sincroniza&ccedil;&atilde;o interna adicional para permitir que ocorram atualiza&ccedil;&otilde;es durante
a c&oacute;pia de seguran&ccedil;a, o comando <span style="font-style: italic;">tar</span> pode gerar c&oacute;pias de seguran&ccedil;a
mais rapidamente que o procedimento SYSCS_UTIL.SYSCS_BACKUP_DATABASE.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Para utilizar comandos do sistema operacional para realizar c&oacute;pias de
seguran&ccedil;a em linha, &eacute; chamado o procedimento do sistema
SYSCS_UTIL.SYSCS_FREEZE_DATABASE.
O procedimento do sistema SYSCS_UTIL.SYSCS_FREEZE_DATABASE coloca o banco de
dados em um estado onde este pode ser copiado com seguran&ccedil;a.
Ap&oacute;s o banco de dados ter sido copiado, &eacute; utilizado o procedimento do sistema
SYSCS_UTIL.SYSCS_UNFREEZE_DATABASE para continuar trabalhando com o banco
de dados.
Somente ap&oacute;s SYSCS_UTIL.SYSCS_UNFREEZE_DATABASE ter sido utilizado, as
transa&ccedil;&otilde;es poder&atilde;o escrever novamente no banco de dados.
As opera&ccedil;&otilde;es de leitura podem prosseguir enquanto o banco de dados estiver
"congelado."</div><div><span style="font-weight: bold; border-right-width: 0pt; border-left-width: 0pt;">Note: </span>  Para garantir uma c&oacute;pia de seguran&ccedil;a do banco de dados consistente, o
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
dever&aacute; bloquear os aplicativos que tentarem escrever no banco de dados
congelado, at&eacute; que a c&oacute;pia de seguran&ccedil;a esteja completa e o procedimento do
sistema SYSCS_UTIL.SYSCS_UNFREEZE_DATABASE seja chamado.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O exemplo a seguir demonstra como os procedimentos de congelar e
descongelar s&atilde;o utilizados para envolver o comando de c&oacute;pia do sistema
operacional:</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">public static void backUpDatabaseWithFreeze(Connection conn)
        throws SQLException
{
Statement s = conn.createStatement();
s.executeUpdate(
    "CALL SYSCS_UTIL.SYSCS_FREEZE_DATABASE()");
<span style="font-weight: bold;">// Copiar o diret&oacute;rio do banco de dados durante este intervalo</span>
s.executeUpdate(
    "CALL SYSCS_UTIL.SYSCS_UNFREEZE_DATABASE()");
s.close();
}</div></pre></div></div></div><div><a name="N16184"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="cadminhubbkup67525"></a><div></div>Quando o log est&aacute; em um local diferente do padr&atilde;o</div><div style="margin-left: 72pt; font-size: 10pt;"><div><span style="font-weight: bold; border-right-width: 0pt; border-left-width: 0pt;">Note: </span>  Para se informar sobre o local padr&atilde;o do <span style="font-style: italic;">log</span> do banco de dados
deve ser lido <span style="color: blue;"><a href="#cadminlog98">Arquivo de log em uma unidade separada</a></span>.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Se o <span style="font-style: italic;">log</span> do banco de dados for colocado em um local diferente do
padr&atilde;o antes de fazer a c&oacute;pia de seguran&ccedil;a do banco de dados, deve-se ter
em mente os seguintes requisitos:</div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Se estiver sendo utilizado um comando do sistema operacional para realizar
a c&oacute;pia de seguran&ccedil;a do banco de dados, o arquivo de <span style="font-style: italic;">log</span> dever&aacute; ser
copiado tamb&eacute;m, conforme mostrado no exemplo a seguir:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">xcopy d:\meusbancos\amostra c:\minhascopias\2005-06-01\amostra /s /i
xcopy h:\janet\tourslog\log c:\minhascopias\2005-06-01\amostra\log /s /i</div></pre></div></td></tr></table></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Se n&atilde;o estiver sendo utilizado o Windows, o comando de c&oacute;pia dever&aacute; ser
substitu&iacute;do pelo comando do sistema operacional apropriado para copiar o
diret&oacute;rio, assim como todo o seu conte&uacute;do, para um novo local.</div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>A entrada <span style="font-style: italic;">logDevice</span> de <span style="font-style: italic;">service.properties</span> dever&aacute; ser editada
no banco de dados da c&oacute;pia de seguran&ccedil;a, para que aponte para o local correto
do <span style="font-style: italic;">log</span>.
No exemplo anterior, o <span style="font-style: italic;">log</span> foi movido para o local padr&atilde;o do <span style="font-style: italic;">log</span>,
portanto a entrada <span style="font-style: italic;">logDevice</span> poder&aacute; ser removida, ou deixado a entrada
<span style="font-style: italic;">logDevice</span> como est&aacute;, e aguardar at&eacute; que o banco de dados seja restaurado
para editar a entrada.</div></td></tr></table></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Para obter informa&ccedil;&otilde;es sobre como colocar o <span style="font-style: italic;">log</span> em um local diferente
do padr&atilde;o, deve ser consultado
<span style="color: blue;"><a href="#cadminlog98">Arquivo de log em uma unidade separada</a></span>.</div></div></div><div><a name="N16256"></a><div style="font-size: 9pt; font-weight: bold; margin-left: 72pt;"><a name="cadminhubbkup21105"></a><div></div>C&oacute;pia de seguran&ccedil;a de um banco de dados criptografado</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; margin-left: 72pt;">Quando se realiza a c&oacute;pia de seguran&ccedil;a de um banco de dados
criptografado, tanto os arquivos da c&oacute;pia de seguran&ccedil;a quanto o arquivo de
<span style="font-style: italic;">log</span> permanecem criptografados.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Para restaurar um banco de dados criptografado, &eacute; necess&aacute;rio conhecer a
senha de inicializa&ccedil;&atilde;o.</div></div></div></div><div><a name="N162D7"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="tadminhubbkup44"></a><div></div>Restaura&ccedil;&atilde;o do banco de dados a partir da c&oacute;pia de seguran&ccedil;a</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; margin-left: 72pt;">Para restaurar um banco de dados utilizando uma c&oacute;pia de seguran&ccedil;a
completa presente em um determinado local, deve ser especificado o atributo
<span style="font-family: Courier;">restoreFrom=caminho</span> na URL de conex&atilde;o em
tempo de inicializa&ccedil;&atilde;o.</div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N162EB"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Se existir um banco de dados com o mesmo nome no local
<span style="font-style: italic;">derby.system.home</span>, o sistema ir&aacute; remover este banco de dados, copi&aacute;-lo
a partir do local da c&oacute;pia de seguran&ccedil;a, e reinicializ&aacute;-lo.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Os arquivos de <span style="font-style: italic;">log</span> s&atilde;o copiados para o mesmo local onde se encontravam
quando a c&oacute;pia de seguran&ccedil;a foi realizada.
Pode ser utilizado o atributo <span style="font-family: Courier;">logDevice</span> junto com o atributo
<span style="font-family: Courier;">restoreFrom=caminho</span> para armazenar os <span style="font-style: italic;">logs</span> em
um local diferente.</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N16317"></a><span></span>Por exemplo, para restaurar o banco de dados amostra utilizando a
c&oacute;pia de seguran&ccedil;a armazenada em <span style="font-family: Courier;">c:\minhascopias\amostra</span>,
a URL de conex&atilde;o deve ser:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">jdbc:derby:sample;restoreFrom=c:\minhascopias\amostra</div></pre></div></div></div><div><a name="N1636D"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="tadmincrtdbbkup"></a><div></div>Cria&ccedil;&atilde;o de um banco de dados a partir de uma c&oacute;pia de seguran&ccedil;a</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; margin-left: 72pt;">Para criar um banco de dados utilizando uma c&oacute;pia de seguran&ccedil;a
completa presente em um determinado local, deve ser especificado o atributo
<span style="font-family: Courier;">createFrom=caminho</span> na URL de conex&atilde;o em
tempo de inicializa&ccedil;&atilde;o.</div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N16392"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Caso exista um banco de dados com o mesmo nome no local
<span style="font-style: italic;">derby.system.home</span>, ocorrer&aacute; um erro e o banco de dados existente ser&aacute;
deixado intacto.
Caso n&atilde;o exista um banco de dados com o mesmo nome no local
<span style="font-style: italic;">derby.system.home</span> corrente, o sistema ir&aacute; copiar todo o banco de dados
do local da c&oacute;pia de seguran&ccedil;a para o local <span style="font-style: italic;">derby.system.home</span>, e
inicializ&aacute;-lo.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Os arquivos de <span style="font-style: italic;">log</span> tamb&eacute;m s&atilde;o copiados para o local padr&atilde;o.
Pode ser utilizado o atributo <span style="font-family: Courier;">logDevice</span> junto com o atributo
<span style="font-family: Courier;">createFrom=caminho</span> para armazenar os <span style="font-style: italic;">logs</span> em um local
diferente.
Com o atributo <span style="font-family: Courier;">createFrom=caminho</span> n&atilde;o h&aacute; necessidade de copiar
os arquivos de <span style="font-style: italic;">log</span> individualmente para o diret&oacute;rio de <span style="font-style: italic;">log</span>.</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N163DC"></a><span></span>Por exemplo, para criar o banco de dados amostra a partir da c&oacute;pia de
seguran&ccedil;a armazenada em <span style="font-family: Courier;">c:\minhascopias\amostra</span>,
a URL deve ser:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">jdbc:derby:amostra;createFrom=c:\minhascopias\amostra</div></pre></div></div></div><div><a name="N16432"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="cadminrollforward"></a><div></div>Recupera&ccedil;&atilde;o com rolagem para frente</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; margin-left: 72pt;">O <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span> suporta
a recupera&ccedil;&atilde;o com rolagem para frente (<span style="font-style: italic;">roll-forward recovery</span>) para
restaurar um banco danificado para o estado mais recente anterior &agrave; ocorr&ecirc;ncia
da falha.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span> restaura o
banco de dados a partir da c&oacute;pia de seguran&ccedil;a completa, e refaz todas as
transa&ccedil;&otilde;es posteriores &agrave; c&oacute;pia de seguran&ccedil;a.
S&atilde;o necess&aacute;rios todos os arquivos de <span style="font-style: italic;">log</span> posteriores &agrave; c&oacute;pia de
seguran&ccedil;a, para refazer as transa&ccedil;&otilde;es posteriores &agrave; c&oacute;pia de seguran&ccedil;a.
Por padr&atilde;o, o banco de dados mant&eacute;m apenas os <span style="font-style: italic;">logs</span> requeridos para a
recupera&ccedil;&atilde;o de queda.
Para a recupera&ccedil;&atilde;o com rolagem para frente ser bem-sucedida, todos os arquivos
de <span style="font-style: italic;">log</span> posteriores &agrave; c&oacute;pia de seguran&ccedil;a devem ser guardados.
Os arquivos de <span style="font-style: italic;">log</span> podem ser guardados utilizando chamadas de fun&ccedil;&atilde;o de
c&oacute;pia de seguran&ccedil;a que habilitam guardar o <span style="font-style: italic;">log</span>.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Na recupera&ccedil;&atilde;o com rolagem para frente o modo que guarda o <span style="font-style: italic;">log</span> garante
que todos os arquivos de <span style="font-style: italic;">log</span> antigos ficam dispon&iacute;veis.
Os arquivos de <span style="font-style: italic;">log</span> ficam dispon&iacute;veis somente a partir do momento em que
o modo que guarda o <span style="font-style: italic;">log</span> &eacute; habilitado.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">O <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span> utiliza as
seguinte informa&ccedil;&otilde;es para restaurar o banco de dados:
<div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>A c&oacute;pia de seguran&ccedil;a do banco de dados</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>O conjunto de <span style="font-style: italic;">logs</span> guardados</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>O <span style="font-style: italic;">log</span> em linha ativo no momento</div></td></tr></table></div></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">A recupera&ccedil;&atilde;o com rolagem para frente n&atilde;o pode ser utilizada para restaurar
tabelas individuais.
A recupera&ccedil;&atilde;o com rolagem para frente recupera todo o banco de dados.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Para restaurar um banco de dados utilizando a recupera&ccedil;&atilde;o com rolagem para
frente dever&aacute; existir uma c&oacute;pia de seguran&ccedil;a do banco de dados, todos os
<span style="font-style: italic;">logs</span> guardados desde que a c&oacute;pia de seguran&ccedil;a foi criada, e os arquivos
de <span style="font-style: italic;">log</span> ativos.
Todos os arquivos de <span style="font-style: italic;">log</span> dever&atilde;o estar no diret&oacute;rio de <span style="font-style: italic;">log</span> do
banco de dados.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Existem dois tipos de arquivo de <span style="font-style: italic;">log</span> no
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>:
os <span style="font-style: italic;">logs</span> ativos e os <span style="font-style: italic;">logs</span> em linha guardados.</div><div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">Logs ativos</span></div><div style="margin-left: 72pt + 16pt;">Os <span style="font-style: italic;">logs</span> ativos s&atilde;o utilizados durante a recupera&ccedil;&atilde;o de queda para
evitar que uma falha que deixe o banco de dados em um estado inconsistente.
A recupera&ccedil;&atilde;o com rolagem para frente tamb&eacute;m pode utilizar os <span style="font-style: italic;">logs</span> ativos
para recuperar at&eacute; o final dos arquivos de <span style="font-style: italic;">log</span>.
Os <span style="font-style: italic;">logs</span> ativos est&atilde;o localizados no diret&oacute;rio de caminho de <span style="font-style: italic;">log</span>
do banco de dados.</div></div><div><div style="font-size: 10pt; font-weight: bold; text-indent: 0em; margin-right: 24pt;"><span style="font-weight: bold;">Logs em linha guardados</span></div><div style="margin-left: 72pt + 16pt;">Arquivos de <span style="font-style: italic;">log</span> guardados para uso pela recupera&ccedil;&atilde;o com rolagem
para frente, ap&oacute;s n&atilde;o serem mais necess&aacute;rios para recupera&ccedil;&atilde;o de queda.
Os <span style="font-style: italic;">logs</span> em linha guardados tamb&eacute;m s&atilde;o mantidos no diret&oacute;rio de caminho
de <span style="font-style: italic;">log</span> do banco de dados.</div></div></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><span style="font-weight: bold;">Habilita&ccedil;&atilde;o do modo que guarda o <span style="font-style: italic;">log</span></span></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Os <span style="font-style: italic;">logs</span> em linha guardados estar&atilde;o dispon&iacute;veis somente se o banco
de dados for habilitado para o modo de guarda o <span style="font-style: italic;">log</span>.
Pode ser utilizado o seguinte procedimento do sistema para habilitar o banco de
dados no modo que guarda o <span style="font-style: italic;">log</span>:</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">SYSCS_UTIL.SYSCS_BACKUP_DATABASE_AND_ENABLE_LOG_ARCHIVE_MODE
(IN BACKUPDIR VARCHAR(32672), IN SMALLINT DELETE_ARCHIVED_LOG_FILES)</div></pre><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">Os par&acirc;metros de entrada para a chamada do exemplo anterior especificam o
local onde a c&oacute;pia de seguran&ccedil;a dever&aacute; ser armazenada, e especifica se o banco
de dados dever&aacute; manter os <span style="font-style: italic;">logs</span> em linha guardados para a c&oacute;pia de
seguran&ccedil;a.
Os arquivos de <span style="font-style: italic;">log</span> em linha guardados existentes, criados antes desta
c&oacute;pia de seguran&ccedil;a, ser&atilde;o eliminados se o valor do par&acirc;metro de entrada para
o par&acirc;metro <span style="font-style: italic;">deleteOnlineArchivedLogFiles</span> for diferente de zero.
Os arquivos de <span style="font-style: italic;">log</span> s&atilde;o eliminados somente ap&oacute;s a c&oacute;pia de seguran&ccedil;a ter
sido bem-sucedida.
<div><span style="font-weight: bold; border-right-width: 0pt; border-left-width: 0pt;">Note: </span>  Tenha certeza de armazenar a c&oacute;pia de seguran&ccedil;a do banco de dados em
um local seguro ao escolher a op&ccedil;&atilde;o de remo&ccedil;&atilde;o do arquivo de <span style="font-style: italic;">log</span>.</div></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O procedimento SYSCS_UTIL.SYSCS_BACKUP_DATABASE_AND_ENABLE_LOG_ARCHIVE_MODE
emite uma mensagem de erro quando existem opera&ccedil;&otilde;es n&atilde;o registradas na mesma
transa&ccedil;&atilde;o do procedimento de c&oacute;pia de seguran&ccedil;a.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Caso exista no sistema, quando a c&oacute;pia de seguran&ccedil;a iniciar, opera&ccedil;&otilde;es n&atilde;o
registradas em andamento em outras transa&ccedil;&otilde;es, este procedimento ficar&aacute;
bloqueado at&eacute; que estas transa&ccedil;&otilde;es completem, antes de realizar a c&oacute;pia de
seguran&ccedil;a.
O Derby converte, automaticamente, as opera&ccedil;&otilde;es n&atilde;o registradas para o modo
registrado, quando estas s&atilde;o iniciadas quando a c&oacute;pia de seguran&ccedil;a est&aacute; em
andamento (exceto as opera&ccedil;&otilde;es que fazem manuten&ccedil;&atilde;o de arquivos <span style="font-style: italic;">jar</span> de
aplicativo no banco de dados).
Os procedimentos que instalam, substituem e removem arquivos <span style="font-style: italic;">jar</span> no
banco de dados s&atilde;o bloqueadas quando a c&oacute;pia de seguran&ccedil;a est&aacute; em andamento.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Se n&atilde;o for desejado que a c&oacute;pia de seguran&ccedil;a fique bloqueada at&eacute; que
as opera&ccedil;&otilde;es n&atilde;o registradas em outras transa&ccedil;&otilde;es completem, deve ser
utilizado o procedimento
SYSCS_UTIL.SYSCS_BACKUP_DATABASE_AND_ENABLE_LOG_ARCHIVE_MODE_NOWAIT.
Esse procedimento emite um erro logo no in&iacute;cio da c&oacute;pia de seguran&ccedil;a caso
existam transa&ccedil;&otilde;es em andamento com opera&ccedil;&otilde;es n&atilde;o registradas, em vez de
aguardar estas transa&ccedil;&otilde;es completarem.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><span style="font-weight: bold;">Desabilita&ccedil;&atilde;o do modo que guarda o <span style="font-style: italic;">log</span></span></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Ap&oacute;s o modo que guarda o <span style="font-style: italic;">log</span> ter sido habilitado, o banco de dados
ficar&aacute; para sempre com o modo que guarda o <span style="font-style: italic;">log</span> habilitado, mesmo que
posteriormente seja recarregado ou seja feita uma c&oacute;pia de seguran&ccedil;a.
A &uacute;nica maneira de desabilitar o modo que guarda o <span style="font-style: italic;">log</span> &eacute; executar o
seguinte procedimento:</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">SYSCS_UTIL.SYSCS_DISABLE_LOG_ARCHIVE_MODE(IN SMALLINT DELETE_ARCHIVED_LOG_FILES)</div></pre><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Este procedimento do sistema desabilita o modo que guarda o <span style="font-style: italic;">log</span>, e
remove todos os arquivos de <span style="font-style: italic;">log</span> guardados existentes, se o par&acirc;metro de
entrada <span style="font-style: italic;">DELETE_ARCHIVED_LOG_FILES</span> for diferente de zero.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><span style="font-weight: bold;">Realiza&ccedil;&atilde;o da recupera&ccedil;&atilde;o com rolagem para frente:</span></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Utilizando a c&oacute;pia de seguran&ccedil;a completa, os <span style="font-style: italic;">logs</span> guardados, e os
<span style="font-style: italic;">logs</span> ativos, o banco de dados pode ser restaurado at&eacute; seu estado mais
recente realizando a recupera&ccedil;&atilde;o com rolagem para frente.
A recupera&ccedil;&atilde;o com rolagem para frente &eacute; realizada especificando o atributo da
URL de conex&atilde;o <span style="font-style: italic;">rollForwardRecoveryFrom=&lt;caminho-da-c&oacute;pia-de-seguran&ccedil;a&gt;</span>
em tempo de inicializa&ccedil;&atilde;o.
Com isto o banco de dados retorna ao seu estado mais recente utilizando a c&oacute;pia
de seguran&ccedil;a completa, os <span style="font-style: italic;">logs</span> guardados e os <span style="font-style: italic;">logs</span> ativos.
Todos os arquivos de <span style="font-style: italic;">log</span> dever&atilde;o estar no diret&oacute;rio do caminho de
<span style="font-style: italic;">log</span> do banco de dados.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><span style="font-weight: bold;">C&oacute;pia de seguran&ccedil;a do banco de dados:</span></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">No exemplo a seguir &eacute; realizada a c&oacute;pia de seguran&ccedil;a do banco de dados
chamado <span style="font-style: italic;">wombat</span> no diret&oacute;rio <span style="font-style: italic;">d:/backup</span> com o modo que guarda
arquivo de <span style="font-style: italic;">log</span> habilitado:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">connect 'jdbc:derby:wombat;create=true';

create table t1(a int not null primary key);
------------------DML/DDL Operations
CALL SYSCS_UTIL.SYSCS_BACKUP_DATABASE_AND_ENABLE_LOG_ARCHIVE_MODE
('d:/backup', 0);
insert into t1 values(19);
create table t2(a int);
-----------------Opera&ccedil;&otilde;es de DML/DDL
-----------------Queda do banco de dados (M&iacute;dia corrompida nos discos de dado)</div></pre></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><span style="font-weight: bold;">Restaura&ccedil;&atilde;o do banco de dados utilizando a recupera&ccedil;&atilde;o com rolagem para frente:</span></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0em; margin-bottom: 0.6em;">No exemplo a seguir, o banco de dados &eacute; restaurado utilizando a recupera&ccedil;&atilde;o
com rolagem para frente ap&oacute;s uma falha da m&iacute;dia:
<pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">connect 'jdbc:derby:wombat;rollForwardRecoveryFrom=d:/backup/wombat';
select * from t1;
-----------------Opera&ccedil;&otilde;es de DML/DDL</div></pre></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Pode ser especificado o seguinte atributo na URL de conex&atilde;o em tempo de
carga do JDBC:</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;"><span style="font-style: italic;">rollForwardRecoveryFrom=caminho</span></div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Para obter mais informa&ccedil;&otilde;es deve ser consultada a se&ccedil;&atilde;o
<span style="font-style: italic;">rollForwardRecoveryFrom=caminho</span> no
<span style="border-right-width: 0pt; border-left-width: 0pt;"><span style="font-style: italic;">Manual de Refer&ecirc;ncia do Derby</span></span>.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Ap&oacute;s o banco de dados ser restaurado a partir da c&oacute;pia de seguran&ccedil;a completa,
as transa&ccedil;&otilde;es dos <span style="font-style: italic;">logs</span> em linha arquivados e dos <span style="font-style: italic;">logs</span> ativos
s&atilde;o refeitas.</div></div></div></div><div><a name="N16716"></a><div style="padding-top: 1pc; margin-bottom: 5pt; font-size: 14pt; font-weight: bold;"><div style="border-right-width: 0pt; border-left-width: 0pt; border-top-width: 1pt; border-top-color: black;"><a name="cadminlog98"></a><div></div>Arquivo de log em uma unidade separada</div></div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; margin-left: 72pt;">Pode ser melhorado o desempenho de bancos de dados grandes com
muitas atualiza&ccedil;&otilde;es colocando o <span style="font-style: italic;">log</span> do banco de dados em uma unidade
separada, o que reduz a conten&ccedil;&atilde;o de E/S.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Por padr&atilde;o, o registro da transa&ccedil;&atilde;o fica no subdiret&oacute;rio <span style="font-style: italic;">log</span> do
diret&oacute;rio do banco de dados.
Deve ser utilizado um dos seguintes m&eacute;todos para armazenar este subdiret&oacute;rio
<span style="font-style: italic;">log</span> em outro local:</div><div><table width="100%"><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Especificar um local diferente do padr&atilde;o utilizando o atributo
<span style="font-style: italic;">logDevice</span> na URL de conex&atilde;o com o banco de dados, ao criar o banco de
dados.</div></td></tr><tr><td valign="top" style="text-align: right;" width="24"><div><span>&bull;</span></div></td><td width="8">&nbsp;</td><td valign="top"><div>Se o banco de dados j&aacute; tiver sido criado, mover o diret&oacute;rio de <span style="font-style: italic;">log</span>
manualmente e atualizar o arquivo <span style="font-style: italic;">service.properties</span>.</div></td></tr></table></div></div><div><a name="N1680F"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="tadminlog800206"></a><div></div>Utiliza&ccedil;&atilde;o do atributo logDevice</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; margin-left: 72pt;">Para especificar um local diferente do padr&atilde;o para o diret&oacute;rio de
<span style="font-style: italic;">log</span>, deve ser definido o atributo <span style="font-style: italic;">logDevice</span> na URL de conex&atilde;o com
o banco de dados ao criar o banco de dados.</div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N16844"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Este atributo s&oacute; faz sentido ao se criar o banco de dados.
O atributo <span style="font-family: Courier;">logDevice</span> pode ser especificado como um caminho
absoluto, ou como um caminho relativo ao diret&oacute;rio onde a JVM &eacute; executada.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Definir <span style="font-style: italic;">logDevice</span> na URL de conex&atilde;o com o banco de dados adiciona uma
entrada no arquivo <span style="font-style: italic;">service.properties</span>.
Se o diret&oacute;rio de <span style="font-style: italic;">log</span> for movido manualmente, ser&aacute; necess&aacute;rio alterar
esta entrada no arquivo <span style="font-style: italic;">service.properties</span>.
Se o diret&oacute;rio de <span style="font-style: italic;">log</span> for movido de volta para o local padr&atilde;o, a entrada
<span style="font-style: italic;">logDevice</span> dever&aacute; ser removida do arquivo <span style="font-style: italic;">service.properties</span>.</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N16882"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Para verificar o local do <span style="font-style: italic;">log</span> de um banco de dados existente,
pode ser consultado o atributo <span style="font-family: Courier;">logDevice</span> como uma propriedade
do banco de dados utilizando a seguinte declara&ccedil;&atilde;o:
</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">VALUES SYSCS_UTIL.SYSCS_GET_DATABASE_PROPERTY('logDevice')</div></pre></div></div></div><div><a name="N168E4"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="radminlog800241"></a><div></div>Exemplo de cria&ccedil;&atilde;o do log em um local diferente do padr&atilde;o</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N168F1"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">A URL de conex&atilde;o com o banco de dados a seguir cria um banco de dados no
diret&oacute;rio <span style="font-family: Courier;">d:/meusbancos</span>, mas coloca o diret&oacute;rio de
<span style="font-style: italic;">log</span> em <span style="font-family: Courier;">h:/janets/logTurismo</span>:</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N1690C"></a><span></span><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">jdbc:derby:d:/meusbancos/bancoTurismo;
    create=true;logDevice=h:/janets/logTurismo</div></pre></div></div></div><div><a name="N1695C"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="radminlog800279"></a><div></div>Exemplo de mover o log manualmente</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N16969"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Caso se deseje mover o <span style="font-style: italic;">log</span> para
<span style="font-family: Courier;">g:/discogrande/logTurismo</span>, o mesmo dever&aacute; ser movido
utilizando comandos do sistema operacional:</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N1697E"></a><span></span><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><span style="font-weight: bold;">move h:\janets\logTurismo\log\*.* g:\discogrande\logTurismo\log</span></div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N1698C"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Em seguida, a entrada <span style="font-style: italic;">logDevice</span> no arquivo <span style="font-style: italic;">service.properties</span>
dever&aacute; ser alterada para ficar com a seguinte forma:</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N169A1"></a><span></span><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">logDevice=g:/discogrande/logTurismo</div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N169AB"></a><span></span><div><span style="font-weight: bold; border-right-width: 0pt; border-left-width: 0pt;">Note: </span>  Pode ser usado tanto uma barra inclinada para frente quanto duas
contrabarras como separador do caminho.</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N169B4"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Se posteriormente for desejado mover o <span style="font-style: italic;">log</span> de volta para o local
padr&atilde;o (neste caso <span style="font-family: Courier;">d:\meusbancos\bancoTurismo\log</span>),
o diret&oacute;rio de <span style="font-style: italic;">log</span> dever&aacute; ser movido manualmente da seguinte maneira:</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N169CF"></a><span></span><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;"><span style="font-weight: bold;">move g:\discogrande\logTurismo\log\*.* d:\meusbancos\bancoTurismo\log</span></div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N169DD"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Em seguida, a entrada <span style="font-style: italic;">logDevice</span> no arquivo <span style="font-style: italic;">service.properties</span>
dever&aacute; ser removida.</div></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N169F2"></a><span></span><div><span style="font-weight: bold; border-right-width: 0pt; border-left-width: 0pt;">Note: </span>  Este exemplo utiliza comandos espec&iacute;ficos do sistema operacional Windows.
Dever&atilde;o ser empregados os comandos apropriados do sistema operacional utilizado,
para copiar o diret&oacute;rio e todo o seu conte&uacute;do para um novo local.</div></div></div></div><div><a name="N16A41"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="cadminlog800315"></a><div></div>Quest&otilde;es relativas ao log em um local diferente do padr&atilde;o</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Quando o diret&oacute;rio de <span style="font-style: italic;">log</span> n&atilde;o est&aacute; no local padr&atilde;o, a c&oacute;pia de
seguran&ccedil;a e a restaura&ccedil;&atilde;o do banco de dados poder&atilde;o requerer passos adicionais.
Para obter detalhes, deve ser consultado
<span style="color: blue;"><a href="#cadminhubbkup98797">C&oacute;pia de seguran&ccedil;a e restaura&ccedil;&atilde;o do banco de dados</a></span>.</div></div></div></div><div><a name="N16AA7"></a><div style="padding-top: 1pc; margin-bottom: 5pt; font-size: 14pt; font-weight: bold;"><div style="border-right-width: 0pt; border-left-width: 0pt; border-top-width: 1pt; border-top-color: black;"><a name="cadminlockvti42553"></a><div></div>Obten&ccedil;&atilde;o de informa&ccedil;&otilde;es sobre bloqueios</div></div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span> fornece uma
ferramenta para monitorar e mostrar informa&ccedil;&otilde;es sobre bloqueios.
Esta ferramenta ajuda criar aplicativos que minimizam os impasses
(<span style="font-style: italic;">deadlocks</span>).
Tamb&eacute;m pode ajudar a localizar a causa do impasse quando este ocorre.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Para diagnosticar os problemas de bloqueio, deve ser monitorado
constantemente o tr&aacute;fego de bloqueio registrando todos os impasses utilizando
a propriedade <span style="font-style: italic;">derby.locks.monitor</span>.</div></div><div><a name="N16B50"></a><div style="padding-top: 1pc; margin-bottom: 2pt; font-size: 12pt; font-weight: bold;"><a name="cadminlockvti83889"></a><div></div>Monitoramento dos impasses</div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; margin-left: 72pt;">A propriedade <span style="font-style: italic;">derby.stream.error.logSeverityLevel</span> determina
o n&iacute;vel de erro informado.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Por padr&atilde;o, a propriedade <span style="font-style: italic;">derby.stream.error.logSeverityLevel</span> &eacute;
definida com o valor 40000.
Se a propriedade <span style="font-style: italic;">derby.stream.error.logSeverityLevel</span> for definida para
mostrar os erros no n&iacute;vel de transa&ccedil;&atilde;o (ou seja, se for definida com um valor
inferior a 40000), os erros de impasse ser&atilde;o registrados no arquivo
<span style="font-style: italic;">derby.log</span>.
Se for definida com um valor igual a 40000, ou maior, os erros de impasse n&atilde;o
ser&atilde;o registrados no arquivo <span style="font-style: italic;">derby.log</span>.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">A propriedade <span style="font-style: italic;">derby.locks.monitor</span> garante que os erros de impasse
ser&atilde;o registrados, independentemente do valor de
<span style="font-style: italic;">derby.stream.error.logSeverityLevel</span>.
Quando <span style="font-style: italic;">derby.locks.monitor</span> est&aacute; definida como verdade, todos os bloqueios
envolvidos nos impasses s&atilde;o escritos no arquivo <span style="font-style: italic;">derby.log</span>, junto com um
n&uacute;mero &uacute;nico que identifica o bloqueio.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Para ver o acompanhamento da pilha de <span style="font-style: italic;">thread</span> quando o bloqueio &eacute;
requisitado, a propriedade <span style="font-style: italic;">derby.locks.deadlockTrace</span> dever&aacute; ser definida
como verdade.
Esta propriedade &eacute; ignorada quando <span style="font-style: italic;">derby.locks.monitor</span> est&aacute; definida como
falso.</div><div><span style="font-weight: bold; border-right-width: 0pt; border-left-width: 0pt;">Note: </span>  A propriedade <span style="font-style: italic;">derby.locks.deadlockTrace</span> deve ser utilizada com
cuidado.
Definir esta propriedade pode alterar o tempo do aplicativo, afetar severamente
o desempenho, e produzir um arquivo <span style="font-style: italic;">derby.log</span> muito grande.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Para obter informa&ccedil;&otilde;es sobre como definir estas propriedades, e informa&ccedil;&otilde;es
sobre as propriedades espec&iacute;ficas mencionadas neste t&oacute;pico, deve ser
consultado <span style="font-style: italic;"><span style="border-right-width: 0pt; border-left-width: 0pt;"><span style="font-style: italic;">Ajuste do Derby</span></span></span>.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Abaixo est&aacute; um exemplo de uma mensagem de erro quando o
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
interrompe uma transa&ccedil;&atilde;o por causa de um impasse:</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">--SQLException Caught--

SQLState: 40001 =
Error Code: 30000
Message: A lock could not be obtained due to a deadlock,
cycle of locks and waiters is: Lock : ROW, DEPARTMENT, (1,14)
Waiting XID : {752, X} , APP, update department set location='Boise'
        where deptno='E21'
Granted XID : {758, X} Lock : ROW, EMPLOYEE, (2,8)
Waiting XID : {758, U} , APP, update employee set bonus=150 where salary=23840
Granted XID : {752, X} The selected victim is XID : 752</div></pre><div><span style="font-weight: bold; border-right-width: 0pt; border-left-width: 0pt;">Note: </span>  Podem ser utilizadas as propriedades
<span style="font-style: italic;">derby.locks.waitTimeout</span> e <span style="font-style: italic;">derby.locks.deadlockTimeout</span> para
configurar quanto tempo o
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
vai aguardar o bloqueio ser liberado, ou quando iniciar a verifica&ccedil;&atilde;o do
impasse.
Para obter mais informa&ccedil;&otilde;es sobre estas propriedades, deve ser consultada a
se&ccedil;&atilde;o que discute o controle do comportamento de aplicativos do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
no <span style="font-style: italic;"><span style="border-right-width: 0pt; border-left-width: 0pt;"><span style="font-style: italic;">Guia do Desenvolvedor do Derby</span></span></span>.</div></div></div></div><div><a name="N16C50"></a><div style="padding-top: 1pc; margin-bottom: 5pt; font-size: 14pt; font-weight: bold;"><div style="border-right-width: 0pt; border-left-width: 0pt; border-top-width: 1pt; border-top-color: black;"><a name="cadminspace21579"></a><div></div>Recupera&ccedil;&atilde;o do espa&ccedil;o n&atilde;o utilizado</div></div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em; margin-left: 72pt;">As tabelas e &iacute;ndices do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
(algumas vezes chamados de <span style="font-style: italic;">conglomerados</span>) podem conter espa&ccedil;o n&atilde;o
utilizado, depois de grandes quantidades de dados terem sido exclu&iacute;das ou
atualizadas.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Isto acontece porque, por padr&atilde;o, o
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
n&atilde;o devolve o espa&ccedil;o n&atilde;o utilizado para o sistema operacional.
Ap&oacute;s a p&aacute;gina ter sido alocada para uma tabela ou um &iacute;ndice, o
<span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
n&atilde;o devolve automaticamente a p&aacute;gina para o sistema operacional at&eacute; que a
tabela ou ou &iacute;ndice seja removido, mesmo que o espa&ccedil;o n&atilde;o seja mais necess&aacute;rio.
Entretanto, o <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
fornece um mecanismo para recuperar o espa&ccedil;o n&atilde;o utilizado nas tabelas e nos
seus &iacute;ndices associados.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Se for determinado que a tabela e seus &iacute;ndices possuem uma quantidade
significativa de espa&ccedil;o n&atilde;o utilizado, dever&aacute; ser utilizado o procedimento
SYSCS_UTIL.SYSCS_COMPRESS_TABLE, ou o procedimento
SYSCS_UTIL.SYSCS_INPLACE_COMPRESS_TABLE,
para recuperar o espa&ccedil;o n&atilde;o utilizado.
O procedimento SYSCS_COMPRESS_TABLE garante recuperar a quantidade m&aacute;xima de
espa&ccedil;o livre, &agrave;s custas de criar temporariamente novas tabelas e &iacute;ndices antes
do procedimento ser efetivado.
O procedimento SYSCS_INPLACE_COMPRESS tenta recuperar o espa&ccedil;o dentro da mesma
tabela, mas n&atilde;o pode garantir que ir&aacute; recuperar todo o espa&ccedil;o dispon&iacute;vel.
A diferen&ccedil;a entre estes procedimentos &eacute; que, diferentemente de
SYSCS_COMPRESS_TABLE, o procedimento SYSCS_INPLACE_COMPRESS n&atilde;o utiliza arquivos
tempor&aacute;rios, e move linhas dentro do mesmo conglomerado.</div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N16C97"></a><span></span><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Como exemplo, ap&oacute;s determinar que a tabela V&Ocirc;OS_DISPONIBILIDADE e seus
&iacute;ndices relacionados possuem muito espa&ccedil;o n&atilde;o utilizado, este espa&ccedil;o poder&aacute; ser
recuperado atrav&eacute;s do seguinte comando:</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">call SYSCS_UTIL.SYSCS_COMPRESS_TABLE('APP', 'V&Ocirc;OS_DISPONIBILIDADE', 0);</div></pre><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">O terceiro par&acirc;metro no procedimento SYSCS_UTIL.SYSCS_COMPRESS_TABLE()
determina se a opera&ccedil;&atilde;o ser&aacute; executada em modo seq&uuml;encial ou n&atilde;o seq&uuml;encial.
Se for especificado <span style="font-family: Courier;">0</span> para o terceiro argumento do procedimento,
a opera&ccedil;&atilde;o executar&aacute; no modo n&atilde;o seq&uuml;encial.
No modo seq&uuml;encial, o <span style="border-right-width: 0pt; border-left-width: 0pt;">Derby</span>
comprime a tabela e seus &iacute;ndices seq&uuml;encialmente, um de cada vez.
A compress&atilde;o seq&uuml;encial utiliza menos mem&oacute;ria e espa&ccedil;o em disco, mas &eacute; mais
lenta.
Para for&ccedil;ar a opera&ccedil;&atilde;o executar no modo seq&uuml;encial, dever&aacute; ser colocado um
valor diferente de zero do terceiro argumento.
O exemplo a seguir mostra como for&ccedil;ar o procedimento a executar no modo
seq&uuml;encial:</div><pre><div style="margin-top: 1.2em; margin-bottom: 0.8em; background-color: #f0f0f0; font-family: Courier; line-height: 106%; font-size: 9pt;">call SYSCS_UTIL.SYSCS_COMPRESS_TABLE('APP', 'V&Ocirc;OS_DISPONIBILIDADE', 1);</div></pre></div><div style="line-height: 12pt; margin-top: 0.6em; font-size: 10pt;"><a name="N16CBD"></a><span></span>Para obter mais informa&ccedil;&otilde;es sobre este comando, deve ser consultado o
<span style="font-style: italic;"><span style="border-right-width: 0pt; border-left-width: 0pt;"><span style="font-style: italic;">Manual de Refer&ecirc;ncia do Derby</span></span></span>.</div></div></div></div><div><a name="N16D24"></a><div style="margin-top: 0pc; margin-bottom: 1.4pc; font-size: 16pt; font-weight: bold; padding-top: 1.4pc;"><div style="border-right-width: 0pt; border-left-width: 0pt; line-height: 100%; border-top-width: 3pt; border-top-color: black;"><a name="radmintrademderby"></a><div></div>Marcas Registradas</div></div><div style="margin-left: 72pt; font-size: 10pt;"><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Os seguintes termos s&atilde;o marcas registradas de outras empresas e foram
utilizados em pelo menos um dos documentos da biblioteca de documenta&ccedil;&atilde;o do
<span style="border-right-width: 0pt; border-left-width: 0pt;">Apache Derby</span>:</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Cloudscape, DB2, DB2 Universal Database, DRDA e IBM s&atilde;o marcas registradas da
International Business Machines Corporation nos EUA, outros pa&iacute;ses, ou ambos.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Microsoft, Windows, Windows NT e o logotipo do Windows s&atilde;o marcas registradas
da Microsoft Corporation nos EUA, outros pa&iacute;ses, ou ambos.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Java e todas as marcas registradas baseadas no Java s&atilde;o marcas registradas da
Sun Microsystems, Inc. nos EUA, outros pa&iacute;ses, ou ambos.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">UNIX &eacute; uma marca registrada do <span style="font-style: italic;">The Open Group</span> nos EUA e outros pa&iacute;ses.</div><div style="font-size: 10pt; text-indent: 0em; margin-top: 0.6em; margin-bottom: 0.6em;">Outros nomes de empresas, produtos ou servi&ccedil;os podem ser marcas registradas
ou marcas de servi&ccedil;os de terceiros.</div></div></div></div></div><div valign="top"><div style="font-family: Helvetica; font-weight: bold; font-size: 10pt; text-align: center;"><span>&bull;</span></div></div><br></body></html>