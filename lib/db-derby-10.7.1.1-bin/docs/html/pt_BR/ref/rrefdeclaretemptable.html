<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="pt-br" xml:lang="pt-br">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<meta name="copyright" content="(C) Copyright 2005" />
<meta name="DC.rights.owner" content="(C) Copyright 2005" />
<meta content="public" name="security" />
<meta content="index,follow" name="Robots" />
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta content="reference" name="DC.Type" />
<meta name="DC.Title" content="Instrução DECLARE GLOBAL TEMPORARY TABLE" />
<meta content="Instrução DECLARE GLOBAL TEMPORARY, Tabelas, Temporárias" name="DC.subject" />
<meta content="Instrução DECLARE GLOBAL TEMPORARY, Tabelas, Temporárias" name="keywords" />
<meta scheme="URI" name="DC.Relation" content="crefsqlj39374.html" />
<meta scheme="URI" name="DC.Relation" content="crefsqlj22771.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj81859.html" />
<meta scheme="URI" name="DC.Relation" content="crefsqlj95081.html" />
<meta scheme="URI" name="DC.Relation" content="crefsqlj80721.html" />
<meta scheme="URI" name="DC.Relation" content="crefsqljrenamestatements.html" />
<meta scheme="URI" name="DC.Relation" content="crefsqlj35312.html" />
<meta scheme="URI" name="DC.Relation" content="rrefcallprocedure.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj13590.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj35981.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj31783.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj21583.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj32654.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj14854.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj35034.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj40774.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj29840.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj18922.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj40506.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj13658.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj21571.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj57522.html" />
<meta scheme="URI" name="DC.Relation" content="rrefscalarsubquery.html" />
<meta scheme="URI" name="DC.Relation" content="rrefselectexpression.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj41360.html" />
<meta scheme="URI" name="DC.Relation" content="rreftableexpression.html" />
<meta scheme="URI" name="DC.Relation" content="rreftablesubquery.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj26498.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj11277.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj33602.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj15309.html" />
<meta content="XHTML" name="DC.Format" />
<meta content="rrefdeclaretemptable" name="DC.Identifier" />
<meta content="pt-br" name="DC.Language" />
<link href="commonltr.css" type="text/css" rel="stylesheet" />
<title>Instrução DECLARE GLOBAL TEMPORARY TABLE</title>
</head>
<body id="rrefdeclaretemptable"><a name="rrefdeclaretemptable"><!-- --></a>


<h1 class="topictitle1">Instrução DECLARE GLOBAL TEMPORARY TABLE</h1>


<div>
<div class="section">
<p>A instrução DECLARE GLOBAL TEMPORARY TABLE define uma tabela
temporária para a conexão corrente.
Estas tabelas não residem nos catálogos do sistema, e não são persistentes.
As tabelas temporárias existem somente durante a conexão em que foram
declaradas, não podendo ser referenciadas de fora da conexão.
Ao fechar a conexão, as linhas da tabela são excluídas e a descrição em-memória
da tabela temporária é removida.</p>

</div>

<div class="section">
<div class="p">As tabelas temporárias são úteis quando:
<ul>
<li>a estrutura da tabela não é conhecida antes de utilizar o aplicativo.</li>

<li>os outros usuários não necessitam da mesma estrutura de tabela.</li>

<li>os dados da tabela temporária são necessários durante o uso do aplicativo.</li>

<li>a tabela pode ser declarada e removida sem manter bloqueios no catálogo do sistema.</li>

</ul>

</div>

</div>

<div class="section"><h4 class="sectiontitle">Sintaxe</h4>

<pre><strong>DECLARE GLOBAL TEMPORARY TABLE <em><a href="rrefdeclaretemptable.html#rrefdeclaretemptable__tempcoltablename">nome-da-tabela</a></em>
    { definição-da-coluna [ , definição-da-coluna ] * }
[ ON COMMIT {DELETE | PRESERVE} ROWS ]
NOT LOGGED [ON ROLLBACK DELETE ROWS]
 </strong>
</pre>

</div>

<div class="section" id="rrefdeclaretemptable__tempcoltablename"><a name="rrefdeclaretemptable__tempcoltablename"><!-- --></a><h4 class="sectiontitle">nome-da-tabela</h4>

<p>O nome da tabela temporária.
Se for especificado um nome-do-esquema diferente de SESSION, ocorrerá um erro
(SQLState 428EK).
Se o nome-do-esquema não for especificado, será atribuído SESSION.
Várias conexões podem definir tabelas temporárias globais declaradas com o mesmo
nome, porque cada conexão possui seu próprio descritor de tabela único.</p>

<p>A utilização de SESSION como nome do esquema de uma tabela física não gera
erro, mas é desestimulado.
O nome de esquema SESSION deve ser reservado para o esquema de tabelas
temporárias.</p>

</div>

<div class="section" id="rrefdeclaretemptable__tempcolcolumndef"><a name="rrefdeclaretemptable__tempcolcolumndef"><!-- --></a><h4 class="sectiontitle">definição-da-coluna</h4>

<p>Para obter mais informações sobre a <samp class="codeph">definição-da-coluna</samp>
deve ser consultada <a href="rrefsqlj30540.html#rrefsqlj30540">definição-da-coluna</a> em
<samp class="codeph">CREATE TABLE</samp>.
A instrução <samp class="codeph">DECLARE GLOBAL TEMPORARY TABLE</samp> não permite
<samp class="codeph">especificação-de-coluna-gerada</samp> na
<samp class="codeph">definição-da-coluna</samp>.</p>

</div>

<div class="section" id="rrefdeclaretemptable__rreftemptabledatatype"><a name="rrefdeclaretemptable__rreftemptabledatatype"><!-- --></a><h4 class="sectiontitle">Tipo-de-dado</h4>

<div class="p">Os tipos-de-dado suportados são:
<ul>
<li>BIGINT</li>

<li>CHAR</li>

<li>DATE</li>

<li>DECIMAL</li>

<li>DOUBLE PRECISION</li>

<li>FLOAT</li>

<li>INTEGER</li>

<li>NUMERIC</li>

<li>REAL</li>

<li>SMALLINT</li>

<li>TIME</li>

<li>TIMESTAMP</li>

<li>VARCHAR</li>

</ul>

</div>

</div>

<div class="section" id="rrefdeclaretemptable__rreftemptableoncommit"><a name="rrefdeclaretemptable__rreftemptableoncommit"><!-- --></a><h4 class="sectiontitle">ON COMMIT</h4>

<p>Especifica a ação a ser executada na tabela temporária global quando é
realizada uma operação de COMMIT.</p>

</div>

<div class="section"><h4 class="sectiontitle">DELETE ROWS</h4>

<p>Todas as linhas da tabela serão excluídas, se não houver nenhum cursor com
possibilidade de HOLD aberto na tabela.
Este é o valor padrão para ON COMMIT.
Se for especificado ON ROLLBACK DELETE ROWS, serão excluídas todas as linhas da
tabela somente se a tabela temporária tiver sido utilizada.
ON COMMIT DELETE ROWS exclui as linhas da tabela, mesmo que a tabela não tenha
sido utilizada (se a tabela não possuir nenhum cursor com possibilidade
de HOLD aberto na mesma).</p>

</div>

<div class="section"><h4 class="sectiontitle">PRESERVE ROWS</h4>

<p>As linhas da tabela são preservadas.</p>

</div>

<div class="section" id="rrefdeclaretemptable__rreftemptablenotlogged"><a name="rrefdeclaretemptable__rreftemptablenotlogged"><!-- --></a><h4 class="sectiontitle">NOT LOGGED</h4>

<p>Especifica a ação realizada na tabela temporária global quando uma operação
de desfazer é realizada.
Quando é realizada uma operação de ROLLBACK (ou ROLLBACK TO SAVEPOINT),
se a tabela foi criada na unidade de trabalho (ou no ponto de salvamento),
a tabela será removida.
Se a tabela foi removida na unidade de trabalho (ou no ponto de salvamento),
a tabela será restaurada sem nenhuma linha.</p>

</div>

<div class="section"><h4 class="sectiontitle">ON ROLLBACK DELETE ROWS</h4>

<p>Este é o valor padrão para NOT LOGGED.
NOT LOGGED [ON ROLLBACK DELETE ROWS ]] especifica a ação a ser realizada na
tabela temporária global quando é realizada uma operação de ROLLBACK
(ou ROLLBACK TO SAVEPOINT).
Se os dados da tabela foram modificados, todas as linhas serão excluídas.</p>

</div>

<div class="section"><h4 class="sectiontitle">Exemplos</h4>

<pre><strong>SET SCHEMA MYAPP;

CREATE TABLE T1(C11 INT, C12 DATE);

DECLARE GLOBAL TEMPORARY TABLE SESSION.T1(C11 INT) NOT LOGGED;</strong>
-- A qualificação SESSION é redundante, porque as tabelas temporárias
-- somente podem existir no esquema SESSION.

<strong>DECLARE GLOBAL TEMPORARY TABLE T2(C21 INT) NOT LOGGED;</strong>
-- A tabela temporária não é qualificada neste caso com SESSION, porque
-- as tabelas temporárias somente podem existir no esquema SESSION.

<strong>INSERT INTO SESSION.T1 VALUES (1); </strong>
-- Neste caso a qualificação SESSION é obrigatória para utilizar a
-- tabela temporária, porque o esquema corrente é MYAPP.

<strong>SELECT * FROM T1;</strong>
-- Esta instrução SELECT está fazendo referência à tabela física
-- "MYAPP.T1", uma vez que a tabela não foi qualificada com SESSION.

</pre>

<p>Deve ser observado que as tabelas temporárias somente podem ser declaradas
no esquema SESSION.
Nunca deve ser declarado um esquema físico com o nome SESSION.</p>

<div class="p">A seguir está mostrada uma lista de funções da instrução
DECLARE GLOBAL TEMPORARY TABLE do DB2 UDB que não são suportadas pelo
<span>Derby</span>:
<ul>
<li>IDENTITY opções-de-coluna </li>

<li>IDENTITY atributo nas opções-de-cópia</li>

<li>AS (<em>FULLSELECT</em>) DEFINITION ONLY</li>

<li>NOT LOGGED ON ROLLBACK PRESERVE ROWS</li>

<li> IN nome-do-espaço-de-tabelas</li>

<li>PARTITIONING KEY</li>

<li>WITH REPLACE </li>

</ul>

</div>

</div>

<div class="section"><h4 class="sectiontitle">Restrições das tabelas temporárias globais declaradas</h4>

<div class="p">As tabelas temporárias não podem ser especificadas nas seguintes instruções:
<ul>
<li>ALTER TABLE </li>

<li>CREATE SYNONYM</li>

<li>CREATE TRIGGER</li>

<li>CREATE VIEW</li>

<li>LOCK</li>

<li>RENAME</li>

</ul>

</div>

<p>As tabelas temporárias não pode ser especificadas nas restrições
referenciais.</p>

<p>Não há suporte para restrição de verificação nas colunas.</p>

<div class="p">Não podem ser utilizados os seguintes tipos de dado nas
tabelas temporárias globais declaradas:
<ul>
<li>BLOB</li>

<li>CLOB</li>

<li>LONG VARCHAR</li>

</ul>

</div>

<p>As tabelas temporárias não podem ser referenciadas por uma
instrução-SQL-engatilhada.</p>

<p>Se uma instrução realizando uma inserção, atualização ou exclusão em uma
tabela temporária encontrar um erro, todas as linhas da tabela serão
excluídas.</p>

</div>

<div class="section"><h4 class="sectiontitle">Restrições específicas do Derby</h4>

<p>O <span>Derby</span>
não dá suporte em tabelas temporárias a:</p>
 <ul>
<li>índices</li>

<li>sinônimos, gatilhos e visões em tabelas no esquema SESSION
(incluindo as tabelas físicas e as tabelas temporárias)</li>

<li>LOCK TABLE</li>

<li>restrições e chaves primárias</li>

<li>especificação-de-coluna-gerada</li>

<li>importação em tabelas temporárias</li>

</ul>

<p>As instruções fazendo referência a tabelas e visões no esquema SESSION
não ficam no <em>cache</em>.</p>

</div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>Tópico pai:</strong> <a href="crefsqlj39374.html" title="">Instruções</a></div>
</div>
<div class="relconcepts"><strong>Conceitos relacionados</strong><br />
<div><a href="crefsqlj22771.html" title="">Interação com o sistema de dependências</a></div>
<div><a href="crefsqlj95081.html" title="">Instruções CREATE</a></div>
<div><a href="crefsqlj80721.html" title="">Instruções DROP</a></div>
<div><a href="crefsqljrenamestatements.html" title="">Instruções RENAME</a></div>
<div><a href="crefsqlj35312.html" title="">Instruções SET</a></div>
</div>
<div class="relref"><strong>Referências relacionadas</strong><br />
<div><a href="rrefsqlj81859.html" title="">Instrução ALTER TABLE</a></div>
<div><a href="rrefcallprocedure.html" title="">CALL (PROCEDIMENTO)</a></div>
<div><a href="rrefsqlj13590.html" title="">Cláusula CONSTRAINT</a></div>
<div><a href="rrefsqlj35981.html" title="">Instrução DELETE</a></div>
<div><a href="rrefsqlj31783.html" title="">Cláusula FOR UPDATE</a></div>
<div><a href="rrefsqlj21583.html" title="">Cláusula FROM</a></div>
<div><a href="rrefsqlj32654.html" title="">Cláusula GROUP BY</a></div>
<div><a href="rrefsqlj14854.html" title="">Cláusula HAVING</a></div>
<div><a href="rrefsqlj35034.html" title="">INNER JOIN</a></div>
<div><a href="rrefsqlj40774.html" title="">Instrução INSERT</a></div>
<div><a href="rrefsqlj29840.html" title="">Operação JOIN</a></div>
<div><a href="rrefsqlj18922.html" title="">LEFT OUTER JOIN</a></div>
<div><a href="rrefsqlj40506.html" title="">Instrução LOCK TABLE</a></div>
<div><a href="rrefsqlj13658.html" title="">Cláusula ORDER BY</a></div>
<div><a href="rrefsqlj21571.html" title="">Consulta</a></div>
<div><a href="rrefsqlj57522.html" title="">RIGHT OUTER JOIN</a></div>
<div><a href="rrefscalarsubquery.html" title="">SubconsultaEscalar</a></div>
<div><a href="rrefselectexpression.html" title="">ExpressãoSeleção</a></div>
<div><a href="rrefsqlj41360.html" title="">Instrução SELECT</a></div>
<div><a href="rreftableexpression.html" title="">ExpressãoTabela</a></div>
<div><a href="rreftablesubquery.html" title="">SubconsultaTabela</a></div>
<div><a href="rrefsqlj26498.html" title="">Instrução UPDATE</a></div>
<div><a href="rrefsqlj11277.html" title="">VALUES Expressão</a></div>
<div><a href="rrefsqlj33602.html" title="">Cláusula WHERE</a></div>
<div><a href="rrefsqlj15309.html" title="">Cláusula WHERE CURRENT OF</a></div>
</div>
</div>

</body>
</html>